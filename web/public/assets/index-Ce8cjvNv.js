var Ql=Object.defineProperty;var Xl=(t,e,l)=>e in t?Ql(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var ut=(t,e,l)=>Xl(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))n(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(i){if(i.ep)return;i.ep=!0;const a=l(i);fetch(i.href,a)}})();function le(){}function Wl(t){return t()}function Tt(){return Object.create(null)}function he(t){t.forEach(Wl)}function Zl(t){return typeof t=="function"}function Ne(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Gl(t){return Object.keys(t).length===0}function Kl(t,...e){if(t==null){for(const n of e)n(void 0);return le}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function ye(t,e,l){t.$$.on_destroy.push(Kl(e,l))}function st(t,e,l){return t.set(l),e}function s(t,e){t.appendChild(e)}function B(t,e,l){t.insertBefore(e,l||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function qe(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function f(t){return document.createElement(t)}function x(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function H(t){return document.createTextNode(t)}function w(){return H(" ")}function gt(){return H("")}function P(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function mt(t){return function(e){return e.preventDefault(),t.call(this,e)}}function Me(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function r(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function ot(t){return t===""?null:+t}function Yl(t){return Array.from(t.childNodes)}function W(t,e){e=""+e,t.data!==e&&(t.data=e)}function $(t,e){t.value=e??""}function ee(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function at(t,e,l){for(let n=0;n<t.options.length;n+=1){const i=t.options[n];if(i.__value===e){i.selected=!0;return}}(!l||e!==void 0)&&(t.selectedIndex=-1)}function Il(t){const e=t.querySelector(":checked");return e&&e.__value}function ce(t,e,l){t.classList.toggle(e,!!l)}function $l(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let $e;function Ye(t){$e=t}function bt(){if(!$e)throw new Error("Function called outside component initialization");return $e}function Xe(t){bt().$$.on_mount.push(t)}function xl(t){bt().$$.on_destroy.push(t)}function ct(){const t=bt();return(e,l,{cancelable:n=!1}={})=>{const i=t.$$.callbacks[e];if(i){const a=$l(e,l,{cancelable:n});return i.slice().forEach(o=>{o.call(t,a)}),!a.defaultPrevented}return!0}}function rt(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const Ue=[],We=[];let Je=[];const vt=[],en=Promise.resolve();let pt=!1;function tn(){pt||(pt=!0,en.then(Dl))}function xe(t){Je.push(t)}function ln(t){vt.push(t)}const ft=new Set;let Ze=0;function Dl(){if(Ze!==0)return;const t=$e;do{try{for(;Ze<Ue.length;){const e=Ue[Ze];Ze++,Ye(e),nn(e.$$)}}catch(e){throw Ue.length=0,Ze=0,e}for(Ye(null),Ue.length=0,Ze=0;We.length;)We.pop()();for(let e=0;e<Je.length;e+=1){const l=Je[e];ft.has(l)||(ft.add(l),l())}Je.length=0}while(Ue.length);for(;vt.length;)vt.pop()();pt=!1,ft.clear(),Ye(t)}function nn(t){if(t.fragment!==null){t.update(),he(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(xe)}}function sn(t){const e=[],l=[];Je.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),Je=e}const it=new Set;let on;function Ee(t,e){t&&t.i&&(it.delete(t),t.i(e))}function Pe(t,e,l,n){if(t&&t.o){if(it.has(t))return;it.add(t),on.c.push(()=>{it.delete(t)}),t.o(e)}}function se(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function an(t,e){t.d(1),e.delete(t.key)}function rn(t,e,l,n,i,a,o,d,c,u,g,_){let h=t.length,p=a.length,v=h;const m={};for(;v--;)m[t[v].key]=v;const b=[],y=new Map,k=new Map,M=[];for(v=p;v--;){const R=_(i,a,v),F=l(R);let C=o.get(F);C?M.push(()=>C.p(R,e)):(C=u(F,R),C.c()),y.set(F,b[v]=C),F in m&&k.set(F,Math.abs(v-m[F]))}const j=new Set,L=new Set;function T(R){Ee(R,1),R.m(d,g),o.set(R.key,R),g=R.first,p--}for(;h&&p;){const R=b[p-1],F=t[h-1],C=R.key,q=F.key;R===F?(g=R.first,h--,p--):y.has(q)?!o.has(C)||j.has(C)?T(R):L.has(q)?h--:k.get(C)>k.get(q)?(L.add(C),T(R)):(j.add(q),h--):(c(F,o),h--)}for(;h--;){const R=t[h];y.has(R.key)||c(R,o)}for(;p;)T(b[p-1]);return he(M),b}function cn(t,e,l){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=l,l(t.$$.ctx[n]))}function Fe(t){t&&t.c()}function Ae(t,e,l){const{fragment:n,after_update:i}=t.$$;n&&n.m(e,l),xe(()=>{const a=t.$$.on_mount.map(Wl).filter(Zl);t.$$.on_destroy?t.$$.on_destroy.push(...a):he(a),t.$$.on_mount=[]}),i.forEach(xe)}function Be(t,e){const l=t.$$;l.fragment!==null&&(sn(l.after_update),he(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function un(t,e){t.$$.dirty[0]===-1&&(Ue.push(t),tn(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function He(t,e,l,n,i,a,o=null,d=[-1]){const c=$e;Ye(t);const u=t.$$={fragment:null,ctx:[],props:a,update:le,not_equal:i,bound:Tt(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(c?c.$$.context:[])),callbacks:Tt(),dirty:d,skip_bound:!1,root:e.target||c.$$.root};o&&o(u.root);let g=!1;if(u.ctx=l?l(t,e.props||{},(_,h,...p)=>{const v=p.length?p[0]:h;return u.ctx&&i(u.ctx[_],u.ctx[_]=v)&&(!u.skip_bound&&u.bound[_]&&u.bound[_](v),g&&un(t,_)),h}):[],u.update(),g=!0,he(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){const _=Yl(e.target);u.fragment&&u.fragment.l(_),_.forEach(O)}else u.fragment&&u.fragment.c();e.intro&&Ee(t.$$.fragment),Ae(t,e.target,e.anchor),Dl()}Ye(c)}class ze{constructor(){ut(this,"$$");ut(this,"$$set")}$destroy(){Be(this,1),this.$destroy=le}$on(e,l){if(!Zl(l))return le;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const i=n.indexOf(l);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!Gl(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const fn="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(fn);const Ie=[];function Re(t,e=le){let l;const n=new Set;function i(d){if(Ne(t,d)&&(t=d,l)){const c=!Ie.length;for(const u of n)u[1](),Ie.push(u,t);if(c){for(let u=0;u<Ie.length;u+=2)Ie[u][0](Ie[u+1]);Ie.length=0}}}function a(d){i(d(t))}function o(d,c=le){const u=[d,c];return n.add(u),n.size===1&&(l=e(i,a)||le),d(t),()=>{n.delete(u),n.size===0&&l&&(l(),l=null)}}return{set:i,update:a,subscribe:o}}const wt=Re([]),_t=Re(!1),Et=Re(null),Ke=Re(""),Ve=Re("15m"),kt=Re(0),yt=Re([]),Ct=Re([]),St=Re([]),Ul=Re([]),Lt="/api";async function Ge(){_t.set(!0),Et.set(null);try{let t,e;Ke.subscribe(a=>t=a)(),Ve.subscribe(a=>e=a)();const l=new URLSearchParams({range:e,limit:500});t&&l.set("q",t);const i=await(await fetch(`${Lt}/logs?${l}`)).json();wt.set(i.hits||[]),kt.set(i.total||0),await Promise.all([dt("level"),dt("service"),dt("host"),dn()])}catch(t){Et.set(t.message),console.error("Search error:",t)}finally{_t.set(!1)}}async function dt(t){try{let e;Ve.subscribe(a=>e=a)();const l=new URLSearchParams({range:e,limit:10}),i=await(await fetch(`${Lt}/stats/fields/${t}?${l}`)).json();t==="level"&&yt.set(i.values||[]),t==="service"&&Ct.set(i.values||[]),t==="host"&&St.set(i.values||[])}catch(e){console.error(`Failed to fetch ${t} stats:`,e)}}async function dn(){try{let t;Ve.subscribe(a=>t=a)();let e="1 minute";(t==="24h"||t==="7d")&&(e="1 hour"),t==="30d"&&(e="1 day");const l=new URLSearchParams({range:t,interval:e}),i=await(await fetch(`${Lt}/stats/histogram?${l}`)).json();Ul.set(i.buckets||[])}catch(t){console.error("Failed to fetch histogram:",t)}}function hn(){const t=window.location.protocol==="https:"?"wss:":"ws:",e=new WebSocket(`${t}//${window.location.host}/api/logs/stream`);return e.onopen=()=>{console.log("WebSocket connected")},e.onmessage=l=>{try{const n=JSON.parse(l.data);n.type==="log"&&wt.update(i=>[n.data,...i.slice(0,499)])}catch(n){console.error("WebSocket message error:",n)}},e.onerror=l=>{console.error("WebSocket error:",l)},e.onclose=()=>{console.log("WebSocket disconnected")},e}function Nt(t){return t?new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}function Ot(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function je(t){return{EMERGENCY:"#f85149",ALERT:"#f85149",CRITICAL:"#f85149",ERROR:"#f85149",WARNING:"#d29922",NOTICE:"#58a6ff",INFO:"#3fb950",DEBUG:"#8b949e",TRACE:"#6e7681"}[t]||"#8b949e"}function At(t,e,l){const n=t.slice();return n[27]=e[l],n[29]=l,n}function Bt(t,e,l){const n=t.slice();return n[30]=e[l],n[29]=l,n}function jt(t){let e,l,n;return{c(){e=f("button"),e.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 5.586 3.707 2.293a1 1 0 0 0-1.414 1.414L5.586 7 2.293 10.293a1 1 0 1 0 1.414 1.414L7 8.414l3.293 3.293a1 1 0 0 0 1.414-1.414L8.414 7l3.293-3.293a1 1 0 0 0-1.414-1.414L7 5.586Z"></path></svg>',r(e,"class","clear-btn svelte-a8z0vj"),r(e,"title","Clear search")},m(i,a){B(i,e,a),l||(n=P(e,"click",t[14]),l=!0)},p:le,d(i){i&&O(e),l=!1,n()}}}function Ht(t){let e,l=se(t[2]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ft(Bt(t,l,i));return{c(){e=f("div");for(let i=0;i<n.length;i+=1)n[i].c();r(e,"class","suggestions svelte-a8z0vj")},m(i,a){B(i,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,a){if(a[0]&2060){l=se(i[2]);let o;for(o=0;o<l.length;o+=1){const d=Bt(i,l,o);n[o]?n[o].p(d,a):(n[o]=Ft(d),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&O(e),qe(n,i)}}}function vn(t){let e,l;return{c(){e=x("svg"),l=x("circle"),r(l,"cx","6"),r(l,"cy","6"),r(l,"r","4"),r(l,"fill","currentColor"),r(e,"width","12"),r(e,"height","12"),r(e,"viewBox","0 0 12 12")},m(n,i){B(n,e,i),s(e,l)},d(n){n&&O(e)}}}function pn(t){let e,l;return{c(){e=x("svg"),l=x("path"),r(l,"fill","currentColor"),r(l,"d","M6 1v10M1 6h10"),r(l,"stroke","currentColor"),r(l,"stroke-width","1.5"),r(e,"width","12"),r(e,"height","12"),r(e,"viewBox","0 0 12 12")},m(n,i){B(n,e,i),s(e,l)},d(n){n&&O(e)}}}function _n(t){let e,l;return{c(){e=x("svg"),l=x("path"),r(l,"fill","currentColor"),r(l,"d","M2 3h8v1H2V3zm0 2.5h8v1H2v-1zm0 2.5h5v1H2V8z"),r(e,"width","12"),r(e,"height","12"),r(e,"viewBox","0 0 12 12")},m(n,i){B(n,e,i),s(e,l)},d(n){n&&O(e)}}}function zt(t){let e,l=t[30].hint+"",n;return{c(){e=f("span"),n=H(l),r(e,"class","suggestion-hint svelte-a8z0vj")},m(i,a){B(i,e,a),s(e,n)},p(i,a){a[0]&4&&l!==(l=i[30].hint+"")&&W(n,l)},d(i){i&&O(e)}}}function Pt(t){let e,l=t[30].field+"",n;return{c(){e=f("span"),n=H(l),r(e,"class","suggestion-field svelte-a8z0vj")},m(i,a){B(i,e,a),s(e,n)},p(i,a){a[0]&4&&l!==(l=i[30].field+"")&&W(n,l)},d(i){i&&O(e)}}}function Ft(t){let e,l,n,i,a=t[30].display+"",o,d,c,u,g,_;function h(k,M){return k[30].type==="field"?_n:k[30].type==="operator"?pn:vn}let p=h(t),v=p(t),m=t[30].hint&&zt(t),b=t[30].field&&Pt(t);function y(){return t[17](t[30])}return{c(){e=f("button"),l=f("span"),v.c(),n=w(),i=f("span"),o=H(a),d=w(),m&&m.c(),c=w(),b&&b.c(),u=w(),r(l,"class","suggestion-icon svelte-a8z0vj"),r(i,"class","suggestion-text svelte-a8z0vj"),r(e,"class","suggestion-item svelte-a8z0vj"),ce(e,"selected",t[29]===t[3])},m(k,M){B(k,e,M),s(e,l),v.m(l,null),s(e,n),s(e,i),s(i,o),s(e,d),m&&m.m(e,null),s(e,c),b&&b.m(e,null),s(e,u),g||(_=P(e,"mousedown",mt(y)),g=!0)},p(k,M){t=k,p!==(p=h(t))&&(v.d(1),v=p(t),v&&(v.c(),v.m(l,null))),M[0]&4&&a!==(a=t[30].display+"")&&W(o,a),t[30].hint?m?m.p(t,M):(m=zt(t),m.c(),m.m(e,c)):m&&(m.d(1),m=null),t[30].field?b?b.p(t,M):(b=Pt(t),b.c(),b.m(e,u)):b&&(b.d(1),b=null),M[0]&8&&ce(e,"selected",t[29]===t[3])},d(k){k&&O(e),v.d(),m&&m.d(),b&&b.d(),g=!1,_()}}}function Wt(t){let e,l,n,i,a,o,d,c,u=se(t[5]),g=[];for(let _=0;_<u.length;_+=1)g[_]=Zt(At(t,u,_));return{c(){e=f("div"),l=f("div"),n=f("span"),n.textContent="Recent searches",i=w(),a=f("button"),a.textContent="Clear",o=w();for(let _=0;_<g.length;_+=1)g[_].c();r(a,"class","history-clear svelte-a8z0vj"),r(l,"class","history-header svelte-a8z0vj"),r(e,"class","suggestions history svelte-a8z0vj")},m(_,h){B(_,e,h),s(e,l),s(l,n),s(l,i),s(l,a),s(e,o);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(e,null);d||(c=P(a,"mousedown",mt(t[13])),d=!0)},p(_,h){if(h[0]&4128){u=se(_[5]);let p;for(p=0;p<u.length;p+=1){const v=At(_,u,p);g[p]?g[p].p(v,h):(g[p]=Zt(v),g[p].c(),g[p].m(e,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=u.length}},d(_){_&&O(e),qe(g,_),d=!1,c()}}}function Zt(t){let e,l,n,i,a=t[27]+"",o,d,c,u;function g(){return t[18](t[27])}return{c(){e=f("button"),l=f("span"),l.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M6 1a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 9a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm.5-4V3.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .15.35l2 2a.5.5 0 0 0 .7-.7L6.5 6z"></path></svg>',n=w(),i=f("span"),o=H(a),d=w(),r(l,"class","suggestion-icon svelte-a8z0vj"),r(i,"class","suggestion-text history-query svelte-a8z0vj"),r(e,"class","suggestion-item svelte-a8z0vj")},m(_,h){B(_,e,h),s(e,l),s(e,n),s(e,i),s(i,o),s(e,d),c||(u=P(e,"mousedown",mt(g)),c=!0)},p(_,h){t=_,h[0]&32&&a!==(a=t[27]+"")&&W(o,a)},d(_){_&&O(e),c=!1,u()}}}function gn(t){let e,l,n,i,a,o,d,c,u,g,_=t[0]&&jt(t),h=t[1]&&t[2].length>0&&Ht(t),p=t[6]&&t[5].length>0&&Wt(t);return{c(){e=f("div"),l=x("svg"),n=x("path"),i=w(),a=f("input"),o=w(),_&&_.c(),d=w(),h&&h.c(),c=w(),p&&p.c(),r(n,"fill","currentColor"),r(n,"d","M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-.82 4.74a6 6 0 1 1 1.06-1.06l3.04 3.04a.75.75 0 1 1-1.06 1.06l-3.04-3.04Z"),r(l,"class","search-icon svelte-a8z0vj"),r(l,"width","16"),r(l,"height","16"),r(l,"viewBox","0 0 16 16"),r(a,"type","text"),r(a,"placeholder","Search logs... level:ERROR AND service:api*"),r(a,"autocomplete","off"),r(a,"class","svelte-a8z0vj"),r(e,"class","search-bar svelte-a8z0vj")},m(v,m){B(v,e,m),s(e,l),s(l,n),s(e,i),s(e,a),t[15](a),$(a,t[0]),s(e,o),_&&_.m(e,null),s(e,d),h&&h.m(e,null),s(e,c),p&&p.m(e,null),u||(g=[P(a,"input",t[16]),P(a,"keydown",t[7]),P(a,"input",t[8]),P(a,"focus",t[9]),P(a,"blur",t[10])],u=!0)},p(v,m){m[0]&1&&a.value!==v[0]&&$(a,v[0]),v[0]?_?_.p(v,m):(_=jt(v),_.c(),_.m(e,d)):_&&(_.d(1),_=null),v[1]&&v[2].length>0?h?h.p(v,m):(h=Ht(v),h.c(),h.m(e,c)):h&&(h.d(1),h=null),v[6]&&v[5].length>0?p?p.p(v,m):(p=Wt(v),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i:le,o:le,d(v){v&&O(e),t[15](null),_&&_.d(),h&&h.d(),p&&p.d(),u=!1,he(g)}}}const mn=10;function bn(t,e,l){let n,i,a;ye(t,St,S=>l(19,n=S)),ye(t,Ct,S=>l(20,i=S)),ye(t,yt,S=>l(21,a=S));let{value:o=""}=e;const d=ct();let c=!1,u=[],g=-1,_,h=[],p=!1;const v=["AND","OR","NOT"],m=["level","service","host","message","timestamp"];Xe(()=>{const S=localStorage.getItem("purl_search_history");S&&l(5,h=JSON.parse(S))});function b(S){S.trim()&&(l(5,h=[S,...h.filter(I=>I!==S)].slice(0,mn)),localStorage.setItem("purl_search_history",JSON.stringify(h)))}function y(S){if(c&&u.length>0){if(S.key==="ArrowDown")S.preventDefault(),l(3,g=Math.min(g+1,u.length-1));else if(S.key==="ArrowUp")S.preventDefault(),l(3,g=Math.max(g-1,-1));else if(S.key==="Enter"&&g>=0){S.preventDefault(),T(u[g]);return}else if(S.key==="Escape"){l(1,c=!1),l(6,p=!1);return}}S.key==="Enter"&&(l(1,c=!1),l(6,p=!1),b(o),d("search"))}function k(){l(3,g=-1),L()}function M(){!o&&h.length>0?l(6,p=!0):L()}function j(){setTimeout(()=>{l(1,c=!1),l(6,p=!1)},200)}function L(){l(6,p=!1);const S=(_==null?void 0:_.selectionStart)||o.length,E=o.substring(0,S).split(/\s+/),J=E[E.length-1]||"";if(!J){l(1,c=!1);return}if(l(2,u=[]),J.includes(":")){const[V,G]=J.split(":"),te=V.toLowerCase();let U=[];te==="level"?U=a.map(D=>D.value):te==="service"?U=i.map(D=>D.value):te==="host"&&(U=n.map(D=>D.value));const Q=(G||"").toLowerCase();l(2,u=U.filter(D=>D.toLowerCase().includes(Q)).slice(0,8).map(D=>({type:"value",text:`${V}:${D}`,display:D,field:V})))}else{const V=J.toLowerCase(),G=m.filter(U=>U.toLowerCase().startsWith(V)).map(U=>({type:"field",text:`${U}:`,display:U,hint:"field"})),te=E.length>1?v.filter(U=>U.toLowerCase().startsWith(V)).map(U=>({type:"operator",text:U,display:U,hint:"operator"})):[];l(2,u=[...G,...te].slice(0,8))}l(1,c=u.length>0)}function T(S){const I=(_==null?void 0:_.selectionStart)||o.length,E=o.substring(0,I),J=o.substring(I),V=E.lastIndexOf(" "),G=E.substring(0,V+1);l(0,o=G+S.text+(S.type==="field"?"":" ")+J.trimStart()),l(1,c=!1),l(3,g=-1),setTimeout(()=>_==null?void 0:_.focus(),0)}function R(S){l(0,o=S),l(6,p=!1),d("search")}function F(){l(5,h=[]),localStorage.removeItem("purl_search_history"),l(6,p=!1)}function C(){l(0,o=""),d("search")}function q(S){We[S?"unshift":"push"](()=>{_=S,l(4,_)})}function A(){o=this.value,l(0,o)}const z=S=>T(S),N=S=>R(S);return t.$$set=S=>{"value"in S&&l(0,o=S.value)},[o,c,u,g,_,h,p,y,k,M,j,T,R,F,C,q,A,z,N]}class wn extends ze{constructor(e){super(),He(this,e,bn,gn,Ne,{value:0},null,[-1,-1])}}function It(t,e,l){const n=t.slice();return n[9]=e[l],n}function Dt(t){let e,l=se(t[3]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ut(It(t,l,i));return{c(){e=f("div");for(let i=0;i<n.length;i+=1)n[i].c();r(e,"class","dropdown svelte-19hb89a")},m(i,a){B(i,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,a){if(a&25){l=se(i[3]);let o;for(o=0;o<l.length;o+=1){const d=It(i,l,o);n[o]?n[o].p(d,a):(n[o]=Ut(d),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&O(e),qe(n,i)}}}function Ut(t){let e,l,n;function i(){return t[7](t[9])}return{c(){e=f("button"),e.textContent=`${t[9].label} `,r(e,"class","dropdown-item svelte-19hb89a"),ce(e,"active",t[0]===t[9].value)},m(a,o){B(a,e,o),l||(n=P(e,"click",i),l=!0)},p(a,o){t=a,o&9&&ce(e,"active",t[0]===t[9].value)},d(a){a&&O(e),l=!1,n()}}}function kn(t){let e,l,n,i,a,o,d,c,u,g,_,h,p,v=t[1]&&Dt(t);return{c(){e=f("div"),l=f("button"),n=x("svg"),i=x("path"),a=w(),o=f("span"),d=H(t[2]),c=w(),u=x("svg"),g=x("path"),_=w(),v&&v.c(),r(i,"fill","currentColor"),r(i,"d","M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm0 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM8 3a.75.75 0 0 1 .75.75v3.69l2.28 2.28a.75.75 0 0 1-1.06 1.06L7.22 8.03A.75.75 0 0 1 7 7.5v-3.75A.75.75 0 0 1 8 3Z"),r(n,"width","16"),r(n,"height","16"),r(n,"viewBox","0 0 16 16"),r(g,"fill","currentColor"),r(g,"d","M6 8.825a.5.5 0 0 1-.354-.146l-4-4a.5.5 0 0 1 .708-.708L6 7.617l3.646-3.646a.5.5 0 0 1 .708.708l-4 4A.5.5 0 0 1 6 8.825Z"),r(u,"class","chevron svelte-19hb89a"),r(u,"width","12"),r(u,"height","12"),r(u,"viewBox","0 0 12 12"),r(l,"class","picker-btn svelte-19hb89a"),r(e,"class","time-picker svelte-19hb89a")},m(m,b){B(m,e,b),s(e,l),s(l,n),s(n,i),s(l,a),s(l,o),s(o,d),s(l,c),s(l,u),s(u,g),s(e,_),v&&v.m(e,null),h||(p=[P(window,"click",t[6]),P(l,"click",Me(t[5]))],h=!0)},p(m,[b]){b&4&&W(d,m[2]),m[1]?v?v.p(m,b):(v=Dt(m),v.c(),v.m(e,null)):v&&(v.d(1),v=null)},i:le,o:le,d(m){m&&O(e),v&&v.d(),h=!1,he(p)}}}function yn(t,e,l){let n,{value:i="15m"}=e;const a=ct(),o=[{value:"5m",label:"Last 5 minutes"},{value:"15m",label:"Last 15 minutes"},{value:"30m",label:"Last 30 minutes"},{value:"1h",label:"Last 1 hour"},{value:"4h",label:"Last 4 hours"},{value:"12h",label:"Last 12 hours"},{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"}];let d=!1;function c(h){l(0,i=h),l(1,d=!1),a("change",h)}function u(){l(1,d=!d)}function g(h){h.target.closest(".time-picker")||l(1,d=!1)}const _=h=>c(h.value);return t.$$set=h=>{"value"in h&&l(0,i=h.value)},t.$$.update=()=>{var h;t.$$.dirty&1&&l(2,n=((h=o.find(p=>p.value===i))==null?void 0:h.label)||i)},[i,d,n,o,c,u,g,_]}class Cn extends ze{constructor(e){super(),He(this,e,yn,kn,Ne,{value:0})}}function Jt(t,e,l){const n=t.slice();return n[29]=e[l],n}function Vt(t,e,l){const n=t.slice();return n[29]=e[l],n}function Qt(t,e,l){const n=t.slice();return n[29]=e[l],n}function Xt(t){let e,l,n=se(t[10]),i=[];for(let o=0;o<n.length;o+=1)i[o]=Gt(Qt(t,n,o));let a=t[10].length===0&&Kt();return{c(){e=f("div");for(let o=0;o<i.length;o+=1)i[o].c();l=w(),a&&a.c(),r(e,"class","field-values svelte-4ctbet")},m(o,d){B(o,e,d);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);s(e,l),a&&a.m(e,null)},p(o,d){if(d[0]&25728){n=se(o[10]);let c;for(c=0;c<n.length;c+=1){const u=Qt(o,n,c);i[c]?i[c].p(u,d):(i[c]=Gt(u),i[c].c(),i[c].m(e,l))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}o[10].length===0?a||(a=Kt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(o){o&&O(e),qe(i,o),a&&a.d()}}}function Gt(t){let e,l,n,i,a,o=t[29].value+"",d,c,u,g,_,h,p=Qe(t[29].count)+"",v,m,b,y=t[14](t[29].count).toFixed(0)+"",k,M,j,L,T,R;function F(){return t[19](t[29])}function C(){return t[20](t[29])}return{c(){e=f("div"),l=f("button"),n=f("span"),i=w(),a=f("span"),d=H(o),c=w(),u=f("div"),g=f("div"),_=w(),h=f("span"),v=H(p),m=w(),b=f("span"),k=H(y),M=H("%"),j=w(),L=f("button"),L.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',r(n,"class","value-dot svelte-4ctbet"),ee(n,"background",je(t[29].value)),r(a,"class","value-name svelte-4ctbet"),r(g,"class","value-bar svelte-4ctbet"),ee(g,"width",t[29].count/t[7]*100+"%"),ee(g,"background",je(t[29].value)+"40"),r(u,"class","value-bar-container svelte-4ctbet"),r(h,"class","value-count svelte-4ctbet"),r(b,"class","value-percent svelte-4ctbet"),r(l,"class","field-value svelte-4ctbet"),r(L,"class","exclude-btn svelte-4ctbet"),r(L,"title","Exclude"),r(e,"class","field-value-row svelte-4ctbet")},m(q,A){B(q,e,A),s(e,l),s(l,n),s(l,i),s(l,a),s(a,d),s(l,c),s(l,u),s(u,g),s(l,_),s(l,h),s(h,v),s(l,m),s(l,b),s(b,k),s(b,M),s(e,j),s(e,L),T||(R=[P(l,"click",F),P(L,"click",Me(C))],T=!0)},p(q,A){t=q,A[0]&1024&&ee(n,"background",je(t[29].value)),A[0]&1024&&o!==(o=t[29].value+"")&&W(d,o),A[0]&1152&&ee(g,"width",t[29].count/t[7]*100+"%"),A[0]&1024&&ee(g,"background",je(t[29].value)+"40"),A[0]&1024&&p!==(p=Qe(t[29].count)+"")&&W(v,p),A[0]&1024&&y!==(y=t[14](t[29].count).toFixed(0)+"")&&W(k,y)},d(q){q&&O(e),T=!1,he(R)}}}function Kt(t){let e;return{c(){e=f("div"),e.textContent="No data",r(e,"class","empty svelte-4ctbet")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function Yt(t){let e,l,n=se(t[9]),i=[];for(let o=0;o<n.length;o+=1)i[o]=$t(Vt(t,n,o));let a=t[9].length===0&&xt();return{c(){e=f("div");for(let o=0;o<i.length;o+=1)i[o].c();l=w(),a&&a.c(),r(e,"class","field-values svelte-4ctbet")},m(o,d){B(o,e,d);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);s(e,l),a&&a.m(e,null)},p(o,d){if(d[0]&25152){n=se(o[9]);let c;for(c=0;c<n.length;c+=1){const u=Vt(o,n,c);i[c]?i[c].p(u,d):(i[c]=$t(u),i[c].c(),i[c].m(e,l))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}o[9].length===0?a||(a=xt(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(o){o&&O(e),qe(i,o),a&&a.d()}}}function $t(t){let e,l,n,i,a,o=t[29].value+"",d,c,u,g,_,h,p=Qe(t[29].count)+"",v,m,b,y=t[14](t[29].count).toFixed(0)+"",k,M,j,L,T,R;function F(){return t[22](t[29])}function C(){return t[23](t[29])}return{c(){e=f("div"),l=f("button"),n=f("span"),i=w(),a=f("span"),d=H(o),c=w(),u=f("div"),g=f("div"),_=w(),h=f("span"),v=H(p),m=w(),b=f("span"),k=H(y),M=H("%"),j=w(),L=f("button"),L.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',r(n,"class","value-dot svelte-4ctbet"),ee(n,"background","#58a6ff"),r(a,"class","value-name svelte-4ctbet"),r(g,"class","value-bar svelte-4ctbet"),ee(g,"width",t[29].count/t[6]*100+"%"),ee(g,"background","#58a6ff40"),r(u,"class","value-bar-container svelte-4ctbet"),r(h,"class","value-count svelte-4ctbet"),r(b,"class","value-percent svelte-4ctbet"),r(l,"class","field-value svelte-4ctbet"),r(L,"class","exclude-btn svelte-4ctbet"),r(L,"title","Exclude"),r(e,"class","field-value-row svelte-4ctbet")},m(q,A){B(q,e,A),s(e,l),s(l,n),s(l,i),s(l,a),s(a,d),s(l,c),s(l,u),s(u,g),s(l,_),s(l,h),s(h,v),s(l,m),s(l,b),s(b,k),s(b,M),s(e,j),s(e,L),T||(R=[P(l,"click",F),P(L,"click",Me(C))],T=!0)},p(q,A){t=q,A[0]&512&&o!==(o=t[29].value+"")&&W(d,o),A[0]&576&&ee(g,"width",t[29].count/t[6]*100+"%"),A[0]&512&&p!==(p=Qe(t[29].count)+"")&&W(v,p),A[0]&512&&y!==(y=t[14](t[29].count).toFixed(0)+"")&&W(k,y)},d(q){q&&O(e),T=!1,he(R)}}}function xt(t){let e;return{c(){e=f("div"),e.textContent="No data",r(e,"class","empty svelte-4ctbet")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function el(t){let e,l,n=se(t[8]),i=[];for(let o=0;o<n.length;o+=1)i[o]=tl(Jt(t,n,o));let a=t[8].length===0&&ll();return{c(){e=f("div");for(let o=0;o<i.length;o+=1)i[o].c();l=w(),a&&a.c(),r(e,"class","field-values svelte-4ctbet")},m(o,d){B(o,e,d);for(let c=0;c<i.length;c+=1)i[c]&&i[c].m(e,null);s(e,l),a&&a.m(e,null)},p(o,d){if(d[0]&24864){n=se(o[8]);let c;for(c=0;c<n.length;c+=1){const u=Jt(o,n,c);i[c]?i[c].p(u,d):(i[c]=tl(u),i[c].c(),i[c].m(e,l))}for(;c<i.length;c+=1)i[c].d(1);i.length=n.length}o[8].length===0?a||(a=ll(),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(o){o&&O(e),qe(i,o),a&&a.d()}}}function tl(t){let e,l,n,i,a,o=t[29].value+"",d,c,u,g,_,h,p=Qe(t[29].count)+"",v,m,b,y=t[14](t[29].count).toFixed(0)+"",k,M,j,L,T,R;function F(){return t[25](t[29])}function C(){return t[26](t[29])}return{c(){e=f("div"),l=f("button"),n=f("span"),i=w(),a=f("span"),d=H(o),c=w(),u=f("div"),g=f("div"),_=w(),h=f("span"),v=H(p),m=w(),b=f("span"),k=H(y),M=H("%"),j=w(),L=f("button"),L.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',r(n,"class","value-dot svelte-4ctbet"),ee(n,"background","#a371f7"),r(a,"class","value-name svelte-4ctbet"),r(g,"class","value-bar svelte-4ctbet"),ee(g,"width",t[29].count/t[5]*100+"%"),ee(g,"background","#a371f740"),r(u,"class","value-bar-container svelte-4ctbet"),r(h,"class","value-count svelte-4ctbet"),r(b,"class","value-percent svelte-4ctbet"),r(l,"class","field-value svelte-4ctbet"),r(L,"class","exclude-btn svelte-4ctbet"),r(L,"title","Exclude"),r(e,"class","field-value-row svelte-4ctbet")},m(q,A){B(q,e,A),s(e,l),s(l,n),s(l,i),s(l,a),s(a,d),s(l,c),s(l,u),s(u,g),s(l,_),s(l,h),s(h,v),s(l,m),s(l,b),s(b,k),s(b,M),s(e,j),s(e,L),T||(R=[P(l,"click",F),P(L,"click",Me(C))],T=!0)},p(q,A){t=q,A[0]&256&&o!==(o=t[29].value+"")&&W(d,o),A[0]&288&&ee(g,"width",t[29].count/t[5]*100+"%"),A[0]&256&&p!==(p=Qe(t[29].count)+"")&&W(v,p),A[0]&256&&y!==(y=t[14](t[29].count).toFixed(0)+"")&&W(k,y)},d(q){q&&O(e),T=!1,he(R)}}}function ll(t){let e;return{c(){e=f("div"),e.textContent="No data",r(e,"class","empty svelte-4ctbet")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function Sn(t){let e,l,n,i,a,o,d,c,u,g,_,h,p,v,m,b,y,k,M,j,L,T,R,F=t[3].length+"",C,q,A,z,N,S,I,E,J,V,G,te=t[2].length+"",U,Q,D,ne,oe,ue,_e,ve,fe,Te,de,Le=t[1].length+"",ge,Ce,pe,Se,ie=t[4].level&&Xt(t),Y=t[4].service&&Yt(t),X=t[4].host&&el(t);return{c(){e=f("div"),l=f("div"),n=f("h3"),n.textContent="Fields",i=w(),a=f("div"),o=f("button"),o.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M2 4l4 4 4-4"></path></svg>',d=w(),c=f("button"),c.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M2 8l4-4 4 4"></path></svg>',u=w(),g=f("div"),_=x("svg"),h=x("path"),p=w(),v=f("input"),m=w(),b=f("div"),y=f("button"),k=x("svg"),M=x("path"),j=w(),L=f("span"),L.textContent="level",T=w(),R=f("span"),C=H(F),q=w(),ie&&ie.c(),A=w(),z=f("div"),N=f("button"),S=x("svg"),I=x("path"),E=w(),J=f("span"),J.textContent="service",V=w(),G=f("span"),U=H(te),Q=w(),Y&&Y.c(),D=w(),ne=f("div"),oe=f("button"),ue=x("svg"),_e=x("path"),ve=w(),fe=f("span"),fe.textContent="host",Te=w(),de=f("span"),ge=H(Le),Ce=w(),X&&X.c(),r(n,"class","svelte-4ctbet"),r(o,"class","action-btn svelte-4ctbet"),r(o,"title","Expand all"),r(c,"class","action-btn svelte-4ctbet"),r(c,"title","Collapse all"),r(a,"class","header-actions svelte-4ctbet"),r(l,"class","fields-header svelte-4ctbet"),r(h,"fill","currentColor"),r(h,"d","M8.5 5.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-.5 3.2a4 4 0 1 1 .7-.7l2.1 2.1a.5.5 0 0 1-.7.7L8 8.7Z"),r(_,"width","12"),r(_,"height","12"),r(_,"viewBox","0 0 12 12"),r(_,"class","svelte-4ctbet"),r(v,"type","text"),r(v,"placeholder","Filter fields..."),r(v,"class","svelte-4ctbet"),r(g,"class","field-search svelte-4ctbet"),r(M,"fill","currentColor"),r(M,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),r(k,"class","chevron svelte-4ctbet"),r(k,"width","12"),r(k,"height","12"),r(k,"viewBox","0 0 12 12"),ce(k,"expanded",t[4].level),r(L,"class","section-name svelte-4ctbet"),r(R,"class","section-count svelte-4ctbet"),r(y,"class","section-header svelte-4ctbet"),r(b,"class","field-section svelte-4ctbet"),r(I,"fill","currentColor"),r(I,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),r(S,"class","chevron svelte-4ctbet"),r(S,"width","12"),r(S,"height","12"),r(S,"viewBox","0 0 12 12"),ce(S,"expanded",t[4].service),r(J,"class","section-name svelte-4ctbet"),r(G,"class","section-count svelte-4ctbet"),r(N,"class","section-header svelte-4ctbet"),r(z,"class","field-section svelte-4ctbet"),r(_e,"fill","currentColor"),r(_e,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),r(ue,"class","chevron svelte-4ctbet"),r(ue,"width","12"),r(ue,"height","12"),r(ue,"viewBox","0 0 12 12"),ce(ue,"expanded",t[4].host),r(fe,"class","section-name svelte-4ctbet"),r(de,"class","section-count svelte-4ctbet"),r(oe,"class","section-header svelte-4ctbet"),r(ne,"class","field-section svelte-4ctbet"),r(e,"class","fields-sidebar svelte-4ctbet")},m(K,ae){B(K,e,ae),s(e,l),s(l,n),s(l,i),s(l,a),s(a,o),s(a,d),s(a,c),s(e,u),s(e,g),s(g,_),s(_,h),s(g,p),s(g,v),$(v,t[0]),s(e,m),s(e,b),s(b,y),s(y,k),s(k,M),s(y,j),s(y,L),s(y,T),s(y,R),s(R,C),s(b,q),ie&&ie.m(b,null),s(e,A),s(e,z),s(z,N),s(N,S),s(S,I),s(N,E),s(N,J),s(N,V),s(N,G),s(G,U),s(z,Q),Y&&Y.m(z,null),s(e,D),s(e,ne),s(ne,oe),s(oe,ue),s(ue,_e),s(oe,ve),s(oe,fe),s(oe,Te),s(oe,de),s(de,ge),s(ne,Ce),X&&X.m(ne,null),pe||(Se=[P(o,"click",t[15]),P(c,"click",t[16]),P(v,"input",t[17]),P(y,"click",t[18]),P(N,"click",t[21]),P(oe,"click",t[24])],pe=!0)},p(K,ae){ae[0]&1&&v.value!==K[0]&&$(v,K[0]),ae[0]&16&&ce(k,"expanded",K[4].level),ae[0]&8&&F!==(F=K[3].length+"")&&W(C,F),K[4].level?ie?ie.p(K,ae):(ie=Xt(K),ie.c(),ie.m(b,null)):ie&&(ie.d(1),ie=null),ae[0]&16&&ce(S,"expanded",K[4].service),ae[0]&4&&te!==(te=K[2].length+"")&&W(U,te),K[4].service?Y?Y.p(K,ae):(Y=Yt(K),Y.c(),Y.m(z,null)):Y&&(Y.d(1),Y=null),ae[0]&16&&ce(ue,"expanded",K[4].host),ae[0]&2&&Le!==(Le=K[1].length+"")&&W(ge,Le),K[4].host?X?X.p(K,ae):(X=el(K),X.c(),X.m(ne,null)):X&&(X.d(1),X=null)},i:le,o:le,d(K){K&&O(e),ie&&ie.d(),Y&&Y.d(),X&&X.d(),pe=!1,he(Se)}}}function Qe(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t}function Ln(t,e,l){let n,i,a,o,d,c,u,g,_,h;ye(t,St,E=>l(1,u=E)),ye(t,Ct,E=>l(2,g=E)),ye(t,yt,E=>l(3,_=E)),ye(t,kt,E=>l(27,h=E));const p=ct();let v={level:!0,service:!0,host:!0},m="";function b(E){l(4,v[E]=!v[E],v)}function y(E){l(4,v={level:E,service:E,host:E})}function k(E,J,V=!1){p("filter",{field:E,value:`${V?"NOT ":""}${E}:${J}`})}function M(E){return Math.min(100,E/(h||1)*100)}const j=()=>y(!0),L=()=>y(!1);function T(){m=this.value,l(0,m)}const R=()=>b("level"),F=E=>k("level",E.value),C=E=>k("level",E.value,!0),q=()=>b("service"),A=E=>k("service",E.value),z=E=>k("service",E.value,!0),N=()=>b("host"),S=E=>k("host",E.value),I=E=>k("host",E.value,!0);return t.$$.update=()=>{t.$$.dirty[0]&9&&l(10,n=_.filter(E=>!m||E.value.toLowerCase().includes(m.toLowerCase()))),t.$$.dirty[0]&5&&l(9,i=g.filter(E=>!m||E.value.toLowerCase().includes(m.toLowerCase()))),t.$$.dirty[0]&3&&l(8,a=u.filter(E=>!m||E.value.toLowerCase().includes(m.toLowerCase()))),t.$$.dirty[0]&8&&l(7,o=Math.max(..._.map(E=>E.count),1)),t.$$.dirty[0]&4&&l(6,d=Math.max(...g.map(E=>E.count),1)),t.$$.dirty[0]&2&&l(5,c=Math.max(...u.map(E=>E.count),1))},[m,u,g,_,v,c,d,o,a,i,n,b,y,k,M,j,L,T,R,F,C,q,A,z,N,S,I]}class Mn extends ze{constructor(e){super(),He(this,e,Ln,Sn,Ne,{},null,[-1,-1])}}function nl(t,e,l){const n=t.slice();return n[22]=e[l],n[24]=l,n}function sl(t,e,l){const n=t.slice();return n[25]=e[l][0],n[26]=e[l][1],n}function il(t,e,l){const n=t.slice();return n[29]=e[l],n}function ol(t,e,l){const n=t.slice();return n[29]=e[l],n}function al(t){let e,l,n,i,a,o,d,c,u=se(t[1]),g=[];for(let _=0;_<u.length;_+=1)g[_]=rl(ol(t,u,_));return{c(){e=f("div"),l=f("div"),n=f("span"),n.textContent="Show/Hide Columns",i=w(),a=f("button"),a.textContent="Reset",o=w();for(let _=0;_<g.length;_+=1)g[_].c();r(a,"class","reset-btn svelte-15lxg8o"),r(l,"class","column-menu-header svelte-15lxg8o"),r(e,"class","column-menu svelte-15lxg8o")},m(_,h){B(_,e,h),s(e,l),s(l,n),s(l,i),s(l,a),s(e,o);for(let p=0;p<g.length;p+=1)g[p]&&g[p].m(e,null);d||(c=P(a,"click",t[10]),d=!0)},p(_,h){if(h[0]&258){u=se(_[1]);let p;for(p=0;p<u.length;p+=1){const v=ol(_,u,p);g[p]?g[p].p(v,h):(g[p]=rl(v),g[p].c(),g[p].m(e,null))}for(;p<g.length;p+=1)g[p].d(1);g.length=u.length}},d(_){_&&O(e),qe(g,_),d=!1,c()}}}function rl(t){let e,l,n,i,a,o=t[29].label+"",d,c,u,g;function _(){return t[12](t[29])}return{c(){e=f("label"),l=f("input"),i=w(),a=f("span"),d=H(o),c=w(),r(l,"type","checkbox"),l.checked=n=t[29].visible,r(l,"class","svelte-15lxg8o"),r(e,"class","column-option svelte-15lxg8o")},m(h,p){B(h,e,p),s(e,l),s(e,i),s(e,a),s(a,d),s(e,c),u||(g=P(l,"change",_),u=!0)},p(h,p){t=h,p[0]&2&&n!==(n=t[29].visible)&&(l.checked=n),p[0]&2&&o!==(o=t[29].label+"")&&W(d,o)},d(h){h&&O(e),u=!1,g()}}}function qn(t){let e,l,n,i,a,o=[],d=new Map,c=se(t[2]),u=[];for(let h=0;h<c.length;h+=1)u[h]=ul(il(t,c,h));let g=se(t[0]);const _=h=>h[22].id||h[24];for(let h=0;h<g.length;h+=1){let p=nl(t,g,h),v=_(p);d.set(v,o[h]=bl(v,p))}return{c(){e=f("table"),l=f("thead"),n=f("tr");for(let h=0;h<u.length;h+=1)u[h].c();i=w(),a=f("tbody");for(let h=0;h<o.length;h+=1)o[h].c();r(l,"class","svelte-15lxg8o"),r(e,"class","log-table svelte-15lxg8o"),ce(e,"resizing",t[5]!==null)},m(h,p){B(h,e,p),s(e,l),s(l,n);for(let v=0;v<u.length;v+=1)u[v]&&u[v].m(n,null);s(e,i),s(e,a);for(let v=0;v<o.length;v+=1)o[v]&&o[v].m(a,null)},p(h,p){if(p[0]&516){c=se(h[2]);let v;for(v=0;v<c.length;v+=1){const m=il(h,c,v);u[v]?u[v].p(m,p):(u[v]=ul(m),u[v].c(),u[v].m(n,null))}for(;v<u.length;v+=1)u[v].d(1);u.length=c.length}p[0]&203&&(g=se(h[0]),o=rn(o,p,_,1,h,g,d,a,an,bl,null,nl)),p[0]&32&&ce(e,"resizing",h[5]!==null)},d(h){h&&O(e),qe(u,h);for(let p=0;p<o.length;p+=1)o[p].d()}}}function Rn(t){let e;return{c(){e=f("div"),e.innerHTML='<svg width="48" height="48" viewBox="0 0 48 48" class="svelte-15lxg8o"><path fill="currentColor" opacity="0.3" d="M24 4C12.954 4 4 12.954 4 24s8.954 20 20 20 20-8.954 20-20S35.046 4 24 4Zm0 36c-8.837 0-16-7.163-16-16S15.163 8 24 8s16 7.163 16 16-7.163 16-16 16Z"></path><path fill="currentColor" d="M24 14a2 2 0 0 1 2 2v8a2 2 0 0 1-4 0v-8a2 2 0 0 1 2-2Zm0 16a2 2 0 1 1 0 4 2 2 0 0 1 0-4Z"></path></svg> <p class="svelte-15lxg8o">No logs found</p> <span class="svelte-15lxg8o">Try adjusting your search or time range</span>',r(e,"class","empty-state svelte-15lxg8o")},m(l,n){B(l,e,n)},p:le,d(l){l&&O(e)}}}function cl(t){let e,l,n;function i(...a){return t[13](t[29],...a)}return{c(){e=f("div"),r(e,"class","resize-handle svelte-15lxg8o")},m(a,o){B(a,e,o),l||(n=P(e,"mousedown",i),l=!0)},p(a,o){t=a},d(a){a&&O(e),l=!1,n()}}}function ul(t){let e,l=t[29].label+"",n,i,a,o,d=t[29].id!=="message"&&cl(t);return{c(){e=f("th"),n=H(l),i=w(),d&&d.c(),a=w(),r(e,"style",o=t[29].width?`width: ${t[29].width}px`:""),r(e,"class","svelte-15lxg8o")},m(c,u){B(c,e,u),s(e,n),s(e,i),d&&d.m(e,null),s(e,a)},p(c,u){u[0]&4&&l!==(l=c[29].label+"")&&W(n,l),c[29].id!=="message"?d?d.p(c,u):(d=cl(c),d.c(),d.m(e,a)):d&&(d.d(1),d=null),u[0]&4&&o!==(o=c[29].width?`width: ${c[29].width}px`:"")&&r(e,"style",o)},d(c){c&&O(e),d&&d.d()}}}function fl(t){let e,l,n=Nt(t[22].timestamp)+"",i,a;return{c(){e=f("td"),l=f("span"),i=H(n),r(l,"class","timestamp svelte-15lxg8o"),r(l,"title",a=Ot(t[22].timestamp)),ee(e,"width",t[1].find(Ml).width+"px"),r(e,"class","svelte-15lxg8o")},m(o,d){B(o,e,d),s(e,l),s(l,i)},p(o,d){d[0]&1&&n!==(n=Nt(o[22].timestamp)+"")&&W(i,n),d[0]&1&&a!==(a=Ot(o[22].timestamp))&&r(l,"title",a),d[0]&2&&ee(e,"width",o[1].find(Ml).width+"px")},d(o){o&&O(e)}}}function dl(t){let e,l,n=t[22].level+"",i;return{c(){e=f("td"),l=f("span"),i=H(n),r(l,"class","level-badge svelte-15lxg8o"),ee(l,"background",je(t[22].level)+"20"),ee(l,"color",je(t[22].level)),ee(e,"width",t[1].find(ql).width+"px"),r(e,"class","svelte-15lxg8o")},m(a,o){B(a,e,o),s(e,l),s(l,i)},p(a,o){o[0]&1&&n!==(n=a[22].level+"")&&W(i,n),o[0]&1&&ee(l,"background",je(a[22].level)+"20"),o[0]&1&&ee(l,"color",je(a[22].level)),o[0]&2&&ee(e,"width",a[1].find(ql).width+"px")},d(a){a&&O(e)}}}function hl(t){let e,l,n=t[22].service+"",i;return{c(){e=f("td"),l=f("span"),i=H(n),r(l,"class","service svelte-15lxg8o"),ee(e,"width",t[1].find(Rl).width+"px"),r(e,"class","svelte-15lxg8o")},m(a,o){B(a,e,o),s(e,l),s(l,i)},p(a,o){o[0]&1&&n!==(n=a[22].service+"")&&W(i,n),o[0]&2&&ee(e,"width",a[1].find(Rl).width+"px")},d(a){a&&O(e)}}}function vl(t){let e,l,n=t[22].host+"",i;return{c(){e=f("td"),l=f("span"),i=H(n),r(l,"class","host svelte-15lxg8o"),ee(e,"width",t[1].find(Tl).width+"px"),r(e,"class","svelte-15lxg8o")},m(a,o){B(a,e,o),s(e,l),s(l,i)},p(a,o){o[0]&1&&n!==(n=a[22].host+"")&&W(i,n),o[0]&2&&ee(e,"width",a[1].find(Tl).width+"px")},d(a){a&&O(e)}}}function pl(t){let e,l,n=t[22].message+"",i;return{c(){e=f("td"),l=f("span"),i=H(n),r(l,"class","message svelte-15lxg8o"),r(e,"class","svelte-15lxg8o")},m(a,o){B(a,e,o),s(e,l),s(l,i)},p(a,o){o[0]&1&&n!==(n=a[22].message+"")&&W(i,n)},d(a){a&&O(e)}}}function _l(t){let e,l,n,i,a,o,d,c,u,g,_,h,p,v,m,b,y=t[22].timestamp+"",k,M,j,L,T,R,F=t[22].level+"",C,q,A,z,N,S,I=t[22].service+"",E,J,V,G,te,U,Q=t[22].host+"",D,ne,oe,ue,_e,ve,fe=t[22].message+"",Te,de,Le=t[22].meta&&Object.keys(t[22].meta).length>0,ge,Ce,pe,Se,ie,Y=t[22].raw+"",X,K,ae,et;function tt(){return t[15](t[22])}function lt(){return t[16](t[22])}let re=Le&&gl(t);return{c(){e=f("tr"),l=f("td"),n=f("div"),i=f("div"),a=f("h4"),a.textContent="Log Details",o=w(),d=f("div"),c=f("button"),c.textContent="Copy Raw",u=w(),g=f("button"),g.textContent="Copy JSON",_=w(),h=f("div"),p=f("div"),v=f("span"),v.textContent="timestamp",m=w(),b=f("span"),k=H(y),M=w(),j=f("div"),L=f("span"),L.textContent="level",T=w(),R=f("span"),C=H(F),q=w(),A=f("div"),z=f("span"),z.textContent="service",N=w(),S=f("span"),E=H(I),J=w(),V=f("div"),G=f("span"),G.textContent="host",te=w(),U=f("span"),D=H(Q),ne=w(),oe=f("div"),ue=f("span"),ue.textContent="message",_e=w(),ve=f("span"),Te=H(fe),de=w(),re&&re.c(),ge=w(),Ce=f("div"),pe=f("h5"),pe.textContent="Raw Log",Se=w(),ie=f("pre"),X=H(Y),K=w(),r(a,"class","svelte-15lxg8o"),r(c,"class","svelte-15lxg8o"),r(g,"class","svelte-15lxg8o"),r(d,"class","detail-actions svelte-15lxg8o"),r(i,"class","detail-header svelte-15lxg8o"),r(v,"class","field-name svelte-15lxg8o"),r(b,"class","field-value svelte-15lxg8o"),r(p,"class","detail-field svelte-15lxg8o"),r(L,"class","field-name svelte-15lxg8o"),r(R,"class","field-value svelte-15lxg8o"),r(j,"class","detail-field svelte-15lxg8o"),r(z,"class","field-name svelte-15lxg8o"),r(S,"class","field-value svelte-15lxg8o"),r(A,"class","detail-field svelte-15lxg8o"),r(G,"class","field-name svelte-15lxg8o"),r(U,"class","field-value svelte-15lxg8o"),r(V,"class","detail-field svelte-15lxg8o"),r(ue,"class","field-name svelte-15lxg8o"),r(ve,"class","field-value svelte-15lxg8o"),r(oe,"class","detail-field svelte-15lxg8o"),r(pe,"class","svelte-15lxg8o"),r(ie,"class","raw-log svelte-15lxg8o"),r(Ce,"class","detail-section svelte-15lxg8o"),r(h,"class","detail-fields svelte-15lxg8o"),r(n,"class","log-detail svelte-15lxg8o"),r(l,"colspan",t[6]),r(l,"class","svelte-15lxg8o"),r(e,"class","detail-row svelte-15lxg8o")},m(me,be){B(me,e,be),s(e,l),s(l,n),s(n,i),s(i,a),s(i,o),s(i,d),s(d,c),s(d,u),s(d,g),s(n,_),s(n,h),s(h,p),s(p,v),s(p,m),s(p,b),s(b,k),s(h,M),s(h,j),s(j,L),s(j,T),s(j,R),s(R,C),s(h,q),s(h,A),s(A,z),s(A,N),s(A,S),s(S,E),s(h,J),s(h,V),s(V,G),s(V,te),s(V,U),s(U,D),s(h,ne),s(h,oe),s(oe,ue),s(oe,_e),s(oe,ve),s(ve,Te),s(h,de),re&&re.m(h,null),s(h,ge),s(h,Ce),s(Ce,pe),s(Ce,Se),s(Ce,ie),s(ie,X),s(e,K),ae||(et=[P(c,"click",tt),P(g,"click",lt)],ae=!0)},p(me,be){t=me,be[0]&1&&y!==(y=t[22].timestamp+"")&&W(k,y),be[0]&1&&F!==(F=t[22].level+"")&&W(C,F),be[0]&1&&I!==(I=t[22].service+"")&&W(E,I),be[0]&1&&Q!==(Q=t[22].host+"")&&W(D,Q),be[0]&1&&fe!==(fe=t[22].message+"")&&W(Te,fe),be[0]&1&&(Le=t[22].meta&&Object.keys(t[22].meta).length>0),Le?re?re.p(t,be):(re=gl(t),re.c(),re.m(h,ge)):re&&(re.d(1),re=null),be[0]&1&&Y!==(Y=t[22].raw+"")&&W(X,Y),be[0]&64&&r(l,"colspan",t[6])},d(me){me&&O(e),re&&re.d(),ae=!1,he(et)}}}function gl(t){let e,l,n,i=se(Object.entries(t[22].meta)),a=[];for(let o=0;o<i.length;o+=1)a[o]=ml(sl(t,i,o));return{c(){e=f("div"),l=f("h5"),l.textContent="Meta Fields",n=w();for(let o=0;o<a.length;o+=1)a[o].c();r(l,"class","svelte-15lxg8o"),r(e,"class","detail-section svelte-15lxg8o")},m(o,d){B(o,e,d),s(e,l),s(e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,d){if(d[0]&1){i=se(Object.entries(o[22].meta));let c;for(c=0;c<i.length;c+=1){const u=sl(o,i,c);a[c]?a[c].p(u,d):(a[c]=ml(u),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=i.length}},d(o){o&&O(e),qe(a,o)}}}function ml(t){let e,l,n=t[25]+"",i,a,o,d=(typeof t[26]=="object"?JSON.stringify(t[26]):t[26])+"",c,u;return{c(){e=f("div"),l=f("span"),i=H(n),a=w(),o=f("span"),c=H(d),u=w(),r(l,"class","field-name svelte-15lxg8o"),r(o,"class","field-value svelte-15lxg8o"),r(e,"class","detail-field svelte-15lxg8o")},m(g,_){B(g,e,_),s(e,l),s(l,i),s(e,a),s(e,o),s(o,c),s(e,u)},p(g,_){_[0]&1&&n!==(n=g[25]+"")&&W(i,n),_[0]&1&&d!==(d=(typeof g[26]=="object"?JSON.stringify(g[26]):g[26])+"")&&W(c,d)},d(g){g&&O(e)}}}function bl(t,e){var R,F,C,q,A,z;let l,n=(R=e[1].find(Ll))==null?void 0:R.visible,i,a=(F=e[1].find(Sl))==null?void 0:F.visible,o,d=(C=e[1].find(Cl))==null?void 0:C.visible,c,u=(q=e[1].find(yl))==null?void 0:q.visible,g,_=(A=e[1].find(kl))==null?void 0:A.visible,h,p,v,m,b=n&&fl(e),y=a&&dl(e),k=d&&hl(e),M=u&&vl(e),j=_&&pl(e);function L(){return e[14](e[22])}let T=((z=e[3])==null?void 0:z.id)===e[22].id&&_l(e);return{key:t,first:null,c(){var N;l=f("tr"),b&&b.c(),i=w(),y&&y.c(),o=w(),k&&k.c(),c=w(),M&&M.c(),g=w(),j&&j.c(),h=w(),T&&T.c(),p=gt(),r(l,"class","log-row svelte-15lxg8o"),ce(l,"selected",((N=e[3])==null?void 0:N.id)===e[22].id),this.first=l},m(N,S){B(N,l,S),b&&b.m(l,null),s(l,i),y&&y.m(l,null),s(l,o),k&&k.m(l,null),s(l,c),M&&M.m(l,null),s(l,g),j&&j.m(l,null),B(N,h,S),T&&T.m(N,S),B(N,p,S),v||(m=P(l,"click",L),v=!0)},p(N,S){var I,E,J,V,G,te,U;e=N,S[0]&2&&(n=(I=e[1].find(Ll))==null?void 0:I.visible),n?b?b.p(e,S):(b=fl(e),b.c(),b.m(l,i)):b&&(b.d(1),b=null),S[0]&2&&(a=(E=e[1].find(Sl))==null?void 0:E.visible),a?y?y.p(e,S):(y=dl(e),y.c(),y.m(l,o)):y&&(y.d(1),y=null),S[0]&2&&(d=(J=e[1].find(Cl))==null?void 0:J.visible),d?k?k.p(e,S):(k=hl(e),k.c(),k.m(l,c)):k&&(k.d(1),k=null),S[0]&2&&(u=(V=e[1].find(yl))==null?void 0:V.visible),u?M?M.p(e,S):(M=vl(e),M.c(),M.m(l,g)):M&&(M.d(1),M=null),S[0]&2&&(_=(G=e[1].find(kl))==null?void 0:G.visible),_?j?j.p(e,S):(j=pl(e),j.c(),j.m(l,null)):j&&(j.d(1),j=null),S[0]&9&&ce(l,"selected",((te=e[3])==null?void 0:te.id)===e[22].id),((U=e[3])==null?void 0:U.id)===e[22].id?T?T.p(e,S):(T=_l(e),T.c(),T.m(p.parentNode,p)):T&&(T.d(1),T=null)},d(N){N&&(O(l),O(h),O(p)),b&&b.d(),y&&y.d(),k&&k.d(),M&&M.d(),j&&j.d(),T&&T.d(N),v=!1,m()}}}function Tn(t){let e,l,n,i,a,o,d,c=t[0].length+"",u,g,_,h,p,v=t[4]&&al(t);function m(k,M){return k[0].length===0?Rn:qn}let b=m(t),y=b(t);return{c(){e=f("div"),l=f("div"),n=f("div"),i=f("button"),i.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M1 2h12v2H1V2Zm0 4h12v2H1V6Zm0 4h8v2H1v-2Z"></path></svg>
        Columns`,a=w(),v&&v.c(),o=w(),d=f("span"),u=H(c),g=H(" logs"),_=w(),y.c(),r(i,"class","toolbar-btn svelte-15lxg8o"),r(i,"title","Configure columns"),r(n,"class","column-menu-container svelte-15lxg8o"),r(d,"class","toolbar-info svelte-15lxg8o"),r(l,"class","table-toolbar svelte-15lxg8o"),r(e,"class","log-table-container svelte-15lxg8o")},m(k,M){B(k,e,M),s(e,l),s(l,n),s(n,i),s(n,a),v&&v.m(n,null),s(l,o),s(l,d),s(d,u),s(d,g),s(e,_),y.m(e,null),h||(p=P(i,"click",t[11]),h=!0)},p(k,M){k[4]?v?v.p(k,M):(v=al(k),v.c(),v.m(n,null)):v&&(v.d(1),v=null),M[0]&1&&c!==(c=k[0].length+"")&&W(u,c),b===(b=m(k))&&y?y.p(k,M):(y.d(1),y=b(k),y&&(y.c(),y.m(e,null)))},i:le,o:le,d(k){k&&O(e),v&&v.d(),y.d(),h=!1,p()}}}function wl(t){navigator.clipboard.writeText(t)}const kl=t=>t.id==="message",yl=t=>t.id==="host",Cl=t=>t.id==="service",Sl=t=>t.id==="level",Ll=t=>t.id==="time",Ml=t=>t.id==="time",ql=t=>t.id==="level",Rl=t=>t.id==="service",Tl=t=>t.id==="host";function En(t,e,l){let n,i,{logs:a=[]}=e,o=null,d=!1,c=[{id:"time",label:"Time",visible:!0,width:90,minWidth:60},{id:"level",label:"Level",visible:!0,width:100,minWidth:60},{id:"service",label:"Service",visible:!0,width:150,minWidth:80},{id:"host",label:"Host",visible:!1,width:120,minWidth:80},{id:"message",label:"Message",visible:!0,width:null,minWidth:200}],u=null,g=0,_=0;Xe(()=>{const C=localStorage.getItem("purl_column_config");if(C)try{const q=JSON.parse(C);l(1,c=c.map(A=>({...A,...q.find(z=>z.id===A.id)})))}catch{}});function h(){localStorage.setItem("purl_column_config",JSON.stringify(c.map(C=>({id:C.id,visible:C.visible,width:C.width}))))}function p(C){l(3,o=(o==null?void 0:o.id)===C.id?null:C)}function v(C){const q=c.find(A=>A.id===C);q&&(q.visible=!q.visible,l(1,c),h())}function m(C,q){C.preventDefault();const A=c.find(z=>z.id===q);!A||A.id==="message"||(l(5,u=q),g=C.clientX,_=A.width,document.addEventListener("mousemove",b),document.addEventListener("mouseup",y))}function b(C){if(!u)return;const q=c.find(z=>z.id===u);if(!q)return;const A=C.clientX-g;q.width=Math.max(q.minWidth,_+A),l(1,c)}function y(){u&&h(),l(5,u=null),document.removeEventListener("mousemove",b),document.removeEventListener("mouseup",y)}function k(){l(1,c=[{id:"time",label:"Time",visible:!0,width:90,minWidth:60},{id:"level",label:"Level",visible:!0,width:100,minWidth:60},{id:"service",label:"Service",visible:!0,width:150,minWidth:80},{id:"host",label:"Host",visible:!1,width:120,minWidth:80},{id:"message",label:"Message",visible:!0,width:null,minWidth:200}]),h()}const M=()=>l(4,d=!d),j=C=>v(C.id),L=(C,q)=>m(q,C.id),T=C=>p(C),R=C=>wl(C.raw),F=C=>wl(JSON.stringify(C,null,2));return t.$$set=C=>{"logs"in C&&l(0,a=C.logs)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(2,n=c.filter(C=>C.visible)),t.$$.dirty[0]&4&&l(6,i=n.length)},[a,c,n,o,d,u,i,p,v,m,k,M,j,L,T,R,F]}class Nn extends ze{constructor(e){super(),He(this,e,En,Tn,Ne,{logs:0},null,[-1,-1])}}function On(t){let e,l,n,i,a,o=t[1].reduce(El,0).toLocaleString()+"",d,c,u,g;return{c(){e=f("div"),l=f("div"),n=f("span"),n.textContent="Log volume over time",i=w(),a=f("span"),d=H(o),c=H(" logs"),u=w(),g=f("canvas"),r(n,"class","histogram-title svelte-tezh23"),r(a,"class","histogram-count svelte-tezh23"),r(l,"class","histogram-header svelte-tezh23"),r(g,"class","svelte-tezh23"),r(e,"class","histogram-container svelte-tezh23")},m(_,h){B(_,e,h),s(e,l),s(l,n),s(l,i),s(l,a),s(a,d),s(a,c),s(e,u),s(e,g),t[3](g),t[4](e)},p(_,[h]){h&2&&o!==(o=_[1].reduce(El,0).toLocaleString()+"")&&W(d,o)},i:le,o:le,d(_){_&&O(e),t[3](null),t[4](null)}}}const El=(t,e)=>t+e.count;function An(t,e,l){let n;ye(t,Ul,u=>l(1,n=u));let i,a;function o(){const u=i.getContext("2d"),_=a.getBoundingClientRect().width,h=80;if(l(0,i.width=_*window.devicePixelRatio,i),l(0,i.height=h*window.devicePixelRatio,i),l(0,i.style.width=_+"px",i),l(0,i.style.height=h+"px",i),u.scale(window.devicePixelRatio,window.devicePixelRatio),u.clearRect(0,0,_,h),n.length===0)return;const p=n,v=Math.max(...p.map(y=>y.count),1),m=Math.max(2,(_-20)/p.length-1),b=10;p.forEach((y,k)=>{const M=b+k*(m+1),j=y.count/v*(h-20),L=h-j-10,T=y.count/v,R=T>.7?"#f85149":T>.4?"#d29922":"#3fb950";u.fillStyle=R,u.fillRect(M,L,m,j)}),u.strokeStyle="#30363d",u.lineWidth=1,u.beginPath(),u.moveTo(b,h-10),u.lineTo(_-b,h-10),u.stroke()}Xe(()=>{const u=new ResizeObserver(()=>{n.length>0&&o()});return u.observe(a),()=>u.disconnect()});function d(u){We[u?"unshift":"push"](()=>{i=u,l(0,i)})}function c(u){We[u?"unshift":"push"](()=>{a=u,l(2,a)})}return t.$$.update=()=>{t.$$.dirty&3&&n.length>0&&i&&o()},[i,n,a,d,c]}class Bn extends ze{constructor(e){super(),He(this,e,An,On,Ne,{})}}function Nl(t,e,l){const n=t.slice();return n[22]=e[l],n}function jn(t){let e,l=se(t[0]),n=[];for(let i=0;i<l.length;i+=1)n[i]=Ol(Nl(t,l,i));return{c(){e=f("ul");for(let i=0;i<n.length;i+=1)n[i].c();r(e,"class","svelte-1octqfx")},m(i,a){B(i,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,a){if(a&193){l=se(i[0]);let o;for(o=0;o<l.length;o+=1){const d=Nl(i,l,o);n[o]?n[o].p(d,a):(n[o]=Ol(d),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&O(e),qe(n,i)}}}function Hn(t){let e;return{c(){e=f("p"),e.textContent="No saved searches",r(e,"class","empty svelte-1octqfx")},m(l,n){B(l,e,n)},p:le,d(l){l&&O(e)}}}function Ol(t){let e,l,n,i=t[22].name+"",a,o,d,c=t[22].query+"",u,g,_,h,p,v;function m(){return t[12](t[22])}function b(){return t[13](t[22])}return{c(){e=f("li"),l=f("button"),n=f("span"),a=H(i),o=w(),d=f("span"),u=H(c),g=w(),_=f("button"),_.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M9.5 3L3 9.5M3 3l6.5 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',h=w(),r(n,"class","name svelte-1octqfx"),r(d,"class","query svelte-1octqfx"),r(l,"class","search-item svelte-1octqfx"),r(_,"class","btn-delete svelte-1octqfx"),r(e,"class","svelte-1octqfx")},m(y,k){B(y,e,k),s(e,l),s(l,n),s(n,a),s(l,o),s(l,d),s(d,u),s(e,g),s(e,_),s(e,h),p||(v=[P(l,"click",m),P(_,"click",Me(b))],p=!0)},p(y,k){t=y,k&1&&i!==(i=t[22].name+"")&&W(a,i),k&1&&c!==(c=t[22].query+"")&&W(u,c)},d(y){y&&O(e),p=!1,he(v)}}}function Al(t){let e,l,n,i,a,o,d,c,u,g,_,h,p,v,m,b,y,k,M,j,L,T,R,F,C,q,A;return{c(){e=f("div"),l=f("div"),n=f("h3"),n.textContent="Save Search",i=w(),a=f("label"),o=H(`Name
        `),d=f("input"),c=w(),u=f("label"),g=H(`Query
        `),_=f("input"),h=w(),p=f("label"),v=H(`Time Range
        `),m=f("select"),b=f("option"),b.textContent="5 minutes",y=f("option"),y.textContent="15 minutes",k=f("option"),k.textContent="1 hour",M=f("option"),M.textContent="24 hours",j=f("option"),j.textContent="7 days",L=w(),T=f("div"),R=f("button"),R.textContent="Cancel",F=w(),C=f("button"),C.textContent="Save",r(n,"class","svelte-1octqfx"),r(d,"type","text"),r(d,"placeholder","Error logs"),r(d,"class","svelte-1octqfx"),r(a,"class","svelte-1octqfx"),r(_,"type","text"),r(_,"placeholder","level:ERROR"),r(_,"class","svelte-1octqfx"),r(u,"class","svelte-1octqfx"),b.__value="5m",$(b,b.__value),y.__value="15m",$(y,y.__value),k.__value="1h",$(k,k.__value),M.__value="24h",$(M,M.__value),j.__value="7d",$(j,j.__value),r(m,"class","svelte-1octqfx"),t[4]===void 0&&xe(()=>t[16].call(m)),r(p,"class","svelte-1octqfx"),r(R,"class","btn svelte-1octqfx"),r(C,"class","btn primary svelte-1octqfx"),r(T,"class","actions svelte-1octqfx"),r(l,"class","modal svelte-1octqfx"),r(l,"role","document"),r(e,"class","modal-overlay svelte-1octqfx"),r(e,"role","dialog"),r(e,"aria-modal","true")},m(z,N){B(z,e,N),s(e,l),s(l,n),s(l,i),s(l,a),s(a,o),s(a,d),$(d,t[2]),s(l,c),s(l,u),s(u,g),s(u,_),$(_,t[3]),s(l,h),s(l,p),s(p,v),s(p,m),s(m,b),s(m,y),s(m,k),s(m,M),s(m,j),at(m,t[4],!0),s(l,L),s(l,T),s(T,R),s(T,F),s(T,C),q||(A=[P(d,"input",t[14]),P(_,"input",t[15]),P(m,"change",t[16]),P(R,"click",t[17]),P(C,"click",t[5]),P(l,"click",Me(t[9])),P(l,"keydown",Me(t[10])),P(e,"click",t[18]),P(e,"keydown",t[19])],q=!0)},p(z,N){N&4&&d.value!==z[2]&&$(d,z[2]),N&8&&_.value!==z[3]&&$(_,z[3]),N&16&&at(m,z[4])},d(z){z&&O(e),q=!1,he(A)}}}function zn(t){let e,l,n,i,a,o,d,c,u,g;function _(m,b){return m[0].length===0?Hn:jn}let h=_(t),p=h(t),v=t[1]&&Al(t);return{c(){e=f("div"),l=f("div"),n=f("h3"),n.textContent="Saved Searches",i=w(),a=f("button"),a.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 1v12M1 7h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>',o=w(),p.c(),d=w(),v&&v.c(),c=gt(),r(n,"class","svelte-1octqfx"),r(a,"class","btn-icon svelte-1octqfx"),r(a,"title","Save current search"),r(l,"class","header svelte-1octqfx"),r(e,"class","saved-searches svelte-1octqfx")},m(m,b){B(m,e,b),s(e,l),s(l,n),s(l,i),s(l,a),s(e,o),p.m(e,null),B(m,d,b),v&&v.m(m,b),B(m,c,b),u||(g=P(a,"click",t[11]),u=!0)},p(m,[b]){h===(h=_(m))&&p?p.p(m,b):(p.d(1),p=h(m),p&&(p.c(),p.m(e,null))),m[1]?v?v.p(m,b):(v=Al(m),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i:le,o:le,d(m){m&&(O(e),O(d),O(c)),p.d(),v&&v.d(m),u=!1,g()}}}const ht="/api";function Pn(t,e,l){const n=ct();let i=[],a=!1,o="",d="",c="15m";Xe(u);async function u(){try{const q=await(await fetch(`${ht}/saved-searches`)).json();l(0,i=q.searches||[])}catch(C){console.error("Failed to load saved searches:",C)}}async function g(){if(!(!o||!d))try{await fetch(`${ht}/saved-searches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,query:d,time_range:c})}),l(1,a=!1),l(2,o=""),l(3,d=""),await u()}catch(C){console.error("Failed to save search:",C)}}async function _(C){try{await fetch(`${ht}/saved-searches/${C}`,{method:"DELETE"}),await u()}catch(q){console.error("Failed to delete search:",q)}}function h(C){n("apply",{query:C.query,timeRange:C.time_range})}function p(C,q){l(3,d=C),l(4,c=q),l(1,a=!0)}function v(C){rt.call(this,t,C)}function m(C){rt.call(this,t,C)}const b=()=>l(1,a=!0),y=C=>h(C),k=C=>_(C.id);function M(){o=this.value,l(2,o)}function j(){d=this.value,l(3,d)}function L(){c=Il(this),l(4,c)}return[i,a,o,d,c,g,_,h,p,v,m,b,y,k,M,j,L,()=>l(1,a=!1),()=>l(1,a=!1),C=>C.key==="Escape"&&l(1,a=!1)]}class Fn extends ze{constructor(e){super(),He(this,e,Pn,zn,Ne,{openSaveModal:8})}get openSaveModal(){return this.$$.ctx[8]}}function Bl(t,e,l){const n=t.slice();return n[26]=e[l],n}function Wn(t){let e,l=se(t[0]),n=[];for(let i=0;i<l.length;i+=1)n[i]=jl(Bl(t,l,i));return{c(){e=f("ul");for(let i=0;i<n.length;i+=1)n[i].c();r(e,"class","svelte-ib4i4r")},m(i,a){B(i,e,a);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(i,a){if(a&209){l=se(i[0]);let o;for(o=0;o<l.length;o+=1){const d=Bl(i,l,o);n[o]?n[o].p(d,a):(n[o]=jl(d),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(i){i&&O(e),qe(n,i)}}}function Zn(t){let e,l,n,i,a;return{c(){e=f("p"),e.textContent="No alerts configured",l=w(),n=f("button"),n.textContent="Enable notifications",r(e,"class","empty svelte-ib4i4r"),r(n,"class","btn-small svelte-ib4i4r")},m(o,d){B(o,e,d),B(o,l,d),B(o,n,d),i||(a=P(n,"click",Vn),i=!0)},p:le,d(o){o&&(O(e),O(l),O(n)),i=!1,a()}}}function In(t){let e,l;return{c(){e=x("svg"),l=x("circle"),r(l,"cx","7"),r(l,"cy","7"),r(l,"r","5"),r(l,"fill","none"),r(l,"stroke","#6e7681"),r(l,"stroke-width","1.5"),r(e,"width","14"),r(e,"height","14"),r(e,"viewBox","0 0 14 14")},m(n,i){B(n,e,i),s(e,l)},d(n){n&&O(e)}}}function Dn(t){let e,l;return{c(){e=x("svg"),l=x("circle"),r(l,"cx","7"),r(l,"cy","7"),r(l,"r","5"),r(l,"fill","#3fb950"),r(e,"width","14"),r(e,"height","14"),r(e,"viewBox","0 0 14 14")},m(n,i){B(n,e,i),s(e,l)},d(n){n&&O(e)}}}function jl(t){let e,l,n,i=t[26].name+"",a,o,d,c=(t[26].query||"All logs")+"",u,g,_=t[26].threshold+"",h,p,v=t[26].window_minutes+"",m,b,y,k,M,j,L,T,R,F;function C(){return t[11](t[26])}function q(I,E){return I[26].enabled?Dn:In}let A=q(t),z=A(t);function N(){return t[12](t[26])}function S(){return t[13](t[26])}return{c(){e=f("li"),l=f("button"),n=f("span"),a=H(i),o=w(),d=f("span"),u=H(c),g=H(" >= "),h=H(_),p=H(" in "),m=H(v),b=H("m"),y=w(),k=f("button"),z.c(),j=w(),L=f("button"),L.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M9.5 3L3 9.5M3 3l6.5 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',T=w(),r(n,"class","name svelte-ib4i4r"),r(d,"class","details svelte-ib4i4r"),r(l,"class","alert-info svelte-ib4i4r"),r(k,"class","btn-toggle svelte-ib4i4r"),r(k,"title",M=t[26].enabled?"Disable":"Enable"),r(L,"class","btn-delete svelte-ib4i4r"),r(e,"class","svelte-ib4i4r"),ce(e,"disabled",!t[26].enabled)},m(I,E){B(I,e,E),s(e,l),s(l,n),s(n,a),s(l,o),s(l,d),s(d,u),s(d,g),s(d,h),s(d,p),s(d,m),s(d,b),s(e,y),s(e,k),z.m(k,null),s(e,j),s(e,L),s(e,T),R||(F=[P(l,"click",C),P(k,"click",Me(N)),P(L,"click",Me(S))],R=!0)},p(I,E){t=I,E&1&&i!==(i=t[26].name+"")&&W(a,i),E&1&&c!==(c=(t[26].query||"All logs")+"")&&W(u,c),E&1&&_!==(_=t[26].threshold+"")&&W(h,_),E&1&&v!==(v=t[26].window_minutes+"")&&W(m,v),A!==(A=q(t))&&(z.d(1),z=A(t),z&&(z.c(),z.m(k,null))),E&1&&M!==(M=t[26].enabled?"Disable":"Enable")&&r(k,"title",M),E&1&&ce(e,"disabled",!t[26].enabled)},d(I){I&&O(e),z.d(),R=!1,he(F)}}}function Hl(t){let e,l,n,i=t[2]?"Edit Alert":"Create Alert",a,o,d,c,u,g,_,h,p,v,m,b,y,k,M,j,L,T,R,F,C,q,A,z,N,S,I,E,J,V,G,te,U,Q=t[3].notify_type!=="browser"&&zl(t);return{c(){e=f("div"),l=f("div"),n=f("h3"),a=H(i),o=w(),d=f("label"),c=H(`Name
        `),u=f("input"),g=w(),_=f("label"),h=H(`Query (optional)
        `),p=f("input"),v=w(),m=f("div"),b=f("label"),y=H(`Threshold
          `),k=f("input"),M=w(),j=f("label"),L=H(`Window (minutes)
          `),T=f("input"),R=w(),F=f("label"),C=H(`Notification Type
        `),q=f("select"),A=f("option"),A.textContent="Browser",z=f("option"),z.textContent="Webhook",N=f("option"),N.textContent="Slack",S=w(),Q&&Q.c(),I=w(),E=f("div"),J=f("button"),J.textContent="Cancel",V=w(),G=f("button"),G.textContent="Save",r(n,"class","svelte-ib4i4r"),r(u,"type","text"),r(u,"placeholder","High error rate"),r(u,"class","svelte-ib4i4r"),r(d,"class","svelte-ib4i4r"),r(p,"type","text"),r(p,"placeholder","level:ERROR"),r(p,"class","svelte-ib4i4r"),r(_,"class","svelte-ib4i4r"),r(k,"type","number"),r(k,"min","1"),r(k,"class","svelte-ib4i4r"),r(b,"class","svelte-ib4i4r"),r(T,"type","number"),r(T,"min","1"),r(T,"class","svelte-ib4i4r"),r(j,"class","svelte-ib4i4r"),r(m,"class","row svelte-ib4i4r"),A.__value="browser",$(A,A.__value),z.__value="webhook",$(z,z.__value),N.__value="slack",$(N,N.__value),r(q,"class","svelte-ib4i4r"),t[3].notify_type===void 0&&xe(()=>t[18].call(q)),r(F,"class","svelte-ib4i4r"),r(J,"class","btn svelte-ib4i4r"),r(G,"class","btn primary svelte-ib4i4r"),r(E,"class","actions svelte-ib4i4r"),r(l,"class","modal svelte-ib4i4r"),r(l,"role","document"),r(e,"class","modal-overlay svelte-ib4i4r"),r(e,"role","dialog"),r(e,"aria-modal","true")},m(D,ne){B(D,e,ne),s(e,l),s(l,n),s(n,a),s(l,o),s(l,d),s(d,c),s(d,u),$(u,t[3].name),s(l,g),s(l,_),s(_,h),s(_,p),$(p,t[3].query),s(l,v),s(l,m),s(m,b),s(b,y),s(b,k),$(k,t[3].threshold),s(m,M),s(m,j),s(j,L),s(j,T),$(T,t[3].window_minutes),s(l,R),s(l,F),s(F,C),s(F,q),s(q,A),s(q,z),s(q,N),at(q,t[3].notify_type,!0),s(l,S),Q&&Q.m(l,null),s(l,I),s(l,E),s(E,J),s(E,V),s(E,G),te||(U=[P(u,"input",t[14]),P(p,"input",t[15]),P(k,"input",t[16]),P(T,"input",t[17]),P(q,"change",t[18]),P(J,"click",t[20]),P(G,"click",t[5]),P(l,"click",Me(t[8])),P(l,"keydown",Me(t[9])),P(e,"click",t[21]),P(e,"keydown",t[22])],te=!0)},p(D,ne){ne&4&&i!==(i=D[2]?"Edit Alert":"Create Alert")&&W(a,i),ne&8&&u.value!==D[3].name&&$(u,D[3].name),ne&8&&p.value!==D[3].query&&$(p,D[3].query),ne&8&&ot(k.value)!==D[3].threshold&&$(k,D[3].threshold),ne&8&&ot(T.value)!==D[3].window_minutes&&$(T,D[3].window_minutes),ne&8&&at(q,D[3].notify_type),D[3].notify_type!=="browser"?Q?Q.p(D,ne):(Q=zl(D),Q.c(),Q.m(l,I)):Q&&(Q.d(1),Q=null)},d(D){D&&O(e),Q&&Q.d(),te=!1,he(U)}}}function zl(t){let e,l=t[3].notify_type==="slack"?"Slack Webhook URL":"Webhook URL",n,i,a,o,d;return{c(){e=f("label"),n=H(l),i=w(),a=f("input"),r(a,"type","url"),r(a,"placeholder","https://..."),r(a,"class","svelte-ib4i4r"),r(e,"class","svelte-ib4i4r")},m(c,u){B(c,e,u),s(e,n),s(e,i),s(e,a),$(a,t[3].notify_target),o||(d=P(a,"input",t[19]),o=!0)},p(c,u){u&8&&l!==(l=c[3].notify_type==="slack"?"Slack Webhook URL":"Webhook URL")&&W(n,l),u&8&&a.value!==c[3].notify_target&&$(a,c[3].notify_target)},d(c){c&&O(e),o=!1,d()}}}function Un(t){let e,l,n,i,a,o,d,c,u,g;function _(m,b){return m[0].length===0?Zn:Wn}let h=_(t),p=h(t),v=t[1]&&Hl(t);return{c(){e=f("div"),l=f("div"),n=f("h3"),n.textContent="Alerts",i=w(),a=f("button"),a.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 1v12M1 7h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>',o=w(),p.c(),d=w(),v&&v.c(),c=gt(),r(n,"class","svelte-ib4i4r"),r(a,"class","btn-icon svelte-ib4i4r"),r(a,"title","Create alert"),r(l,"class","header svelte-ib4i4r"),r(e,"class","alerts-panel svelte-ib4i4r")},m(m,b){B(m,e,b),s(e,l),s(l,n),s(l,i),s(l,a),s(e,o),p.m(e,null),B(m,d,b),v&&v.m(m,b),B(m,c,b),u||(g=P(a,"click",t[10]),u=!0)},p(m,[b]){h===(h=_(m))&&p?p.p(m,b):(p.d(1),p=h(m),p&&(p.c(),p.m(e,null))),m[1]?v?v.p(m,b):(v=Hl(m),v.c(),v.m(c.parentNode,c)):v&&(v.d(1),v=null)},i:le,o:le,d(m){m&&(O(e),O(d),O(c)),p.d(),v&&v.d(m),u=!1,g()}}}const De="/api";function Jn(t){"Notification"in window&&Notification.permission==="granted"&&new Notification(`Alert: ${t.name}`,{body:`${t.count} logs matched "${t.query}"`,icon:"/favicon.ico"})}function Vn(){"Notification"in window&&Notification.requestPermission()}function Qn(t,e,l){let n=[],i=!1,a=null,o={name:"",query:"",threshold:10,window_minutes:5,notify_type:"webhook",notify_target:""},d;Xe(()=>{c(),d=setInterval(u,6e4)}),xl(()=>{d&&clearInterval(d)});async function c(){try{const S=await(await fetch(`${De}/alerts`)).json();l(0,n=S.alerts||[])}catch(N){console.error("Failed to load alerts:",N)}}async function u(){try{const S=await(await fetch(`${De}/alerts/check`,{method:"POST"})).json();if(S.triggered&&S.triggered.length>0){for(const I of S.triggered)Jn(I);await c()}}catch(N){console.error("Alert check failed:",N)}}function g(N=null){N?(l(2,a=N),l(3,o={name:N.name,query:N.query,threshold:N.threshold,window_minutes:N.window_minutes,notify_type:N.notify_type,notify_target:N.notify_target})):(l(2,a=null),l(3,o={name:"",query:"",threshold:10,window_minutes:5,notify_type:"webhook",notify_target:""})),l(1,i=!0)}async function _(){if(o.name)try{a?await fetch(`${De}/alerts/${a.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}):await fetch(`${De}/alerts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l(1,i=!1),await c()}catch(N){console.error("Failed to save alert:",N)}}async function h(N){try{await fetch(`${De}/alerts/${N.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:N.enabled?0:1})}),await c()}catch(S){console.error("Failed to toggle alert:",S)}}async function p(N){if(confirm("Delete this alert?"))try{await fetch(`${De}/alerts/${N}`,{method:"DELETE"}),await c()}catch(S){console.error("Failed to delete alert:",S)}}function v(N){rt.call(this,t,N)}function m(N){rt.call(this,t,N)}const b=()=>g(),y=N=>g(N),k=N=>h(N),M=N=>p(N.id);function j(){o.name=this.value,l(3,o)}function L(){o.query=this.value,l(3,o)}function T(){o.threshold=ot(this.value),l(3,o)}function R(){o.window_minutes=ot(this.value),l(3,o)}function F(){o.notify_type=Il(this),l(3,o)}function C(){o.notify_target=this.value,l(3,o)}return[n,i,a,o,g,_,h,p,v,m,b,y,k,M,j,L,T,R,F,C,()=>l(1,i=!1),()=>l(1,i=!1),N=>N.key==="Escape"&&l(1,i=!1)]}class Xn extends ze{constructor(e){super(),He(this,e,Qn,Un,Ne,{})}}function Gn(t){let e;return{c(){e=H("Live Tail")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function Kn(t){let e,l;return{c(){e=f("span"),l=H(" Live"),r(e,"class","live-dot svelte-1q7u1ne")},m(n,i){B(n,e,i),B(n,l,i)},d(n){n&&(O(e),O(l))}}}function Yn(t){let e;return{c(){e=H("Refresh")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function $n(t){let e;return{c(){e=f("span"),r(e,"class","spinner svelte-1q7u1ne")},m(l,n){B(l,e,n)},d(l){l&&O(e)}}}function Pl(t){let e,l,n,i,a,o;return{c(){e=f("span"),e.textContent="|",l=w(),n=f("span"),i=H("Query: "),a=f("code"),o=H(t[4]),r(e,"class","separator svelte-1q7u1ne"),r(a,"class","svelte-1q7u1ne")},m(d,c){B(d,e,c),B(d,l,c),B(d,n,c),s(n,i),s(n,a),s(a,o)},p(d,c){c&16&&W(o,d[4])},d(d){d&&(O(e),O(l),O(n))}}}function xn(t){let e,l,n,i,a,o,d,c,u,g,_,h,p,v,m,b,y,k,M,j,L,T,R,F,C,q,A,z,N,S,I,E=t[6].toLocaleString()+"",J,V,G,te,U,Q,D,ne,oe,ue,_e,ve,fe,Te,de,Le,ge,Ce,pe,Se,ie,Y,X,K,ae;function et(Z){t[15](Z)}let tt={};t[4]!==void 0&&(tt.value=t[4]),a=new wn({props:tt}),We.push(()=>cn(a,"value",et)),a.$on("search",t[8]),u=new Cn({props:{value:t[3]}}),u.$on("change",t[9]);function lt(Z,ke){return Z[0]?Kn:Gn}let re=lt(t),me=re(t);function be(Z,ke){return Z[5]?$n:Yn}let nt=be(t),Oe=nt(t),we=t[4]&&Pl(t);fe=new Mn({}),fe.$on("filter",t[10]);let Jl={};return de=new Fn({props:Jl}),t[16](de),de.$on("apply",t[11]),ge=new Xn({}),Se=new Bn({}),Y=new Nn({props:{logs:t[2]}}),{c(){e=f("main"),l=f("header"),n=f("div"),n.innerHTML='<svg width="32" height="32" viewBox="0 0 32 32"><circle cx="16" cy="16" r="14" fill="none" stroke="currentColor" stroke-width="2"></circle><path d="M10 12 L22 12 M10 16 L22 16 M10 20 L18 20" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg> <span>Purl</span>',i=w(),Fe(a.$$.fragment),d=w(),c=f("div"),Fe(u.$$.fragment),g=w(),_=f("button"),me.c(),p=w(),v=f("button"),v.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" class="svelte-1q7u1ne"><path fill="currentColor" d="M11 1H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2ZM7 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3-6H4V2h6v2Z"></path></svg>',m=w(),b=f("div"),y=f("button"),k=x("svg"),M=x("path"),j=H(`
          Export`),T=w(),R=f("div"),F=f("button"),F.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1q7u1ne"><path fill="currentColor" d="M2 1h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Zm1 3h6v1H3V4Zm0 2h6v1H3V6Zm0 2h4v1H3V8Z"></path></svg>
            Export as CSV`,C=w(),q=f("button"),q.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1q7u1ne"><path fill="currentColor" d="M3 2a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1 1 1 0 0 1 1 1v2a1 1 0 0 0 1 1M9 2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1 1 1 0 0 0-1 1v2a1 1 0 0 1-1 1"></path></svg>
            Export as JSON`,A=w(),z=f("button"),Oe.c(),N=w(),S=f("div"),I=f("span"),J=H(E),V=H(" logs"),G=w(),te=f("span"),te.textContent="|",U=w(),Q=f("span"),D=H("Time range: "),ne=H(t[3]),oe=w(),we&&we.c(),ue=w(),_e=f("div"),ve=f("aside"),Fe(fe.$$.fragment),Te=w(),Fe(de.$$.fragment),Le=w(),Fe(ge.$$.fragment),Ce=w(),pe=f("div"),Fe(Se.$$.fragment),ie=w(),Fe(Y.$$.fragment),r(n,"class","logo svelte-1q7u1ne"),r(_,"class","btn svelte-1q7u1ne"),r(_,"title",h=t[0]?"Stop live tail":"Start live tail"),ce(_,"active",t[0]),r(v,"class","btn svelte-1q7u1ne"),r(v,"title","Save current search"),r(M,"d","M7 1v8M3 5l4 4 4-4M2 11v1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1"),r(M,"stroke","currentColor"),r(M,"stroke-width","1.5"),r(M,"fill","none"),r(M,"stroke-linecap","round"),r(M,"stroke-linejoin","round"),r(k,"width","14"),r(k,"height","14"),r(k,"viewBox","0 0 14 14"),r(k,"class","svelte-1q7u1ne"),r(y,"class","btn svelte-1q7u1ne"),r(y,"title","Export logs"),y.disabled=L=t[2].length===0,r(F,"class","svelte-1q7u1ne"),r(q,"class","svelte-1q7u1ne"),r(R,"class","export-menu svelte-1q7u1ne"),r(b,"class","export-dropdown svelte-1q7u1ne"),r(z,"class","btn svelte-1q7u1ne"),z.disabled=t[5],r(c,"class","header-actions svelte-1q7u1ne"),r(l,"class","svelte-1q7u1ne"),r(te,"class","separator svelte-1q7u1ne"),r(S,"class","stats-bar svelte-1q7u1ne"),r(ve,"class","sidebar svelte-1q7u1ne"),r(pe,"class","main-content svelte-1q7u1ne"),r(_e,"class","container svelte-1q7u1ne"),r(e,"class","svelte-1q7u1ne")},m(Z,ke){B(Z,e,ke),s(e,l),s(l,n),s(l,i),Ae(a,l,null),s(l,d),s(l,c),Ae(u,c,null),s(c,g),s(c,_),me.m(_,null),s(c,p),s(c,v),s(c,m),s(c,b),s(b,y),s(y,k),s(k,M),s(y,j),s(b,T),s(b,R),s(R,F),s(R,C),s(R,q),s(c,A),s(c,z),Oe.m(z,null),s(e,N),s(e,S),s(S,I),s(I,J),s(I,V),s(S,G),s(S,te),s(S,U),s(S,Q),s(Q,D),s(Q,ne),s(S,oe),we&&we.m(S,null),s(e,ue),s(e,_e),s(_e,ve),Ae(fe,ve,null),s(ve,Te),Ae(de,ve,null),s(ve,Le),Ae(ge,ve,null),s(_e,Ce),s(_e,pe),Ae(Se,pe,null),s(pe,ie),Ae(Y,pe,null),X=!0,K||(ae=[P(_,"click",t[7]),P(v,"click",t[12]),P(F,"click",t[13]),P(q,"click",t[14]),P(z,"click",t[8])],K=!0)},p(Z,[ke]){const Mt={};!o&&ke&16&&(o=!0,Mt.value=Z[4],ln(()=>o=!1)),a.$set(Mt);const qt={};ke&8&&(qt.value=Z[3]),u.$set(qt),re!==(re=lt(Z))&&(me.d(1),me=re(Z),me&&(me.c(),me.m(_,null))),(!X||ke&1&&h!==(h=Z[0]?"Stop live tail":"Start live tail"))&&r(_,"title",h),(!X||ke&1)&&ce(_,"active",Z[0]),(!X||ke&4&&L!==(L=Z[2].length===0))&&(y.disabled=L),nt!==(nt=be(Z))&&(Oe.d(1),Oe=nt(Z),Oe&&(Oe.c(),Oe.m(z,null))),(!X||ke&32)&&(z.disabled=Z[5]),(!X||ke&64)&&E!==(E=Z[6].toLocaleString()+"")&&W(J,E),(!X||ke&8)&&W(ne,Z[3]),Z[4]?we?we.p(Z,ke):(we=Pl(Z),we.c(),we.m(S,null)):we&&(we.d(1),we=null);const Vl={};de.$set(Vl);const Rt={};ke&4&&(Rt.logs=Z[2]),Y.$set(Rt)},i(Z){X||(Ee(a.$$.fragment,Z),Ee(u.$$.fragment,Z),Ee(fe.$$.fragment,Z),Ee(de.$$.fragment,Z),Ee(ge.$$.fragment,Z),Ee(Se.$$.fragment,Z),Ee(Y.$$.fragment,Z),X=!0)},o(Z){Pe(a.$$.fragment,Z),Pe(u.$$.fragment,Z),Pe(fe.$$.fragment,Z),Pe(de.$$.fragment,Z),Pe(ge.$$.fragment,Z),Pe(Se.$$.fragment,Z),Pe(Y.$$.fragment,Z),X=!1},d(Z){Z&&O(e),Be(a),Be(u),me.d(),Oe.d(),we&&we.d(),Be(fe),t[16](null),Be(de),Be(ge),Be(Se),Be(Y),K=!1,he(ae)}}}function Fl(t,e){const l=URL.createObjectURL(t),n=document.createElement("a");n.href=l,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}function es(t,e,l){let n,i,a,o,d;ye(t,wt,L=>l(2,n=L)),ye(t,Ve,L=>l(3,i=L)),ye(t,Ke,L=>l(4,a=L)),ye(t,_t,L=>l(5,o=L)),ye(t,kt,L=>l(6,d=L));let c,u=!1,g;Xe(async()=>{await Ge()});function _(){l(0,u=!u),u?c=hn():c&&(c.close(),c=null)}function h(){Ge()}function p(L){st(Ve,i=L.detail,i),Ge()}function v(L){const{value:T}=L.detail;st(Ke,a=T,a),Ge()}function m(L){const{query:T,timeRange:R}=L.detail;st(Ke,a=T,a),st(Ve,i=R,i),Ge()}function b(){g==null||g.openSaveModal(a,i)}function y(){if(n.length===0)return;const L=["timestamp","level","service","host","message"],T=[L.join(",")];for(const F of n){const C=L.map(q=>{const A=F[q]||"",z=String(A).replace(/"/g,'""');return/[,\n"]/.test(z)?`"${z}"`:z});T.push(C.join(","))}const R=new Blob([T.join(`
`)],{type:"text/csv;charset=utf-8;"});Fl(R,`purl-logs-${Date.now()}.csv`)}function k(){if(n.length===0)return;const L=n.map(R=>({timestamp:R.timestamp,level:R.level,service:R.service,host:R.host,message:R.message,meta:R.meta||{}})),T=new Blob([JSON.stringify(L,null,2)],{type:"application/json"});Fl(T,`purl-logs-${Date.now()}.json`)}function M(L){a=L,Ke.set(a)}function j(L){We[L?"unshift":"push"](()=>{g=L,l(1,g)})}return[u,g,n,i,a,o,d,_,h,p,v,m,b,y,k,M,j]}class ts extends ze{constructor(e){super(),He(this,e,es,xn,Ne,{})}}new ts({target:document.getElementById("app")});
