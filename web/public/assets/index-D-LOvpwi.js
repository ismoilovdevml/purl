var Zi=Object.defineProperty;var Di=(t,e,l)=>e in t?Zi(t,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):t[e]=l;var Pl=(t,e,l)=>Di(t,typeof e!="symbol"?e+"":e,l);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const o of c.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function l(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(a){if(a.ep)return;a.ep=!0;const c=l(a);fetch(a.href,c)}})();function le(){}function qi(t){return t()}function Gs(){return Object.create(null)}function Me(t){t.forEach(qi)}function ji(t){return typeof t=="function"}function ut(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function Fi(t){return Object.keys(t).length===0}function Wi(t,...e){if(t==null){for(const n of e)n(void 0);return le}const l=t.subscribe(...e);return l.unsubscribe?()=>l.unsubscribe():l}function Ye(t,e,l){t.$$.on_destroy.push(Wi(e,l))}function Al(t,e,l){return t.set(l),e}function s(t,e){t.appendChild(e)}function N(t,e,l){t.insertBefore(e,l||null)}function O(t){t.parentNode&&t.parentNode.removeChild(t)}function Je(t,e){for(let l=0;l<t.length;l+=1)t[l]&&t[l].d(e)}function r(t){return document.createElement(t)}function $(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function E(t){return document.createTextNode(t)}function g(){return E(" ")}function jl(){return E("")}function V(t,e,l,n){return t.addEventListener(e,l,n),()=>t.removeEventListener(e,l,n)}function Kl(t){return function(e){return e.preventDefault(),t.call(this,e)}}function je(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function i(t,e,l){l==null?t.removeAttribute(e):t.getAttribute(e)!==l&&t.setAttribute(e,l)}function Nl(t){return t===""?null:+t}function Ui(t){return Array.from(t.childNodes)}function Z(t,e){e=""+e,t.data!==e&&(t.data=e)}function se(t,e){t.value=e??""}function te(t,e,l,n){l==null?t.style.removeProperty(e):t.style.setProperty(e,l,"")}function pt(t,e,l){for(let n=0;n<t.options.length;n+=1){const a=t.options[n];if(a.__value===e){a.selected=!0;return}}(!l||e!==void 0)&&(t.selectedIndex=-1)}function Hl(t){const e=t.querySelector(":checked");return e&&e.__value}function ne(t,e,l){t.classList.toggle(e,!!l)}function Ji(t,e,{bubbles:l=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:l,cancelable:n})}let Rl;function zl(t){Rl=t}function Xl(){if(!Rl)throw new Error("Function called outside component initialization");return Rl}function Zt(t){Xl().$$.on_mount.push(t)}function Ii(t){Xl().$$.on_destroy.push(t)}function Bl(){const t=Xl();return(e,l,{cancelable:n=!1}={})=>{const a=t.$$.callbacks[e];if(a){const c=Ji(e,l,{cancelable:n});return a.slice().forEach(o=>{o.call(t,c)}),!c.defaultPrevented}return!0}}function ql(t,e){const l=t.$$.callbacks[e.type];l&&l.slice().forEach(n=>n.call(this,e))}const _l=[],nl=[];let gl=[];const Wl=[],Ki=Promise.resolve();let Ul=!1;function Xi(){Ul||(Ul=!0,Ki.then(Pi))}function Vt(t){gl.push(t)}function Qi(t){Wl.push(t)}const Vl=new Set;let vl=0;function Pi(){if(vl!==0)return;const t=Rl;do{try{for(;vl<_l.length;){const e=_l[vl];vl++,zl(e),Gi(e.$$)}}catch(e){throw _l.length=0,vl=0,e}for(zl(null),_l.length=0,vl=0;nl.length;)nl.pop()();for(let e=0;e<gl.length;e+=1){const l=gl[e];Vl.has(l)||(Vl.add(l),l())}gl.length=0}while(_l.length);for(;Wl.length;)Wl.pop()();Ul=!1,Vl.clear(),zl(t)}function Gi(t){if(t.fragment!==null){t.update(),Me(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(Vt)}}function Yi(t){const e=[],l=[];gl.forEach(n=>t.indexOf(n)===-1?e.push(n):l.push(n)),l.forEach(n=>n()),gl=e}const Ol=new Set;let ll;function Ys(){ll={r:0,c:[],p:ll}}function $s(){ll.r||Me(ll.c),ll=ll.p}function De(t,e){t&&t.i&&(Ol.delete(t),t.i(e))}function st(t,e,l,n){if(t&&t.o){if(Ol.has(t))return;Ol.add(t),ll.c.push(()=>{Ol.delete(t),n&&(l&&t.d(1),n())}),t.o(e)}else n&&n()}function ie(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function $i(t,e){t.d(1),e.delete(t.key)}function xi(t,e,l,n,a,c,o,u,f,d,_,m){let v=t.length,p=c.length,h=v;const k={};for(;h--;)k[t[h].key]=h;const w=[],S=new Map,b=new Map,T=[];for(h=p;h--;){const R=m(a,c,h),P=l(R);let A=o.get(P);A?T.push(()=>A.p(R,e)):(A=d(P,R),A.c()),S.set(P,w[h]=A),P in k&&b.set(P,Math.abs(h-k[P]))}const z=new Set,q=new Set;function L(R){De(R,1),R.m(u,_),o.set(R.key,R),_=R.first,p--}for(;v&&p;){const R=w[p-1],P=t[v-1],A=R.key,j=P.key;R===P?(_=R.first,v--,p--):S.has(j)?!o.has(A)||z.has(A)?L(R):q.has(j)?v--:b.get(A)>b.get(j)?(q.add(A),L(R)):(z.add(j),v--):(f(P,o),v--)}for(;v--;){const R=t[v];S.has(R.key)||f(R,o)}for(;p;)L(w[p-1]);return Me(T),w}function ea(t,e,l){const n=t.$$.props[e];n!==void 0&&(t.$$.bound[n]=l,l(t.$$.ctx[n]))}function Rt(t){t&&t.c()}function _t(t,e,l){const{fragment:n,after_update:a}=t.$$;n&&n.m(e,l),Vt(()=>{const c=t.$$.on_mount.map(qi).filter(ji);t.$$.on_destroy?t.$$.on_destroy.push(...c):Me(c),t.$$.on_mount=[]}),a.forEach(Vt)}function gt(t,e){const l=t.$$;l.fragment!==null&&(Yi(l.after_update),Me(l.on_destroy),l.fragment&&l.fragment.d(e),l.on_destroy=l.fragment=null,l.ctx=[])}function ta(t,e){t.$$.dirty[0]===-1&&(_l.push(t),Xi(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function mt(t,e,l,n,a,c,o=null,u=[-1]){const f=Rl;zl(t);const d=t.$$={fragment:null,ctx:[],props:c,update:le,not_equal:a,bound:Gs(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(f?f.$$.context:[])),callbacks:Gs(),dirty:u,skip_bound:!1,root:e.target||f.$$.root};o&&o(d.root);let _=!1;if(d.ctx=l?l(t,e.props||{},(m,v,...p)=>{const h=p.length?p[0]:v;return d.ctx&&a(d.ctx[m],d.ctx[m]=h)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](h),_&&ta(t,m)),v}):[],d.update(),_=!0,Me(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=Ui(e.target);d.fragment&&d.fragment.l(m),m.forEach(O)}else d.fragment&&d.fragment.c();e.intro&&De(t.$$.fragment),_t(t,e.target,e.anchor),Pi()}zl(f)}class bt{constructor(){Pl(this,"$$");Pl(this,"$$set")}$destroy(){gt(this,1),this.$destroy=le}$on(e,l){if(!ji(l))return le;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(l),()=>{const a=n.indexOf(l);a!==-1&&n.splice(a,1)}}$set(e){this.$$set&&!Fi(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const la="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(la);const hl=[];function dt(t,e=le){let l;const n=new Set;function a(u){if(ut(t,u)&&(t=u,l)){const f=!hl.length;for(const d of n)d[1](),hl.push(d,t);if(f){for(let d=0;d<hl.length;d+=2)hl[d][0](hl[d+1]);hl.length=0}}}function c(u){a(u(t))}function o(u,f=le){const d=[u,f];return n.add(d),n.size===1&&(l=e(a,c)||le),u(t),()=>{n.delete(d),n.size===0&&l&&(l(),l=null)}}return{set:a,update:c,subscribe:o}}const Ql=dt([]),Jl=dt(!1),xs=dt(null),Tl=dt(""),sl=dt("15m"),Gl=dt(0),Yl=dt([]),$l=dt([]),xl=dt([]),Vi=dt([]),sa=dt(null),Il="/api";let Zl=null;async function Ll(){Zl&&(Zl.cancelled=!0);const t={cancelled:!1};Zl=t,Jl.set(!0),xs.set(null);try{let e,l;Tl.subscribe(o=>e=o)(),sl.subscribe(o=>l=o)();const n=new URLSearchParams({range:l,limit:500});e&&n.set("q",e);const a=await fetch(`${Il}/logs?${n}`);if(t.cancelled)return;const c=await a.json();Ql.set(c.hits||[]),Gl.set(c.total||0),Promise.all([Dl("level"),Dl("service"),Dl("host"),na(),ia()]).catch(console.error)}catch(e){t.cancelled||(xs.set(e.message),console.error("Search error:",e))}finally{t.cancelled||Jl.set(!1)}}async function Dl(t){try{let e;sl.subscribe(c=>e=c)();const l=new URLSearchParams({range:e,limit:10}),a=await(await fetch(`${Il}/stats/fields/${t}?${l}`)).json();t==="level"&&Yl.set(a.values||[]),t==="service"&&$l.set(a.values||[]),t==="host"&&xl.set(a.values||[])}catch(e){console.error(`Failed to fetch ${t} stats:`,e)}}async function na(){try{let t;sl.subscribe(c=>t=c)();let e="1 minute";(t==="24h"||t==="7d")&&(e="1 hour"),t==="30d"&&(e="1 day");const l=new URLSearchParams({range:t,interval:e}),a=await(await fetch(`${Il}/stats/histogram?${l}`)).json();Vi.set(a.buckets||[])}catch(t){console.error("Failed to fetch histogram:",t)}}async function ia(){try{const e=await(await fetch(`${Il}/metrics/json`)).json();sa.set(e)}catch(t){console.error("Failed to fetch metrics:",t)}}function aa(){const t=window.location.protocol==="https:"?"wss:":"ws:",e=new WebSocket(`${t}//${window.location.host}/api/logs/stream`);return e.onopen=()=>{console.log("WebSocket connected")},e.onmessage=l=>{try{const n=JSON.parse(l.data);n.type==="log"&&Ql.update(a=>[n.data,...a.slice(0,499)])}catch(n){console.error("WebSocket message error:",n)}},e.onerror=l=>{console.error("WebSocket error:",l)},e.onclose=()=>{console.log("WebSocket disconnected")},e}function en(t){return t?new Date(t).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}function tn(t){return t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function at(t){return{EMERGENCY:"#f85149",ALERT:"#f85149",CRITICAL:"#f85149",ERROR:"#f85149",WARNING:"#d29922",NOTICE:"#58a6ff",INFO:"#3fb950",DEBUG:"#8b949e",TRACE:"#6e7681"}[t]||"#8b949e"}function ln(t,e,l){const n=t.slice();return n[27]=e[l],n}function sn(t,e,l){const n=t.slice();return n[30]=e[l],n[32]=l,n}function nn(t){let e,l,n;return{c(){e=r("button"),e.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 5.586 3.707 2.293a1 1 0 0 0-1.414 1.414L5.586 7 2.293 10.293a1 1 0 1 0 1.414 1.414L7 8.414l3.293 3.293a1 1 0 0 0 1.414-1.414L8.414 7l3.293-3.293a1 1 0 0 0-1.414-1.414L7 5.586Z"></path></svg>',i(e,"class","clear-btn svelte-a8z0vj"),i(e,"title","Clear search")},m(a,c){N(a,e,c),l||(n=V(e,"click",t[14]),l=!0)},p:le,d(a){a&&O(e),l=!1,n()}}}function an(t){let e,l=ie(t[2]),n=[];for(let a=0;a<l.length;a+=1)n[a]=rn(sn(t,l,a));return{c(){e=r("div");for(let a=0;a<n.length;a+=1)n[a].c();i(e,"class","suggestions svelte-a8z0vj")},m(a,c){N(a,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(a,c){if(c[0]&2060){l=ie(a[2]);let o;for(o=0;o<l.length;o+=1){const u=sn(a,l,o);n[o]?n[o].p(u,c):(n[o]=rn(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(a){a&&O(e),Je(n,a)}}}function oa(t){let e,l;return{c(){e=$("svg"),l=$("circle"),i(l,"cx","6"),i(l,"cy","6"),i(l,"r","4"),i(l,"fill","currentColor"),i(e,"width","12"),i(e,"height","12"),i(e,"viewBox","0 0 12 12")},m(n,a){N(n,e,a),s(e,l)},d(n){n&&O(e)}}}function ca(t){let e,l;return{c(){e=$("svg"),l=$("path"),i(l,"fill","currentColor"),i(l,"d","M6 1v10M1 6h10"),i(l,"stroke","currentColor"),i(l,"stroke-width","1.5"),i(e,"width","12"),i(e,"height","12"),i(e,"viewBox","0 0 12 12")},m(n,a){N(n,e,a),s(e,l)},d(n){n&&O(e)}}}function ra(t){let e,l;return{c(){e=$("svg"),l=$("path"),i(l,"fill","currentColor"),i(l,"d","M2 3h8v1H2V3zm0 2.5h8v1H2v-1zm0 2.5h5v1H2V8z"),i(e,"width","12"),i(e,"height","12"),i(e,"viewBox","0 0 12 12")},m(n,a){N(n,e,a),s(e,l)},d(n){n&&O(e)}}}function on(t){let e,l=t[30].hint+"",n;return{c(){e=r("span"),n=E(l),i(e,"class","suggestion-hint svelte-a8z0vj")},m(a,c){N(a,e,c),s(e,n)},p(a,c){c[0]&4&&l!==(l=a[30].hint+"")&&Z(n,l)},d(a){a&&O(e)}}}function cn(t){let e,l=t[30].field+"",n;return{c(){e=r("span"),n=E(l),i(e,"class","suggestion-field svelte-a8z0vj")},m(a,c){N(a,e,c),s(e,n)},p(a,c){c[0]&4&&l!==(l=a[30].field+"")&&Z(n,l)},d(a){a&&O(e)}}}function rn(t){let e,l,n,a,c=t[30].display+"",o,u,f,d,_,m;function v(b,T){return b[30].type==="field"?ra:b[30].type==="operator"?ca:oa}let p=v(t),h=p(t),k=t[30].hint&&on(t),w=t[30].field&&cn(t);function S(){return t[17](t[30])}return{c(){e=r("button"),l=r("span"),h.c(),n=g(),a=r("span"),o=E(c),u=g(),k&&k.c(),f=g(),w&&w.c(),d=g(),i(l,"class","suggestion-icon svelte-a8z0vj"),i(a,"class","suggestion-text svelte-a8z0vj"),i(e,"class","suggestion-item svelte-a8z0vj"),ne(e,"selected",t[32]===t[3])},m(b,T){N(b,e,T),s(e,l),h.m(l,null),s(e,n),s(e,a),s(a,o),s(e,u),k&&k.m(e,null),s(e,f),w&&w.m(e,null),s(e,d),_||(m=V(e,"mousedown",Kl(S)),_=!0)},p(b,T){t=b,p!==(p=v(t))&&(h.d(1),h=p(t),h&&(h.c(),h.m(l,null))),T[0]&4&&c!==(c=t[30].display+"")&&Z(o,c),t[30].hint?k?k.p(t,T):(k=on(t),k.c(),k.m(e,f)):k&&(k.d(1),k=null),t[30].field?w?w.p(t,T):(w=cn(t),w.c(),w.m(e,d)):w&&(w.d(1),w=null),T[0]&8&&ne(e,"selected",t[32]===t[3])},d(b){b&&O(e),h.d(),k&&k.d(),w&&w.d(),_=!1,m()}}}function fn(t){let e,l,n,a,c,o,u,f,d=ie(t[5]),_=[];for(let m=0;m<d.length;m+=1)_[m]=un(ln(t,d,m));return{c(){e=r("div"),l=r("div"),n=r("span"),n.textContent="Recent searches",a=g(),c=r("button"),c.textContent="Clear",o=g();for(let m=0;m<_.length;m+=1)_[m].c();i(c,"class","history-clear svelte-a8z0vj"),i(l,"class","history-header svelte-a8z0vj"),i(e,"class","suggestions history svelte-a8z0vj")},m(m,v){N(m,e,v),s(e,l),s(l,n),s(l,a),s(l,c),s(e,o);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(e,null);u||(f=V(c,"mousedown",Kl(t[13])),u=!0)},p(m,v){if(v[0]&4128){d=ie(m[5]);let p;for(p=0;p<d.length;p+=1){const h=ln(m,d,p);_[p]?_[p].p(h,v):(_[p]=un(h),_[p].c(),_[p].m(e,null))}for(;p<_.length;p+=1)_[p].d(1);_.length=d.length}},d(m){m&&O(e),Je(_,m),u=!1,f()}}}function un(t){let e,l,n,a,c=t[27]+"",o,u,f,d;function _(){return t[18](t[27])}return{c(){e=r("button"),l=r("span"),l.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M6 1a5 5 0 1 0 5 5 5 5 0 0 0-5-5zm0 9a4 4 0 1 1 4-4 4 4 0 0 1-4 4zm.5-4V3.5a.5.5 0 0 0-1 0v3a.5.5 0 0 0 .15.35l2 2a.5.5 0 0 0 .7-.7L6.5 6z"></path></svg>',n=g(),a=r("span"),o=E(c),u=g(),i(l,"class","suggestion-icon svelte-a8z0vj"),i(a,"class","suggestion-text history-query svelte-a8z0vj"),i(e,"class","suggestion-item svelte-a8z0vj")},m(m,v){N(m,e,v),s(e,l),s(e,n),s(e,a),s(a,o),s(e,u),f||(d=V(e,"mousedown",Kl(_)),f=!0)},p(m,v){t=m,v[0]&32&&c!==(c=t[27]+"")&&Z(o,c)},d(m){m&&O(e),f=!1,d()}}}function fa(t){let e,l,n,a,c,o,u,f,d,_,m=t[0]&&nn(t),v=t[1]&&t[2].length>0&&an(t),p=t[6]&&t[5].length>0&&fn(t);return{c(){e=r("div"),l=$("svg"),n=$("path"),a=g(),c=r("input"),o=g(),m&&m.c(),u=g(),v&&v.c(),f=g(),p&&p.c(),i(n,"fill","currentColor"),i(n,"d","M11.5 7a4.5 4.5 0 1 1-9 0 4.5 4.5 0 0 1 9 0Zm-.82 4.74a6 6 0 1 1 1.06-1.06l3.04 3.04a.75.75 0 1 1-1.06 1.06l-3.04-3.04Z"),i(l,"class","search-icon svelte-a8z0vj"),i(l,"width","16"),i(l,"height","16"),i(l,"viewBox","0 0 16 16"),i(c,"type","text"),i(c,"placeholder","Search logs... level:ERROR AND service:api*"),i(c,"autocomplete","off"),i(c,"class","svelte-a8z0vj"),i(e,"class","search-bar svelte-a8z0vj")},m(h,k){N(h,e,k),s(e,l),s(l,n),s(e,a),s(e,c),t[15](c),se(c,t[0]),s(e,o),m&&m.m(e,null),s(e,u),v&&v.m(e,null),s(e,f),p&&p.m(e,null),d||(_=[V(c,"input",t[16]),V(c,"keydown",t[7]),V(c,"input",t[8]),V(c,"focus",t[9]),V(c,"blur",t[10])],d=!0)},p(h,k){k[0]&1&&c.value!==h[0]&&se(c,h[0]),h[0]?m?m.p(h,k):(m=nn(h),m.c(),m.m(e,u)):m&&(m.d(1),m=null),h[1]&&h[2].length>0?v?v.p(h,k):(v=an(h),v.c(),v.m(e,f)):v&&(v.d(1),v=null),h[6]&&h[5].length>0?p?p.p(h,k):(p=fn(h),p.c(),p.m(e,null)):p&&(p.d(1),p=null)},i:le,o:le,d(h){h&&O(e),t[15](null),m&&m.d(),v&&v.d(),p&&p.d(),d=!1,Me(_)}}}const ua=10;function da(t,e,l){let n,a,c;Ye(t,xl,y=>l(19,n=y)),Ye(t,$l,y=>l(20,a=y)),Ye(t,Yl,y=>l(21,c=y));let{value:o=""}=e;const u=Bl();let f=!1,d=[],_=-1,m,v=[],p=!1;const h=["AND","OR","NOT"],k=["level","service","host","message","timestamp"];Zt(()=>{const y=localStorage.getItem("purl_search_history");y&&l(5,v=JSON.parse(y))});function w(y){y.trim()&&(l(5,v=[y,...v.filter(I=>I!==y)].slice(0,ua)),localStorage.setItem("purl_search_history",JSON.stringify(v)))}function S(y){if(f&&d.length>0){if(y.key==="ArrowDown")y.preventDefault(),l(3,_=Math.min(_+1,d.length-1));else if(y.key==="ArrowUp")y.preventDefault(),l(3,_=Math.max(_-1,-1));else if(y.key==="Enter"&&_>=0){y.preventDefault(),L(d[_]);return}else if(y.key==="Escape"){l(1,f=!1),l(6,p=!1);return}}y.key==="Enter"&&(l(1,f=!1),l(6,p=!1),w(o),u("search"))}function b(){l(3,_=-1),q()}function T(){!o&&v.length>0?l(6,p=!0):q()}function z(){setTimeout(()=>{l(1,f=!1),l(6,p=!1)},200)}function q(){l(6,p=!1);const y=(m==null?void 0:m.selectionStart)||o.length,H=o.substring(0,y).split(/\s+/),U=H[H.length-1]||"";if(!U){l(1,f=!1);return}if(l(2,d=[]),U.includes(":")){const[G,K]=U.split(":"),F=G.toLowerCase();let Q=[];F==="level"?Q=c.map(D=>D.value):F==="service"?Q=a.map(D=>D.value):F==="host"&&(Q=n.map(D=>D.value));const J=(K||"").toLowerCase();l(2,d=Q.filter(D=>D.toLowerCase().includes(J)).slice(0,8).map(D=>({type:"value",text:`${G}:${D}`,display:D,field:G})))}else{const G=U.toLowerCase(),K=k.filter(Q=>Q.toLowerCase().startsWith(G)).map(Q=>({type:"field",text:`${Q}:`,display:Q,hint:"field"})),F=H.length>1?h.filter(Q=>Q.toLowerCase().startsWith(G)).map(Q=>({type:"operator",text:Q,display:Q,hint:"operator"})):[];l(2,d=[...K,...F].slice(0,8))}l(1,f=d.length>0)}function L(y){const I=(m==null?void 0:m.selectionStart)||o.length,H=o.substring(0,I),U=o.substring(I),G=H.lastIndexOf(" "),K=H.substring(0,G+1);l(0,o=K+y.text+(y.type==="field"?"":" ")+U.trimStart()),l(1,f=!1),l(3,_=-1),setTimeout(()=>m==null?void 0:m.focus(),0)}function R(y){l(0,o=y),l(6,p=!1),u("search")}function P(){l(5,v=[]),localStorage.removeItem("purl_search_history"),l(6,p=!1)}function A(){l(0,o=""),u("search")}function j(y){nl[y?"unshift":"push"](()=>{m=y,l(4,m)})}function C(){o=this.value,l(0,o)}const B=y=>L(y),M=y=>R(y);return t.$$set=y=>{"value"in y&&l(0,o=y.value)},[o,f,d,_,m,v,p,S,b,T,z,L,R,P,A,j,C,B,M]}class va extends bt{constructor(e){super(),mt(this,e,da,fa,ut,{value:0},null,[-1,-1])}}function dn(t,e,l){const n=t.slice();return n[9]=e[l],n}function vn(t){let e,l=ie(t[3]),n=[];for(let a=0;a<l.length;a+=1)n[a]=hn(dn(t,l,a));return{c(){e=r("div");for(let a=0;a<n.length;a+=1)n[a].c();i(e,"class","dropdown svelte-19hb89a")},m(a,c){N(a,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(a,c){if(c&25){l=ie(a[3]);let o;for(o=0;o<l.length;o+=1){const u=dn(a,l,o);n[o]?n[o].p(u,c):(n[o]=hn(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(a){a&&O(e),Je(n,a)}}}function hn(t){let e,l,n;function a(){return t[7](t[9])}return{c(){e=r("button"),e.textContent=`${t[9].label} `,i(e,"class","dropdown-item svelte-19hb89a"),ne(e,"active",t[0]===t[9].value)},m(c,o){N(c,e,o),l||(n=V(e,"click",a),l=!0)},p(c,o){t=c,o&9&&ne(e,"active",t[0]===t[9].value)},d(c){c&&O(e),l=!1,n()}}}function ha(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h=t[1]&&vn(t);return{c(){e=r("div"),l=r("button"),n=$("svg"),a=$("path"),c=g(),o=r("span"),u=E(t[2]),f=g(),d=$("svg"),_=$("path"),m=g(),h&&h.c(),i(a,"fill","currentColor"),i(a,"d","M8 0a8 8 0 1 1 0 16A8 8 0 0 1 8 0Zm0 1.5a6.5 6.5 0 1 0 0 13 6.5 6.5 0 0 0 0-13ZM8 3a.75.75 0 0 1 .75.75v3.69l2.28 2.28a.75.75 0 0 1-1.06 1.06L7.22 8.03A.75.75 0 0 1 7 7.5v-3.75A.75.75 0 0 1 8 3Z"),i(n,"width","16"),i(n,"height","16"),i(n,"viewBox","0 0 16 16"),i(_,"fill","currentColor"),i(_,"d","M6 8.825a.5.5 0 0 1-.354-.146l-4-4a.5.5 0 0 1 .708-.708L6 7.617l3.646-3.646a.5.5 0 0 1 .708.708l-4 4A.5.5 0 0 1 6 8.825Z"),i(d,"class","chevron svelte-19hb89a"),i(d,"width","12"),i(d,"height","12"),i(d,"viewBox","0 0 12 12"),i(l,"class","picker-btn svelte-19hb89a"),i(e,"class","time-picker svelte-19hb89a")},m(k,w){N(k,e,w),s(e,l),s(l,n),s(n,a),s(l,c),s(l,o),s(o,u),s(l,f),s(l,d),s(d,_),s(e,m),h&&h.m(e,null),v||(p=[V(window,"click",t[6]),V(l,"click",je(t[5]))],v=!0)},p(k,[w]){w&4&&Z(u,k[2]),k[1]?h?h.p(k,w):(h=vn(k),h.c(),h.m(e,null)):h&&(h.d(1),h=null)},i:le,o:le,d(k){k&&O(e),h&&h.d(),v=!1,Me(p)}}}function pa(t,e,l){let n,{value:a="15m"}=e;const c=Bl(),o=[{value:"5m",label:"Last 5 minutes"},{value:"15m",label:"Last 15 minutes"},{value:"30m",label:"Last 30 minutes"},{value:"1h",label:"Last 1 hour"},{value:"4h",label:"Last 4 hours"},{value:"12h",label:"Last 12 hours"},{value:"24h",label:"Last 24 hours"},{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"}];let u=!1;function f(v){l(0,a=v),l(1,u=!1),c("change",v)}function d(){l(1,u=!u)}function _(v){v.target.closest(".time-picker")||l(1,u=!1)}const m=v=>f(v.value);return t.$$set=v=>{"value"in v&&l(0,a=v.value)},t.$$.update=()=>{var v;t.$$.dirty&1&&l(2,n=((v=o.find(p=>p.value===a))==null?void 0:v.label)||a)},[a,u,n,o,f,d,_,m]}class _a extends bt{constructor(e){super(),mt(this,e,pa,ha,ut,{value:0})}}function pn(t,e,l){const n=t.slice();return n[29]=e[l],n}function _n(t,e,l){const n=t.slice();return n[29]=e[l],n}function gn(t,e,l){const n=t.slice();return n[29]=e[l],n}function mn(t){let e,l,n=ie(t[10]),a=[];for(let o=0;o<n.length;o+=1)a[o]=bn(gn(t,n,o));let c=t[10].length===0&&kn();return{c(){e=r("div");for(let o=0;o<a.length;o+=1)a[o].c();l=g(),c&&c.c(),i(e,"class","field-values svelte-4ctbet")},m(o,u){N(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);s(e,l),c&&c.m(e,null)},p(o,u){if(u[0]&25728){n=ie(o[10]);let f;for(f=0;f<n.length;f+=1){const d=gn(o,n,f);a[f]?a[f].p(d,u):(a[f]=bn(d),a[f].c(),a[f].m(e,l))}for(;f<a.length;f+=1)a[f].d(1);a.length=n.length}o[10].length===0?c||(c=kn(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(o){o&&O(e),Je(a,o),c&&c.d()}}}function bn(t){let e,l,n,a,c,o=t[29].value+"",u,f,d,_,m,v,p=ml(t[29].count)+"",h,k,w,S=t[14](t[29].count).toFixed(0)+"",b,T,z,q,L,R;function P(){return t[19](t[29])}function A(){return t[20](t[29])}return{c(){e=r("div"),l=r("button"),n=r("span"),a=g(),c=r("span"),u=E(o),f=g(),d=r("div"),_=r("div"),m=g(),v=r("span"),h=E(p),k=g(),w=r("span"),b=E(S),T=E("%"),z=g(),q=r("button"),q.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',i(n,"class","value-dot svelte-4ctbet"),te(n,"background",at(t[29].value)),i(c,"class","value-name svelte-4ctbet"),i(_,"class","value-bar svelte-4ctbet"),te(_,"width",t[29].count/t[7]*100+"%"),te(_,"background",at(t[29].value)+"40"),i(d,"class","value-bar-container svelte-4ctbet"),i(v,"class","value-count svelte-4ctbet"),i(w,"class","value-percent svelte-4ctbet"),i(l,"class","field-value svelte-4ctbet"),i(q,"class","exclude-btn svelte-4ctbet"),i(q,"title","Exclude"),i(e,"class","field-value-row svelte-4ctbet")},m(j,C){N(j,e,C),s(e,l),s(l,n),s(l,a),s(l,c),s(c,u),s(l,f),s(l,d),s(d,_),s(l,m),s(l,v),s(v,h),s(l,k),s(l,w),s(w,b),s(w,T),s(e,z),s(e,q),L||(R=[V(l,"click",P),V(q,"click",je(A))],L=!0)},p(j,C){t=j,C[0]&1024&&te(n,"background",at(t[29].value)),C[0]&1024&&o!==(o=t[29].value+"")&&Z(u,o),C[0]&1152&&te(_,"width",t[29].count/t[7]*100+"%"),C[0]&1024&&te(_,"background",at(t[29].value)+"40"),C[0]&1024&&p!==(p=ml(t[29].count)+"")&&Z(h,p),C[0]&1024&&S!==(S=t[14](t[29].count).toFixed(0)+"")&&Z(b,S)},d(j){j&&O(e),L=!1,Me(R)}}}function kn(t){let e;return{c(){e=r("div"),e.textContent="No data",i(e,"class","empty svelte-4ctbet")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function wn(t){let e,l,n=ie(t[9]),a=[];for(let o=0;o<n.length;o+=1)a[o]=yn(_n(t,n,o));let c=t[9].length===0&&Cn();return{c(){e=r("div");for(let o=0;o<a.length;o+=1)a[o].c();l=g(),c&&c.c(),i(e,"class","field-values svelte-4ctbet")},m(o,u){N(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);s(e,l),c&&c.m(e,null)},p(o,u){if(u[0]&25152){n=ie(o[9]);let f;for(f=0;f<n.length;f+=1){const d=_n(o,n,f);a[f]?a[f].p(d,u):(a[f]=yn(d),a[f].c(),a[f].m(e,l))}for(;f<a.length;f+=1)a[f].d(1);a.length=n.length}o[9].length===0?c||(c=Cn(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(o){o&&O(e),Je(a,o),c&&c.d()}}}function yn(t){let e,l,n,a,c,o=t[29].value+"",u,f,d,_,m,v,p=ml(t[29].count)+"",h,k,w,S=t[14](t[29].count).toFixed(0)+"",b,T,z,q,L,R;function P(){return t[22](t[29])}function A(){return t[23](t[29])}return{c(){e=r("div"),l=r("button"),n=r("span"),a=g(),c=r("span"),u=E(o),f=g(),d=r("div"),_=r("div"),m=g(),v=r("span"),h=E(p),k=g(),w=r("span"),b=E(S),T=E("%"),z=g(),q=r("button"),q.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',i(n,"class","value-dot svelte-4ctbet"),te(n,"background","#58a6ff"),i(c,"class","value-name svelte-4ctbet"),i(_,"class","value-bar svelte-4ctbet"),te(_,"width",t[29].count/t[6]*100+"%"),te(_,"background","#58a6ff40"),i(d,"class","value-bar-container svelte-4ctbet"),i(v,"class","value-count svelte-4ctbet"),i(w,"class","value-percent svelte-4ctbet"),i(l,"class","field-value svelte-4ctbet"),i(q,"class","exclude-btn svelte-4ctbet"),i(q,"title","Exclude"),i(e,"class","field-value-row svelte-4ctbet")},m(j,C){N(j,e,C),s(e,l),s(l,n),s(l,a),s(l,c),s(c,u),s(l,f),s(l,d),s(d,_),s(l,m),s(l,v),s(v,h),s(l,k),s(l,w),s(w,b),s(w,T),s(e,z),s(e,q),L||(R=[V(l,"click",P),V(q,"click",je(A))],L=!0)},p(j,C){t=j,C[0]&512&&o!==(o=t[29].value+"")&&Z(u,o),C[0]&576&&te(_,"width",t[29].count/t[6]*100+"%"),C[0]&512&&p!==(p=ml(t[29].count)+"")&&Z(h,p),C[0]&512&&S!==(S=t[14](t[29].count).toFixed(0)+"")&&Z(b,S)},d(j){j&&O(e),L=!1,Me(R)}}}function Cn(t){let e;return{c(){e=r("div"),e.textContent="No data",i(e,"class","empty svelte-4ctbet")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Sn(t){let e,l,n=ie(t[8]),a=[];for(let o=0;o<n.length;o+=1)a[o]=Mn(pn(t,n,o));let c=t[8].length===0&&Ln();return{c(){e=r("div");for(let o=0;o<a.length;o+=1)a[o].c();l=g(),c&&c.c(),i(e,"class","field-values svelte-4ctbet")},m(o,u){N(o,e,u);for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(e,null);s(e,l),c&&c.m(e,null)},p(o,u){if(u[0]&24864){n=ie(o[8]);let f;for(f=0;f<n.length;f+=1){const d=pn(o,n,f);a[f]?a[f].p(d,u):(a[f]=Mn(d),a[f].c(),a[f].m(e,l))}for(;f<a.length;f+=1)a[f].d(1);a.length=n.length}o[8].length===0?c||(c=Ln(),c.c(),c.m(e,null)):c&&(c.d(1),c=null)},d(o){o&&O(e),Je(a,o),c&&c.d()}}}function Mn(t){let e,l,n,a,c,o=t[29].value+"",u,f,d,_,m,v,p=ml(t[29].count)+"",h,k,w,S=t[14](t[29].count).toFixed(0)+"",b,T,z,q,L,R;function P(){return t[25](t[29])}function A(){return t[26](t[29])}return{c(){e=r("div"),l=r("button"),n=r("span"),a=g(),c=r("span"),u=E(o),f=g(),d=r("div"),_=r("div"),m=g(),v=r("span"),h=E(p),k=g(),w=r("span"),b=E(S),T=E("%"),z=g(),q=r("button"),q.innerHTML='<svg width="10" height="10" viewBox="0 0 10 10"><path stroke="currentColor" stroke-width="1.5" d="M2 2l6 6M8 2L2 8"></path></svg>',i(n,"class","value-dot svelte-4ctbet"),te(n,"background","#a371f7"),i(c,"class","value-name svelte-4ctbet"),i(_,"class","value-bar svelte-4ctbet"),te(_,"width",t[29].count/t[5]*100+"%"),te(_,"background","#a371f740"),i(d,"class","value-bar-container svelte-4ctbet"),i(v,"class","value-count svelte-4ctbet"),i(w,"class","value-percent svelte-4ctbet"),i(l,"class","field-value svelte-4ctbet"),i(q,"class","exclude-btn svelte-4ctbet"),i(q,"title","Exclude"),i(e,"class","field-value-row svelte-4ctbet")},m(j,C){N(j,e,C),s(e,l),s(l,n),s(l,a),s(l,c),s(c,u),s(l,f),s(l,d),s(d,_),s(l,m),s(l,v),s(v,h),s(l,k),s(l,w),s(w,b),s(w,T),s(e,z),s(e,q),L||(R=[V(l,"click",P),V(q,"click",je(A))],L=!0)},p(j,C){t=j,C[0]&256&&o!==(o=t[29].value+"")&&Z(u,o),C[0]&288&&te(_,"width",t[29].count/t[5]*100+"%"),C[0]&256&&p!==(p=ml(t[29].count)+"")&&Z(h,p),C[0]&256&&S!==(S=t[14](t[29].count).toFixed(0)+"")&&Z(b,S)},d(j){j&&O(e),L=!1,Me(R)}}}function Ln(t){let e;return{c(){e=r("div"),e.textContent="No data",i(e,"class","empty svelte-4ctbet")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function ga(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P=t[3].length+"",A,j,C,B,M,y,I,H,U,G,K,F=t[2].length+"",Q,J,D,X,Y,x,de,me,be,Ce,we,Fe=t[1].length+"",He,ce,pe,ze,ve=t[4].level&&mn(t),fe=t[4].service&&wn(t),ue=t[4].host&&Sn(t);return{c(){e=r("div"),l=r("div"),n=r("h3"),n.textContent="Fields",a=g(),c=r("div"),o=r("button"),o.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M2 4l4 4 4-4"></path></svg>',u=g(),f=r("button"),f.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M2 8l4-4 4 4"></path></svg>',d=g(),_=r("div"),m=$("svg"),v=$("path"),p=g(),h=r("input"),k=g(),w=r("div"),S=r("button"),b=$("svg"),T=$("path"),z=g(),q=r("span"),q.textContent="level",L=g(),R=r("span"),A=E(P),j=g(),ve&&ve.c(),C=g(),B=r("div"),M=r("button"),y=$("svg"),I=$("path"),H=g(),U=r("span"),U.textContent="service",G=g(),K=r("span"),Q=E(F),J=g(),fe&&fe.c(),D=g(),X=r("div"),Y=r("button"),x=$("svg"),de=$("path"),me=g(),be=r("span"),be.textContent="host",Ce=g(),we=r("span"),He=E(Fe),ce=g(),ue&&ue.c(),i(n,"class","svelte-4ctbet"),i(o,"class","action-btn svelte-4ctbet"),i(o,"title","Expand all"),i(f,"class","action-btn svelte-4ctbet"),i(f,"title","Collapse all"),i(c,"class","header-actions svelte-4ctbet"),i(l,"class","fields-header svelte-4ctbet"),i(v,"fill","currentColor"),i(v,"d","M8.5 5.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Zm-.5 3.2a4 4 0 1 1 .7-.7l2.1 2.1a.5.5 0 0 1-.7.7L8 8.7Z"),i(m,"width","12"),i(m,"height","12"),i(m,"viewBox","0 0 12 12"),i(m,"class","svelte-4ctbet"),i(h,"type","text"),i(h,"placeholder","Filter fields..."),i(h,"class","svelte-4ctbet"),i(_,"class","field-search svelte-4ctbet"),i(T,"fill","currentColor"),i(T,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),i(b,"class","chevron svelte-4ctbet"),i(b,"width","12"),i(b,"height","12"),i(b,"viewBox","0 0 12 12"),ne(b,"expanded",t[4].level),i(q,"class","section-name svelte-4ctbet"),i(R,"class","section-count svelte-4ctbet"),i(S,"class","section-header svelte-4ctbet"),i(w,"class","field-section svelte-4ctbet"),i(I,"fill","currentColor"),i(I,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),i(y,"class","chevron svelte-4ctbet"),i(y,"width","12"),i(y,"height","12"),i(y,"viewBox","0 0 12 12"),ne(y,"expanded",t[4].service),i(U,"class","section-name svelte-4ctbet"),i(K,"class","section-count svelte-4ctbet"),i(M,"class","section-header svelte-4ctbet"),i(B,"class","field-section svelte-4ctbet"),i(de,"fill","currentColor"),i(de,"d","M4.7 10a.5.5 0 0 1-.354-.854L7.293 6 4.346 3.054a.5.5 0 0 1 .708-.708l3.3 3.3a.5.5 0 0 1 0 .708l-3.3 3.3A.5.5 0 0 1 4.7 10Z"),i(x,"class","chevron svelte-4ctbet"),i(x,"width","12"),i(x,"height","12"),i(x,"viewBox","0 0 12 12"),ne(x,"expanded",t[4].host),i(be,"class","section-name svelte-4ctbet"),i(we,"class","section-count svelte-4ctbet"),i(Y,"class","section-header svelte-4ctbet"),i(X,"class","field-section svelte-4ctbet"),i(e,"class","fields-sidebar svelte-4ctbet")},m(ae,_e){N(ae,e,_e),s(e,l),s(l,n),s(l,a),s(l,c),s(c,o),s(c,u),s(c,f),s(e,d),s(e,_),s(_,m),s(m,v),s(_,p),s(_,h),se(h,t[0]),s(e,k),s(e,w),s(w,S),s(S,b),s(b,T),s(S,z),s(S,q),s(S,L),s(S,R),s(R,A),s(w,j),ve&&ve.m(w,null),s(e,C),s(e,B),s(B,M),s(M,y),s(y,I),s(M,H),s(M,U),s(M,G),s(M,K),s(K,Q),s(B,J),fe&&fe.m(B,null),s(e,D),s(e,X),s(X,Y),s(Y,x),s(x,de),s(Y,me),s(Y,be),s(Y,Ce),s(Y,we),s(we,He),s(X,ce),ue&&ue.m(X,null),pe||(ze=[V(o,"click",t[15]),V(f,"click",t[16]),V(h,"input",t[17]),V(S,"click",t[18]),V(M,"click",t[21]),V(Y,"click",t[24])],pe=!0)},p(ae,_e){_e[0]&1&&h.value!==ae[0]&&se(h,ae[0]),_e[0]&16&&ne(b,"expanded",ae[4].level),_e[0]&8&&P!==(P=ae[3].length+"")&&Z(A,P),ae[4].level?ve?ve.p(ae,_e):(ve=mn(ae),ve.c(),ve.m(w,null)):ve&&(ve.d(1),ve=null),_e[0]&16&&ne(y,"expanded",ae[4].service),_e[0]&4&&F!==(F=ae[2].length+"")&&Z(Q,F),ae[4].service?fe?fe.p(ae,_e):(fe=wn(ae),fe.c(),fe.m(B,null)):fe&&(fe.d(1),fe=null),_e[0]&16&&ne(x,"expanded",ae[4].host),_e[0]&2&&Fe!==(Fe=ae[1].length+"")&&Z(He,Fe),ae[4].host?ue?ue.p(ae,_e):(ue=Sn(ae),ue.c(),ue.m(X,null)):ue&&(ue.d(1),ue=null)},i:le,o:le,d(ae){ae&&O(e),ve&&ve.d(),fe&&fe.d(),ue&&ue.d(),pe=!1,Me(ze)}}}function ml(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t}function ma(t,e,l){let n,a,c,o,u,f,d,_,m,v;Ye(t,xl,H=>l(1,d=H)),Ye(t,$l,H=>l(2,_=H)),Ye(t,Yl,H=>l(3,m=H)),Ye(t,Gl,H=>l(27,v=H));const p=Bl();let h={level:!0,service:!0,host:!0},k="";function w(H){l(4,h[H]=!h[H],h)}function S(H){l(4,h={level:H,service:H,host:H})}function b(H,U,G=!1){p("filter",{field:H,value:`${G?"NOT ":""}${H}:${U}`})}function T(H){return Math.min(100,H/(v||1)*100)}const z=()=>S(!0),q=()=>S(!1);function L(){k=this.value,l(0,k)}const R=()=>w("level"),P=H=>b("level",H.value),A=H=>b("level",H.value,!0),j=()=>w("service"),C=H=>b("service",H.value),B=H=>b("service",H.value,!0),M=()=>w("host"),y=H=>b("host",H.value),I=H=>b("host",H.value,!0);return t.$$.update=()=>{t.$$.dirty[0]&9&&l(10,n=m.filter(H=>!k||H.value.toLowerCase().includes(k.toLowerCase()))),t.$$.dirty[0]&5&&l(9,a=_.filter(H=>!k||H.value.toLowerCase().includes(k.toLowerCase()))),t.$$.dirty[0]&3&&l(8,c=d.filter(H=>!k||H.value.toLowerCase().includes(k.toLowerCase()))),t.$$.dirty[0]&8&&l(7,o=Math.max(...m.map(H=>H.count),1)),t.$$.dirty[0]&4&&l(6,u=Math.max(..._.map(H=>H.count),1)),t.$$.dirty[0]&2&&l(5,f=Math.max(...d.map(H=>H.count),1))},[k,d,_,m,h,f,u,o,c,a,n,w,S,b,T,z,q,L,R,P,A,j,C,B,M,y,I]}class ba extends bt{constructor(e){super(),mt(this,e,ma,ga,ut,{},null,[-1,-1])}}function Tn(t,e,l){const n=t.slice();return n[27]=e[l],n[29]=l,n}function Hn(t,e,l){const n=t.slice();return n[30]=e[l][0],n[31]=e[l][1],n}function zn(t,e,l){const n=t.slice();return n[34]=e[l],n}function Rn(t,e,l){const n=t.slice();return n[34]=e[l],n}function Bn(t){let e,l,n,a,c,o,u,f,d=ie(t[1]),_=[];for(let m=0;m<d.length;m+=1)_[m]=An(Rn(t,d,m));return{c(){e=r("div"),l=r("div"),n=r("span"),n.textContent="Show/Hide Columns",a=g(),c=r("button"),c.textContent="Reset",o=g();for(let m=0;m<_.length;m+=1)_[m].c();i(c,"class","reset-btn svelte-1agpyzi"),i(l,"class","column-menu-header svelte-1agpyzi"),i(e,"class","column-menu svelte-1agpyzi")},m(m,v){N(m,e,v),s(e,l),s(l,n),s(l,a),s(l,c),s(e,o);for(let p=0;p<_.length;p+=1)_[p]&&_[p].m(e,null);u||(f=V(c,"click",t[10]),u=!0)},p(m,v){if(v[0]&258){d=ie(m[1]);let p;for(p=0;p<d.length;p+=1){const h=Rn(m,d,p);_[p]?_[p].p(h,v):(_[p]=An(h),_[p].c(),_[p].m(e,null))}for(;p<_.length;p+=1)_[p].d(1);_.length=d.length}},d(m){m&&O(e),Je(_,m),u=!1,f()}}}function An(t){let e,l,n,a,c,o=t[34].label+"",u,f,d,_;function m(){return t[12](t[34])}return{c(){e=r("label"),l=r("input"),a=g(),c=r("span"),u=E(o),f=g(),i(l,"type","checkbox"),l.checked=n=t[34].visible,i(l,"class","svelte-1agpyzi"),i(e,"class","column-option svelte-1agpyzi")},m(v,p){N(v,e,p),s(e,l),s(e,a),s(e,c),s(c,u),s(e,f),d||(_=V(l,"change",m),d=!0)},p(v,p){t=v,p[0]&2&&n!==(n=t[34].visible)&&(l.checked=n),p[0]&2&&o!==(o=t[34].label+"")&&Z(u,o)},d(v){v&&O(e),d=!1,_()}}}function ka(t){let e,l,n,a,c,o=[],u=new Map,f=ie(t[2]),d=[];for(let v=0;v<f.length;v+=1)d[v]=On(zn(t,f,v));let _=ie(t[0]);const m=v=>v[27].id||v[29];for(let v=0;v<_.length;v+=1){let p=Tn(t,_,v),h=m(p);u.set(h,o[v]=Fn(h,p))}return{c(){e=r("table"),l=r("thead"),n=r("tr");for(let v=0;v<d.length;v+=1)d[v].c();a=g(),c=r("tbody");for(let v=0;v<o.length;v+=1)o[v].c();i(l,"class","svelte-1agpyzi"),i(e,"class","log-table svelte-1agpyzi"),ne(e,"resizing",t[5]!==null)},m(v,p){N(v,e,p),s(e,l),s(l,n);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(n,null);s(e,a),s(e,c);for(let h=0;h<o.length;h+=1)o[h]&&o[h].m(c,null)},p(v,p){if(p[0]&516){f=ie(v[2]);let h;for(h=0;h<f.length;h+=1){const k=zn(v,f,h);d[h]?d[h].p(k,p):(d[h]=On(k),d[h].c(),d[h].m(n,null))}for(;h<d.length;h+=1)d[h].d(1);d.length=f.length}p[0]&203&&(_=ie(v[0]),o=xi(o,p,m,1,v,_,u,c,$i,Fn,null,Tn)),p[0]&32&&ne(e,"resizing",v[5]!==null)},d(v){v&&O(e),Je(d,v);for(let p=0;p<o.length;p+=1)o[p].d()}}}function wa(t){let e;return{c(){e=r("div"),e.innerHTML='<svg width="48" height="48" viewBox="0 0 48 48" class="svelte-1agpyzi"><path fill="currentColor" opacity="0.3" d="M24 4C12.954 4 4 12.954 4 24s8.954 20 20 20 20-8.954 20-20S35.046 4 24 4Zm0 36c-8.837 0-16-7.163-16-16S15.163 8 24 8s16 7.163 16 16-7.163 16-16 16Z"></path><path fill="currentColor" d="M24 14a2 2 0 0 1 2 2v8a2 2 0 0 1-4 0v-8a2 2 0 0 1 2-2Zm0 16a2 2 0 1 1 0 4 2 2 0 0 1 0-4Z"></path></svg> <p class="svelte-1agpyzi">No logs found</p> <span class="svelte-1agpyzi">Try adjusting your search or time range</span>',i(e,"class","empty-state svelte-1agpyzi")},m(l,n){N(l,e,n)},p:le,d(l){l&&O(e)}}}function En(t){let e,l,n;function a(...c){return t[13](t[34],...c)}return{c(){e=r("div"),i(e,"class","resize-handle svelte-1agpyzi"),i(e,"role","separator"),i(e,"aria-orientation","vertical"),i(e,"tabindex","-1")},m(c,o){N(c,e,o),l||(n=V(e,"mousedown",a),l=!0)},p(c,o){t=c},d(c){c&&O(e),l=!1,n()}}}function On(t){let e,l=t[34].label+"",n,a,c,o,u=t[34].id!=="message"&&En(t);return{c(){e=r("th"),n=E(l),a=g(),u&&u.c(),c=g(),i(e,"style",o=t[34].width?`width: ${t[34].width}px`:""),i(e,"class","svelte-1agpyzi")},m(f,d){N(f,e,d),s(e,n),s(e,a),u&&u.m(e,null),s(e,c)},p(f,d){d[0]&4&&l!==(l=f[34].label+"")&&Z(n,l),f[34].id!=="message"?u?u.p(f,d):(u=En(f),u.c(),u.m(e,c)):u&&(u.d(1),u=null),d[0]&4&&o!==(o=f[34].width?`width: ${f[34].width}px`:"")&&i(e,"style",o)},d(f){f&&O(e),u&&u.d()}}}function Nn(t){let e,l,n=en(t[27].timestamp)+"",a,c;return{c(){e=r("td"),l=r("span"),a=E(n),i(l,"class","timestamp svelte-1agpyzi"),i(l,"title",c=tn(t[27].timestamp)),te(e,"width",t[1].find(Qn).width+"px"),i(e,"class","svelte-1agpyzi")},m(o,u){N(o,e,u),s(e,l),s(l,a)},p(o,u){u[0]&1&&n!==(n=en(o[27].timestamp)+"")&&Z(a,n),u[0]&1&&c!==(c=tn(o[27].timestamp))&&i(l,"title",c),u[0]&2&&te(e,"width",o[1].find(Qn).width+"px")},d(o){o&&O(e)}}}function qn(t){let e,l,n=t[27].level+"",a;return{c(){e=r("td"),l=r("span"),a=E(n),i(l,"class","level-badge svelte-1agpyzi"),te(l,"background",at(t[27].level)+"20"),te(l,"color",at(t[27].level)),te(e,"width",t[1].find(Gn).width+"px"),i(e,"class","svelte-1agpyzi")},m(c,o){N(c,e,o),s(e,l),s(l,a)},p(c,o){o[0]&1&&n!==(n=c[27].level+"")&&Z(a,n),o[0]&1&&te(l,"background",at(c[27].level)+"20"),o[0]&1&&te(l,"color",at(c[27].level)),o[0]&2&&te(e,"width",c[1].find(Gn).width+"px")},d(c){c&&O(e)}}}function jn(t){let e,l,n=t[27].service+"",a;return{c(){e=r("td"),l=r("span"),a=E(n),i(l,"class","service svelte-1agpyzi"),te(e,"width",t[1].find(Yn).width+"px"),i(e,"class","svelte-1agpyzi")},m(c,o){N(c,e,o),s(e,l),s(l,a)},p(c,o){o[0]&1&&n!==(n=c[27].service+"")&&Z(a,n),o[0]&2&&te(e,"width",c[1].find(Yn).width+"px")},d(c){c&&O(e)}}}function In(t){let e,l,n=t[27].host+"",a;return{c(){e=r("td"),l=r("span"),a=E(n),i(l,"class","host svelte-1agpyzi"),te(e,"width",t[1].find($n).width+"px"),i(e,"class","svelte-1agpyzi")},m(c,o){N(c,e,o),s(e,l),s(l,a)},p(c,o){o[0]&1&&n!==(n=c[27].host+"")&&Z(a,n),o[0]&2&&te(e,"width",c[1].find($n).width+"px")},d(c){c&&O(e)}}}function Pn(t){let e,l,n=t[27].message+"",a;return{c(){e=r("td"),l=r("span"),a=E(n),i(l,"class","message svelte-1agpyzi"),i(e,"class","svelte-1agpyzi")},m(c,o){N(c,e,o),s(e,l),s(l,a)},p(c,o){o[0]&1&&n!==(n=c[27].message+"")&&Z(a,n)},d(c){c&&O(e)}}}function Vn(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S=t[27].timestamp+"",b,T,z,q,L,R,P,A=t[27].level+"",j,C,B,M,y,I,H=t[27].service+"",U,G,K,F,Q,J,D=t[27].host+"",X,Y,x,de,me,be,Ce=t[27].message+"",we,Fe,He=t[27].meta&&Object.keys(t[27].meta).length>0,ce,pe,ze,ve,fe,ue=t[27].raw+"",ae,_e,$e,At;function nt(){return t[15](t[27])}function kt(){return t[16](t[27])}function wt(){return t[17](t[27])}function Dt(){return t[18](t[27])}function Re(){return t[19](t[27])}function ye(){return t[20](t[27])}let re=He&&Zn(t);return{c(){e=r("tr"),l=r("td"),n=r("div"),a=r("div"),c=r("h4"),c.textContent="Log Details",o=g(),u=r("div"),f=r("button"),f.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1agpyzi"><path fill="currentColor" d="M4 2a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h5a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1H4Zm5 7H4V3h5v6Z"></path><path fill="currentColor" d="M2 4v6a2 2 0 0 0 2 2h5v-1H4a1 1 0 0 1-1-1V4H2Z"></path></svg>
                        Copy Raw`,d=g(),_=r("button"),_.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1agpyzi"><path fill="currentColor" d="M3 2a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1 1 1 0 0 1 1 1v2a1 1 0 0 0 1 1M9 2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1 1 1 0 0 0-1 1v2a1 1 0 0 1-1 1"></path></svg>
                        Copy JSON`,m=g(),v=r("div"),p=r("button"),h=r("span"),h.textContent="timestamp",k=g(),w=r("span"),b=E(S),T=g(),z=r("button"),q=r("span"),q.textContent="level",L=g(),R=r("span"),P=r("span"),j=E(A),C=g(),B=r("button"),M=r("span"),M.textContent="service",y=g(),I=r("span"),U=E(H),G=g(),K=r("button"),F=r("span"),F.textContent="host",Q=g(),J=r("span"),X=E(D),Y=g(),x=r("div"),de=r("span"),de.textContent="message",me=g(),be=r("span"),we=E(Ce),Fe=g(),re&&re.c(),ce=g(),pe=r("div"),ze=r("h5"),ze.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1agpyzi"><path fill="currentColor" d="M1 2h10a1 1 0 0 1 1 1v6a1 1 0 0 1-1 1H1a1 1 0 0 1-1-1V3a1 1 0 0 1 1-1Zm0 1v6h10V3H1Zm1 1h2v1H2V4Zm3 0h5v1H5V4Zm-3 2h1v1H2V6Zm2 0h4v1H4V6Z"></path></svg>
                      Raw Log`,ve=g(),fe=r("pre"),ae=E(ue),_e=g(),i(c,"class","svelte-1agpyzi"),i(f,"class","action-btn svelte-1agpyzi"),i(f,"title","Copy raw log"),i(_,"class","action-btn svelte-1agpyzi"),i(_,"title","Copy as JSON"),i(u,"class","detail-actions svelte-1agpyzi"),i(a,"class","detail-header svelte-1agpyzi"),i(h,"class","field-name svelte-1agpyzi"),i(w,"class","field-value mono svelte-1agpyzi"),i(p,"class","detail-field clickable svelte-1agpyzi"),i(p,"title","Click to copy"),i(q,"class","field-name svelte-1agpyzi"),i(P,"class","level-badge-sm svelte-1agpyzi"),te(P,"background",at(t[27].level)+"20"),te(P,"color",at(t[27].level)),i(R,"class","field-value svelte-1agpyzi"),i(z,"class","detail-field clickable svelte-1agpyzi"),i(z,"title","Click to copy"),i(M,"class","field-name svelte-1agpyzi"),i(I,"class","field-value highlight-blue svelte-1agpyzi"),i(B,"class","detail-field clickable svelte-1agpyzi"),i(B,"title","Click to copy"),i(F,"class","field-name svelte-1agpyzi"),i(J,"class","field-value highlight-purple svelte-1agpyzi"),i(K,"class","detail-field clickable svelte-1agpyzi"),i(K,"title","Click to copy"),i(v,"class","detail-grid svelte-1agpyzi"),i(de,"class","field-name svelte-1agpyzi"),i(be,"class","field-value mono svelte-1agpyzi"),i(x,"class","detail-field full-width svelte-1agpyzi"),i(ze,"class","svelte-1agpyzi"),i(fe,"class","raw-log svelte-1agpyzi"),i(pe,"class","detail-section svelte-1agpyzi"),i(n,"class","log-detail svelte-1agpyzi"),i(l,"colspan",t[6]),i(l,"class","svelte-1agpyzi"),i(e,"class","detail-row svelte-1agpyzi")},m(it,ke){N(it,e,ke),s(e,l),s(l,n),s(n,a),s(a,c),s(a,o),s(a,u),s(u,f),s(u,d),s(u,_),s(n,m),s(n,v),s(v,p),s(p,h),s(p,k),s(p,w),s(w,b),s(v,T),s(v,z),s(z,q),s(z,L),s(z,R),s(R,P),s(P,j),s(v,C),s(v,B),s(B,M),s(B,y),s(B,I),s(I,U),s(v,G),s(v,K),s(K,F),s(K,Q),s(K,J),s(J,X),s(n,Y),s(n,x),s(x,de),s(x,me),s(x,be),s(be,we),s(n,Fe),re&&re.m(n,null),s(n,ce),s(n,pe),s(pe,ze),s(pe,ve),s(pe,fe),s(fe,ae),s(e,_e),$e||(At=[V(f,"click",je(nt)),V(_,"click",je(kt)),V(p,"click",je(wt)),V(z,"click",je(Dt)),V(B,"click",je(Re)),V(K,"click",je(ye))],$e=!0)},p(it,ke){t=it,ke[0]&1&&S!==(S=t[27].timestamp+"")&&Z(b,S),ke[0]&1&&A!==(A=t[27].level+"")&&Z(j,A),ke[0]&1&&te(P,"background",at(t[27].level)+"20"),ke[0]&1&&te(P,"color",at(t[27].level)),ke[0]&1&&H!==(H=t[27].service+"")&&Z(U,H),ke[0]&1&&D!==(D=t[27].host+"")&&Z(X,D),ke[0]&1&&Ce!==(Ce=t[27].message+"")&&Z(we,Ce),ke[0]&1&&(He=t[27].meta&&Object.keys(t[27].meta).length>0),He?re?re.p(t,ke):(re=Zn(t),re.c(),re.m(n,ce)):re&&(re.d(1),re=null),ke[0]&1&&ue!==(ue=t[27].raw+"")&&Z(ae,ue),ke[0]&64&&i(l,"colspan",t[6])},d(it){it&&O(e),re&&re.d(),$e=!1,Me(At)}}}function Zn(t){let e,l,n,a,c=ie(Object.entries(t[27].meta)),o=[];for(let u=0;u<c.length;u+=1)o[u]=Dn(Hn(t,c,u));return{c(){e=r("div"),l=r("h5"),l.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1agpyzi"><path fill="currentColor" d="M2 3h8v1H2V3Zm0 2h8v1H2V5Zm0 2h6v1H2V7Zm0 2h4v1H2V9Z"></path></svg>
                        Meta Fields`,n=g(),a=r("div");for(let u=0;u<o.length;u+=1)o[u].c();i(l,"class","svelte-1agpyzi"),i(a,"class","meta-grid svelte-1agpyzi"),i(e,"class","detail-section svelte-1agpyzi")},m(u,f){N(u,e,f),s(e,l),s(e,n),s(e,a);for(let d=0;d<o.length;d+=1)o[d]&&o[d].m(a,null)},p(u,f){if(f[0]&1){c=ie(Object.entries(u[27].meta));let d;for(d=0;d<c.length;d+=1){const _=Hn(u,c,d);o[d]?o[d].p(_,f):(o[d]=Dn(_),o[d].c(),o[d].m(a,null))}for(;d<o.length;d+=1)o[d].d(1);o.length=c.length}},d(u){u&&O(e),Je(o,u)}}}function Dn(t){let e,l,n=t[30]+"",a,c,o,u=(typeof t[31]=="object"?JSON.stringify(t[31]):t[31])+"",f,d,_,m;function v(){return t[21](t[31])}return{c(){e=r("button"),l=r("span"),a=E(n),c=g(),o=r("span"),f=E(u),d=g(),i(l,"class","meta-key svelte-1agpyzi"),i(o,"class","meta-value svelte-1agpyzi"),i(e,"class","meta-field svelte-1agpyzi"),i(e,"title","Click to copy")},m(p,h){N(p,e,h),s(e,l),s(l,a),s(e,c),s(e,o),s(o,f),s(e,d),_||(m=V(e,"click",je(v)),_=!0)},p(p,h){t=p,h[0]&1&&n!==(n=t[30]+"")&&Z(a,n),h[0]&1&&u!==(u=(typeof t[31]=="object"?JSON.stringify(t[31]):t[31])+"")&&Z(f,u)},d(p){p&&O(e),_=!1,m()}}}function Fn(t,e){var R,P,A,j,C,B;let l,n=(R=e[1].find(Xn))==null?void 0:R.visible,a,c=(P=e[1].find(Kn))==null?void 0:P.visible,o,u=(A=e[1].find(Jn))==null?void 0:A.visible,f,d=(j=e[1].find(Un))==null?void 0:j.visible,_,m=(C=e[1].find(Wn))==null?void 0:C.visible,v,p,h,k,w=n&&Nn(e),S=c&&qn(e),b=u&&jn(e),T=d&&In(e),z=m&&Pn(e);function q(){return e[14](e[27])}let L=((B=e[3])==null?void 0:B.id)===e[27].id&&Vn(e);return{key:t,first:null,c(){var M;l=r("tr"),w&&w.c(),a=g(),S&&S.c(),o=g(),b&&b.c(),f=g(),T&&T.c(),_=g(),z&&z.c(),v=g(),L&&L.c(),p=jl(),i(l,"class","log-row svelte-1agpyzi"),ne(l,"selected",((M=e[3])==null?void 0:M.id)===e[27].id),this.first=l},m(M,y){N(M,l,y),w&&w.m(l,null),s(l,a),S&&S.m(l,null),s(l,o),b&&b.m(l,null),s(l,f),T&&T.m(l,null),s(l,_),z&&z.m(l,null),N(M,v,y),L&&L.m(M,y),N(M,p,y),h||(k=V(l,"click",q),h=!0)},p(M,y){var I,H,U,G,K,F,Q;e=M,y[0]&2&&(n=(I=e[1].find(Xn))==null?void 0:I.visible),n?w?w.p(e,y):(w=Nn(e),w.c(),w.m(l,a)):w&&(w.d(1),w=null),y[0]&2&&(c=(H=e[1].find(Kn))==null?void 0:H.visible),c?S?S.p(e,y):(S=qn(e),S.c(),S.m(l,o)):S&&(S.d(1),S=null),y[0]&2&&(u=(U=e[1].find(Jn))==null?void 0:U.visible),u?b?b.p(e,y):(b=jn(e),b.c(),b.m(l,f)):b&&(b.d(1),b=null),y[0]&2&&(d=(G=e[1].find(Un))==null?void 0:G.visible),d?T?T.p(e,y):(T=In(e),T.c(),T.m(l,_)):T&&(T.d(1),T=null),y[0]&2&&(m=(K=e[1].find(Wn))==null?void 0:K.visible),m?z?z.p(e,y):(z=Pn(e),z.c(),z.m(l,null)):z&&(z.d(1),z=null),y[0]&9&&ne(l,"selected",((F=e[3])==null?void 0:F.id)===e[27].id),((Q=e[3])==null?void 0:Q.id)===e[27].id?L?L.p(e,y):(L=Vn(e),L.c(),L.m(p.parentNode,p)):L&&(L.d(1),L=null)},d(M){M&&(O(l),O(v),O(p)),w&&w.d(),S&&S.d(),b&&b.d(),T&&T.d(),z&&z.d(),L&&L.d(M),h=!1,k()}}}function ya(t){let e,l,n,a,c,o,u,f=t[0].length+"",d,_,m,v,p,h=t[4]&&Bn(t);function k(b,T){return b[0].length===0?wa:ka}let w=k(t),S=w(t);return{c(){e=r("div"),l=r("div"),n=r("div"),a=r("button"),a.innerHTML=`<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M1 2h12v2H1V2Zm0 4h12v2H1V6Zm0 4h8v2H1v-2Z"></path></svg>
        Columns`,c=g(),h&&h.c(),o=g(),u=r("span"),d=E(f),_=E(" logs"),m=g(),S.c(),i(a,"class","toolbar-btn svelte-1agpyzi"),i(a,"title","Configure columns"),i(n,"class","column-menu-container svelte-1agpyzi"),i(u,"class","toolbar-info svelte-1agpyzi"),i(l,"class","table-toolbar svelte-1agpyzi"),i(e,"class","log-table-container svelte-1agpyzi")},m(b,T){N(b,e,T),s(e,l),s(l,n),s(n,a),s(n,c),h&&h.m(n,null),s(l,o),s(l,u),s(u,d),s(u,_),s(e,m),S.m(e,null),v||(p=V(a,"click",t[11]),v=!0)},p(b,T){b[4]?h?h.p(b,T):(h=Bn(b),h.c(),h.m(n,null)):h&&(h.d(1),h=null),T[0]&1&&f!==(f=b[0].length+"")&&Z(d,f),w===(w=k(b))&&S?S.p(b,T):(S.d(1),S=w(b),S&&(S.c(),S.m(e,null)))},i:le,o:le,d(b){b&&O(e),h&&h.d(),S.d(),v=!1,p()}}}function tl(t){navigator.clipboard.writeText(t)}const Wn=t=>t.id==="message",Un=t=>t.id==="host",Jn=t=>t.id==="service",Kn=t=>t.id==="level",Xn=t=>t.id==="time",Qn=t=>t.id==="time",Gn=t=>t.id==="level",Yn=t=>t.id==="service",$n=t=>t.id==="host";function Ca(t,e,l){let n,a,{logs:c=[]}=e,o=null,u=!1,f=[{id:"time",label:"Time",visible:!0,width:90,minWidth:60},{id:"level",label:"Level",visible:!0,width:100,minWidth:60},{id:"service",label:"Service",visible:!0,width:150,minWidth:80},{id:"host",label:"Host",visible:!1,width:120,minWidth:80},{id:"message",label:"Message",visible:!0,width:null,minWidth:200}],d=null,_=0,m=0;Zt(()=>{const y=localStorage.getItem("purl_column_config");if(y)try{const I=JSON.parse(y);l(1,f=f.map(H=>({...H,...I.find(U=>U.id===H.id)})))}catch{}});function v(){localStorage.setItem("purl_column_config",JSON.stringify(f.map(y=>({id:y.id,visible:y.visible,width:y.width}))))}function p(y){l(3,o=(o==null?void 0:o.id)===y.id?null:y)}function h(y){const I=f.find(H=>H.id===y);I&&(I.visible=!I.visible,l(1,f),v())}function k(y,I){y.preventDefault();const H=f.find(U=>U.id===I);!H||H.id==="message"||(l(5,d=I),_=y.clientX,m=H.width,document.addEventListener("mousemove",w),document.addEventListener("mouseup",S))}function w(y){if(!d)return;const I=f.find(U=>U.id===d);if(!I)return;const H=y.clientX-_;I.width=Math.max(I.minWidth,m+H),l(1,f)}function S(){d&&v(),l(5,d=null),document.removeEventListener("mousemove",w),document.removeEventListener("mouseup",S)}function b(){l(1,f=[{id:"time",label:"Time",visible:!0,width:90,minWidth:60},{id:"level",label:"Level",visible:!0,width:100,minWidth:60},{id:"service",label:"Service",visible:!0,width:150,minWidth:80},{id:"host",label:"Host",visible:!1,width:120,minWidth:80},{id:"message",label:"Message",visible:!0,width:null,minWidth:200}]),v()}const T=()=>l(4,u=!u),z=y=>h(y.id),q=(y,I)=>k(I,y.id),L=y=>p(y),R=y=>tl(y.raw),P=y=>tl(JSON.stringify(y,null,2)),A=y=>tl(y.timestamp),j=y=>tl(y.level),C=y=>tl(y.service),B=y=>tl(y.host),M=y=>tl(String(y));return t.$$set=y=>{"logs"in y&&l(0,c=y.logs)},t.$$.update=()=>{t.$$.dirty[0]&2&&l(2,n=f.filter(y=>y.visible)),t.$$.dirty[0]&4&&l(6,a=n.length)},[c,f,n,o,u,d,a,p,h,k,b,T,z,q,L,R,P,A,j,C,B,M]}class Sa extends bt{constructor(e){super(),mt(this,e,Ca,ya,ut,{logs:0},null,[-1,-1])}}function xn(t){let e,l,n,a,c=Bt(t[5])+"",o,u,f;return{c(){e=r("div"),l=g(),n=r("div"),a=r("span"),o=E(c),u=g(),f=r("span"),f.textContent="Errors",i(e,"class","stat-divider svelte-1cnat85"),i(a,"class","stat-value svelte-1cnat85"),i(f,"class","stat-label svelte-1cnat85"),i(n,"class","stat error svelte-1cnat85")},m(d,_){N(d,e,_),N(d,l,_),N(d,n,_),s(n,a),s(a,o),s(n,u),s(n,f)},p(d,_){_&32&&c!==(c=Bt(d[5])+"")&&Z(o,c)},d(d){d&&(O(e),O(l),O(n))}}}function ei(t){let e,l,n,a,c=Bt(t[4])+"",o,u,f;return{c(){e=r("div"),l=g(),n=r("div"),a=r("span"),o=E(c),u=g(),f=r("span"),f.textContent="Warnings",i(e,"class","stat-divider svelte-1cnat85"),i(a,"class","stat-value svelte-1cnat85"),i(f,"class","stat-label svelte-1cnat85"),i(n,"class","stat warning svelte-1cnat85")},m(d,_){N(d,e,_),N(d,l,_),N(d,n,_),s(n,a),s(a,o),s(n,u),s(n,f)},p(d,_){_&16&&c!==(c=Bt(d[4])+"")&&Z(o,c)},d(d){d&&(O(e),O(l),O(n))}}}function ti(t){let e,l,n=ii(t[3].data.time)+"",a,c,o,u,f,d,_,m,v,p=t[3].data.count.toLocaleString()+"",h,k,w,S,b=t[3].data.errors&&li(t),T=t[3].data.warnings&&si(t),z=t[3].data.info&&ni(t);return{c(){e=r("div"),l=r("div"),a=E(n),c=g(),o=r("div"),u=r("div"),f=r("span"),d=g(),_=r("span"),_.textContent="Total",m=g(),v=r("span"),h=E(p),k=g(),b&&b.c(),w=g(),T&&T.c(),S=g(),z&&z.c(),i(l,"class","tooltip-time svelte-1cnat85"),i(f,"class","tooltip-dot total svelte-1cnat85"),i(v,"class","tooltip-value svelte-1cnat85"),i(u,"class","tooltip-row svelte-1cnat85"),i(o,"class","tooltip-stats svelte-1cnat85"),i(e,"class","tooltip svelte-1cnat85"),te(e,"left",t[3].x+"px"),te(e,"top",t[3].y+"px")},m(q,L){N(q,e,L),s(e,l),s(l,a),s(e,c),s(e,o),s(o,u),s(u,f),s(u,d),s(u,_),s(u,m),s(u,v),s(v,h),s(o,k),b&&b.m(o,null),s(o,w),T&&T.m(o,null),s(o,S),z&&z.m(o,null)},p(q,L){L&8&&n!==(n=ii(q[3].data.time)+"")&&Z(a,n),L&8&&p!==(p=q[3].data.count.toLocaleString()+"")&&Z(h,p),q[3].data.errors?b?b.p(q,L):(b=li(q),b.c(),b.m(o,w)):b&&(b.d(1),b=null),q[3].data.warnings?T?T.p(q,L):(T=si(q),T.c(),T.m(o,S)):T&&(T.d(1),T=null),q[3].data.info?z?z.p(q,L):(z=ni(q),z.c(),z.m(o,null)):z&&(z.d(1),z=null),L&8&&te(e,"left",q[3].x+"px"),L&8&&te(e,"top",q[3].y+"px")},d(q){q&&O(e),b&&b.d(),T&&T.d(),z&&z.d()}}}function li(t){let e,l,n,a,c,o,u=t[3].data.errors.toLocaleString()+"",f;return{c(){e=r("div"),l=r("span"),n=g(),a=r("span"),a.textContent="Errors",c=g(),o=r("span"),f=E(u),i(l,"class","tooltip-dot error svelte-1cnat85"),i(o,"class","tooltip-value svelte-1cnat85"),i(e,"class","tooltip-row svelte-1cnat85")},m(d,_){N(d,e,_),s(e,l),s(e,n),s(e,a),s(e,c),s(e,o),s(o,f)},p(d,_){_&8&&u!==(u=d[3].data.errors.toLocaleString()+"")&&Z(f,u)},d(d){d&&O(e)}}}function si(t){let e,l,n,a,c,o,u=t[3].data.warnings.toLocaleString()+"",f;return{c(){e=r("div"),l=r("span"),n=g(),a=r("span"),a.textContent="Warnings",c=g(),o=r("span"),f=E(u),i(l,"class","tooltip-dot warning svelte-1cnat85"),i(o,"class","tooltip-value svelte-1cnat85"),i(e,"class","tooltip-row svelte-1cnat85")},m(d,_){N(d,e,_),s(e,l),s(e,n),s(e,a),s(e,c),s(e,o),s(o,f)},p(d,_){_&8&&u!==(u=d[3].data.warnings.toLocaleString()+"")&&Z(f,u)},d(d){d&&O(e)}}}function ni(t){let e,l,n,a,c,o,u=t[3].data.info.toLocaleString()+"",f;return{c(){e=r("div"),l=r("span"),n=g(),a=r("span"),a.textContent="Info",c=g(),o=r("span"),f=E(u),i(l,"class","tooltip-dot info svelte-1cnat85"),i(o,"class","tooltip-value svelte-1cnat85"),i(e,"class","tooltip-row svelte-1cnat85")},m(d,_){N(d,e,_),s(e,l),s(e,n),s(e,a),s(e,c),s(e,o),s(o,f)},p(d,_){_&8&&u!==(u=d[3].data.info.toLocaleString()+"")&&Z(f,u)},d(d){d&&O(e)}}}function Ma(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k=Bt(t[1])+"",w,S,b,T,z,q,L,R,P=Bt(t[6])+"",A,j,C,B,M,y,I,H,U,G,K,F,Q,J=t[5]>0&&xn(t),D=t[4]>0&&ei(t),X=t[3].show&&t[3].data&&ti(t);return{c(){e=r("div"),l=r("div"),n=r("div"),a=$("svg"),c=$("path"),o=g(),u=r("span"),u.textContent="Log Volume Over Time",f=g(),d=r("span"),_=E(t[7]),m=g(),v=r("div"),p=r("div"),h=r("span"),w=E(k),S=g(),b=r("span"),b.textContent="Total",T=g(),z=r("div"),q=g(),L=r("div"),R=r("span"),A=E(P),j=g(),C=r("span"),C.textContent="Avg/bucket",B=g(),J&&J.c(),M=g(),D&&D.c(),y=g(),I=r("div"),H=r("canvas"),U=g(),X&&X.c(),G=g(),K=r("div"),K.innerHTML=`<div class="legend-item svelte-1cnat85"><span class="legend-dot info svelte-1cnat85"></span> <span>Info/Debug</span></div> <div class="legend-item svelte-1cnat85"><span class="legend-dot warning svelte-1cnat85"></span> <span>Warning</span></div> <div class="legend-item svelte-1cnat85"><span class="legend-dot error svelte-1cnat85"></span> <span>Error</span></div> <div class="legend-hint svelte-1cnat85"><svg width="12" height="12" viewBox="0 0 12 12" class="svelte-1cnat85"><path fill="currentColor" d="M1 4h10v1H1V4Zm2-2h6v1H3V2Zm-2 4h10v1H1V6Z"></path></svg>
      Drag to zoom</div>`,i(c,"fill","currentColor"),i(c,"d","M1 14h14v1H1v-1Zm1-3h2v3H2v-3Zm3-2h2v5H5V9Zm3-3h2v8H8V6Zm3-2h2v10h-2V4Zm3-3h1v13h-1V1Z"),i(a,"width","16"),i(a,"height","16"),i(a,"viewBox","0 0 16 16"),i(a,"class","svelte-1cnat85"),i(u,"class","histogram-title svelte-1cnat85"),i(d,"class","time-range-badge svelte-1cnat85"),i(n,"class","header-left svelte-1cnat85"),i(h,"class","stat-value svelte-1cnat85"),i(b,"class","stat-label svelte-1cnat85"),i(p,"class","stat svelte-1cnat85"),i(z,"class","stat-divider svelte-1cnat85"),i(R,"class","stat-value avg svelte-1cnat85"),i(C,"class","stat-label svelte-1cnat85"),i(L,"class","stat svelte-1cnat85"),i(v,"class","header-stats svelte-1cnat85"),i(l,"class","histogram-header svelte-1cnat85"),i(H,"class","svelte-1cnat85"),i(I,"class","chart-wrapper svelte-1cnat85"),i(K,"class","legend svelte-1cnat85"),i(e,"class","histogram-container svelte-1cnat85")},m(Y,x){N(Y,e,x),s(e,l),s(l,n),s(n,a),s(a,c),s(n,o),s(n,u),s(n,f),s(n,d),s(d,_),s(l,m),s(l,v),s(v,p),s(p,h),s(h,w),s(p,S),s(p,b),s(v,T),s(v,z),s(v,q),s(v,L),s(L,R),s(R,A),s(L,j),s(L,C),s(v,B),J&&J.m(v,null),s(v,M),D&&D.m(v,null),s(e,y),s(e,I),s(I,H),t[13](H),s(I,U),X&&X.m(I,null),s(e,G),s(e,K),t[14](e),F||(Q=[V(H,"mousemove",t[8]),V(H,"mouseleave",t[9]),V(H,"mousedown",t[10]),V(H,"mouseup",t[11])],F=!0)},p(Y,[x]){x&128&&Z(_,Y[7]),x&2&&k!==(k=Bt(Y[1])+"")&&Z(w,k),x&64&&P!==(P=Bt(Y[6])+"")&&Z(A,P),Y[5]>0?J?J.p(Y,x):(J=xn(Y),J.c(),J.m(v,M)):J&&(J.d(1),J=null),Y[4]>0?D?D.p(Y,x):(D=ei(Y),D.c(),D.m(v,null)):D&&(D.d(1),D=null),Y[3].show&&Y[3].data?X?X.p(Y,x):(X=ti(Y),X.c(),X.m(I,null)):X&&(X.d(1),X=null)},i:le,o:le,d(Y){Y&&O(e),J&&J.d(),D&&D.d(),t[13](null),X&&X.d(),t[14](null),F=!1,Me(Q)}}}function Bt(t){return t>=1e6?(t/1e6).toFixed(1)+"M":t>=1e3?(t/1e3).toFixed(1)+"K":t.toString()}function La(t){return t?new Date(t).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",hour12:!1}):""}function ii(t){return t?new Date(t).toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}):""}function Ta(t,e,l){let n,a,c,o,u,f,d;Ye(t,Vi,C=>l(12,f=C)),Ye(t,sl,C=>l(7,d=C));const _=Bl();let m,v,p={show:!1,x:0,y:0,data:null},h=-1,k=!1,w=null,S=null,b=null;function T(){const C=v==null?void 0:v.getBoundingClientRect();if(!C)return null;const B=C.width,M=100,y={left:50,right:20,top:10,bottom:30},I=B-y.left-y.right,H=M-y.top-y.bottom,U=Math.max(3,I/f.length-2);return{width:B,height:M,padding:y,chartWidth:I,chartHeight:H,barWidth:U,gap:2}}function z(){const C=m.getContext("2d"),B=T();if(!B)return;const{width:M,height:y,padding:I,chartHeight:H,barWidth:U,gap:G}=B;if(l(0,m.width=M*window.devicePixelRatio,m),l(0,m.height=y*window.devicePixelRatio,m),l(0,m.style.width=M+"px",m),l(0,m.style.height=y+"px",m),C.scale(window.devicePixelRatio,window.devicePixelRatio),C.clearRect(0,0,M,y),f.length===0)return;C.strokeStyle="#21262d",C.lineWidth=1;const K=4;for(let J=0;J<=K;J++){const D=I.top+H/K*J;C.beginPath(),C.moveTo(I.left,D),C.lineTo(M-I.right,D),C.stroke();const X=Math.round(a-a/K*J);C.fillStyle="#6e7681",C.font="10px SFMono-Regular, Consolas, monospace",C.textAlign="right",C.fillText(Bt(X),I.left-8,D+3)}f.forEach((J,D)=>{const X=I.left+D*(U+G),Y=J.count/a*H,x=J.errors?J.errors/J.count*Y:0,de=J.warnings?J.warnings/J.count*Y:0,me=Y-x-de;let be=y-I.bottom;me>0&&(C.fillStyle=h===D?"#4ade80":"#3fb950",C.fillRect(X,be-me,U,me),be-=me),de>0&&(C.fillStyle=h===D?"#fbbf24":"#d29922",C.fillRect(X,be-de,U,de),be-=de),x>0&&(C.fillStyle=h===D?"#f87171":"#f85149",C.fillRect(X,be-x,U,x)),h===D&&(C.strokeStyle="#58a6ff",C.lineWidth=2,C.strokeRect(X-1,y-I.bottom-Y-1,U+2,Y+2))}),b&&(C.fillStyle="rgba(88, 166, 255, 0.2)",C.strokeStyle="#58a6ff",C.lineWidth=1,C.fillRect(b.x,I.top,b.width,H),C.strokeRect(b.x,I.top,b.width,H));const F=Math.min(6,f.length),Q=Math.floor(f.length/F);C.fillStyle="#6e7681",C.font="10px SFMono-Regular, Consolas, monospace",C.textAlign="center";for(let J=0;J<f.length;J+=Q){const D=I.left+J*(U+G)+U/2,X=La(f[J].time);C.fillText(X,D,y-8)}C.strokeStyle="#30363d",C.lineWidth=1,C.beginPath(),C.moveTo(I.left,y-I.bottom),C.lineTo(M-I.right,y-I.bottom),C.stroke()}function q(C){const B=T();if(!B)return;const M=m.getBoundingClientRect(),y=C.clientX-M.left,{padding:I,barWidth:H,gap:U}=B,G=Math.floor((y-I.left)/(H+U));if(G>=0&&G<f.length&&y>=I.left){h=G;const K=f[G];if(l(3,p={show:!0,x:C.clientX-M.left,y:C.clientY-M.top-10,data:K}),k&&w!==null){S=G;const F=I.left+Math.min(w,S)*(H+U),Q=I.left+(Math.max(w,S)+1)*(H+U)-U;b={x:F,width:Q-F},z()}}else h=-1,l(3,p.show=!1,p);z()}function L(){h=-1,l(3,p.show=!1,p),k||(b=null),z()}function R(C){const B=T();if(!B)return;const M=m.getBoundingClientRect(),y=C.clientX-M.left,{padding:I,barWidth:H,gap:U}=B,G=Math.floor((y-I.left)/(H+U));G>=0&&G<f.length&&(k=!0,w=G,S=G)}function P(){var C,B;if(k&&w!==null&&S!==null&&w!==S){const M=Math.min(w,S),y=Math.max(w,S),I=(C=f[M])==null?void 0:C.time,H=(B=f[y])==null?void 0:B.time;I&&H&&_("zoom",{start:I,end:H})}k=!1,w=null,S=null,b=null,z()}Zt(()=>{const C=new ResizeObserver(()=>{f.length>0&&z()});return C.observe(v),()=>C.disconnect()});function A(C){nl[C?"unshift":"push"](()=>{m=C,l(0,m)})}function j(C){nl[C?"unshift":"push"](()=>{v=C,l(2,v)})}return t.$$.update=()=>{t.$$.dirty&4096&&l(1,n=f.reduce((C,B)=>C+B.count,0)),t.$$.dirty&4096&&(a=Math.max(...f.map(C=>C.count),1)),t.$$.dirty&4098&&l(6,c=f.length>0?Math.round(n/f.length):0),t.$$.dirty&4096&&l(5,o=f.reduce((C,B)=>C+(B.errors||0),0)),t.$$.dirty&4096&&l(4,u=f.reduce((C,B)=>C+(B.warnings||0),0)),t.$$.dirty&4097&&f.length>0&&m&&z()},[m,n,v,p,u,o,c,d,q,L,R,P,f,A,j]}class Ha extends bt{constructor(e){super(),mt(this,e,Ta,Ma,ut,{})}}function ai(t,e,l){const n=t.slice();return n[22]=e[l],n}function za(t){let e,l=ie(t[0]),n=[];for(let a=0;a<l.length;a+=1)n[a]=oi(ai(t,l,a));return{c(){e=r("ul");for(let a=0;a<n.length;a+=1)n[a].c();i(e,"class","svelte-1octqfx")},m(a,c){N(a,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(a,c){if(c&193){l=ie(a[0]);let o;for(o=0;o<l.length;o+=1){const u=ai(a,l,o);n[o]?n[o].p(u,c):(n[o]=oi(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(a){a&&O(e),Je(n,a)}}}function Ra(t){let e;return{c(){e=r("p"),e.textContent="No saved searches",i(e,"class","empty svelte-1octqfx")},m(l,n){N(l,e,n)},p:le,d(l){l&&O(e)}}}function oi(t){let e,l,n,a=t[22].name+"",c,o,u,f=t[22].query+"",d,_,m,v,p,h;function k(){return t[12](t[22])}function w(){return t[13](t[22])}return{c(){e=r("li"),l=r("button"),n=r("span"),c=E(a),o=g(),u=r("span"),d=E(f),_=g(),m=r("button"),m.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M9.5 3L3 9.5M3 3l6.5 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',v=g(),i(n,"class","name svelte-1octqfx"),i(u,"class","query svelte-1octqfx"),i(l,"class","search-item svelte-1octqfx"),i(m,"class","btn-delete svelte-1octqfx"),i(e,"class","svelte-1octqfx")},m(S,b){N(S,e,b),s(e,l),s(l,n),s(n,c),s(l,o),s(l,u),s(u,d),s(e,_),s(e,m),s(e,v),p||(h=[V(l,"click",k),V(m,"click",je(w))],p=!0)},p(S,b){t=S,b&1&&a!==(a=t[22].name+"")&&Z(c,a),b&1&&f!==(f=t[22].query+"")&&Z(d,f)},d(S){S&&O(e),p=!1,Me(h)}}}function ci(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C;return{c(){e=r("div"),l=r("div"),n=r("h3"),n.textContent="Save Search",a=g(),c=r("label"),o=E(`Name
        `),u=r("input"),f=g(),d=r("label"),_=E(`Query
        `),m=r("input"),v=g(),p=r("label"),h=E(`Time Range
        `),k=r("select"),w=r("option"),w.textContent="5 minutes",S=r("option"),S.textContent="15 minutes",b=r("option"),b.textContent="1 hour",T=r("option"),T.textContent="24 hours",z=r("option"),z.textContent="7 days",q=g(),L=r("div"),R=r("button"),R.textContent="Cancel",P=g(),A=r("button"),A.textContent="Save",i(n,"class","svelte-1octqfx"),i(u,"type","text"),i(u,"placeholder","Error logs"),i(u,"class","svelte-1octqfx"),i(c,"class","svelte-1octqfx"),i(m,"type","text"),i(m,"placeholder","level:ERROR"),i(m,"class","svelte-1octqfx"),i(d,"class","svelte-1octqfx"),w.__value="5m",se(w,w.__value),S.__value="15m",se(S,S.__value),b.__value="1h",se(b,b.__value),T.__value="24h",se(T,T.__value),z.__value="7d",se(z,z.__value),i(k,"class","svelte-1octqfx"),t[4]===void 0&&Vt(()=>t[16].call(k)),i(p,"class","svelte-1octqfx"),i(R,"class","btn svelte-1octqfx"),i(A,"class","btn primary svelte-1octqfx"),i(L,"class","actions svelte-1octqfx"),i(l,"class","modal svelte-1octqfx"),i(l,"role","document"),i(e,"class","modal-overlay svelte-1octqfx"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(B,M){N(B,e,M),s(e,l),s(l,n),s(l,a),s(l,c),s(c,o),s(c,u),se(u,t[2]),s(l,f),s(l,d),s(d,_),s(d,m),se(m,t[3]),s(l,v),s(l,p),s(p,h),s(p,k),s(k,w),s(k,S),s(k,b),s(k,T),s(k,z),pt(k,t[4],!0),s(l,q),s(l,L),s(L,R),s(L,P),s(L,A),j||(C=[V(u,"input",t[14]),V(m,"input",t[15]),V(k,"change",t[16]),V(R,"click",t[17]),V(A,"click",t[5]),V(l,"click",je(t[9])),V(l,"keydown",je(t[10])),V(e,"click",t[18]),V(e,"keydown",t[19])],j=!0)},p(B,M){M&4&&u.value!==B[2]&&se(u,B[2]),M&8&&m.value!==B[3]&&se(m,B[3]),M&16&&pt(k,B[4])},d(B){B&&O(e),j=!1,Me(C)}}}function Ba(t){let e,l,n,a,c,o,u,f,d,_;function m(k,w){return k[0].length===0?Ra:za}let v=m(t),p=v(t),h=t[1]&&ci(t);return{c(){e=r("div"),l=r("div"),n=r("h3"),n.textContent="Saved Searches",a=g(),c=r("button"),c.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 1v12M1 7h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>',o=g(),p.c(),u=g(),h&&h.c(),f=jl(),i(n,"class","svelte-1octqfx"),i(c,"class","btn-icon svelte-1octqfx"),i(c,"title","Save current search"),i(l,"class","header svelte-1octqfx"),i(e,"class","saved-searches svelte-1octqfx")},m(k,w){N(k,e,w),s(e,l),s(l,n),s(l,a),s(l,c),s(e,o),p.m(e,null),N(k,u,w),h&&h.m(k,w),N(k,f,w),d||(_=V(c,"click",t[11]),d=!0)},p(k,[w]){v===(v=m(k))&&p?p.p(k,w):(p.d(1),p=v(k),p&&(p.c(),p.m(e,null))),k[1]?h?h.p(k,w):(h=ci(k),h.c(),h.m(f.parentNode,f)):h&&(h.d(1),h=null)},i:le,o:le,d(k){k&&(O(e),O(u),O(f)),p.d(),h&&h.d(k),d=!1,_()}}}const Fl="/api";function Aa(t,e,l){const n=Bl();let a=[],c=!1,o="",u="",f="15m";Zt(d);async function d(){try{const j=await(await fetch(`${Fl}/saved-searches`)).json();l(0,a=j.searches||[])}catch(A){console.error("Failed to load saved searches:",A)}}async function _(){if(!(!o||!u))try{await fetch(`${Fl}/saved-searches`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:o,query:u,time_range:f})}),l(1,c=!1),l(2,o=""),l(3,u=""),await d()}catch(A){console.error("Failed to save search:",A)}}async function m(A){try{await fetch(`${Fl}/saved-searches/${A}`,{method:"DELETE"}),await d()}catch(j){console.error("Failed to delete search:",j)}}function v(A){n("apply",{query:A.query,timeRange:A.time_range})}function p(A,j){l(3,u=A),l(4,f=j),l(1,c=!0)}function h(A){ql.call(this,t,A)}function k(A){ql.call(this,t,A)}const w=()=>l(1,c=!0),S=A=>v(A),b=A=>m(A.id);function T(){o=this.value,l(2,o)}function z(){u=this.value,l(3,u)}function q(){f=Hl(this),l(4,f)}return[a,c,o,u,f,_,m,v,p,h,k,w,S,b,T,z,q,()=>l(1,c=!1),()=>l(1,c=!1),A=>A.key==="Escape"&&l(1,c=!1)]}class Ea extends bt{constructor(e){super(),mt(this,e,Aa,Ba,ut,{openSaveModal:8})}get openSaveModal(){return this.$$.ctx[8]}}function ri(t,e,l){const n=t.slice();return n[26]=e[l],n}function Oa(t){let e,l=ie(t[0]),n=[];for(let a=0;a<l.length;a+=1)n[a]=fi(ri(t,l,a));return{c(){e=r("ul");for(let a=0;a<n.length;a+=1)n[a].c();i(e,"class","svelte-ib4i4r")},m(a,c){N(a,e,c);for(let o=0;o<n.length;o+=1)n[o]&&n[o].m(e,null)},p(a,c){if(c&209){l=ie(a[0]);let o;for(o=0;o<l.length;o+=1){const u=ri(a,l,o);n[o]?n[o].p(u,c):(n[o]=fi(u),n[o].c(),n[o].m(e,null))}for(;o<n.length;o+=1)n[o].d(1);n.length=l.length}},d(a){a&&O(e),Je(n,a)}}}function Na(t){let e,l,n,a,c;return{c(){e=r("p"),e.textContent="No alerts configured",l=g(),n=r("button"),n.textContent="Enable notifications",i(e,"class","empty svelte-ib4i4r"),i(n,"class","btn-small svelte-ib4i4r")},m(o,u){N(o,e,u),N(o,l,u),N(o,n,u),a||(c=V(n,"click",Va),a=!0)},p:le,d(o){o&&(O(e),O(l),O(n)),a=!1,c()}}}function qa(t){let e,l;return{c(){e=$("svg"),l=$("circle"),i(l,"cx","7"),i(l,"cy","7"),i(l,"r","5"),i(l,"fill","none"),i(l,"stroke","#6e7681"),i(l,"stroke-width","1.5"),i(e,"width","14"),i(e,"height","14"),i(e,"viewBox","0 0 14 14")},m(n,a){N(n,e,a),s(e,l)},d(n){n&&O(e)}}}function ja(t){let e,l;return{c(){e=$("svg"),l=$("circle"),i(l,"cx","7"),i(l,"cy","7"),i(l,"r","5"),i(l,"fill","#3fb950"),i(e,"width","14"),i(e,"height","14"),i(e,"viewBox","0 0 14 14")},m(n,a){N(n,e,a),s(e,l)},d(n){n&&O(e)}}}function fi(t){let e,l,n,a=t[26].name+"",c,o,u,f=(t[26].query||"All logs")+"",d,_,m=t[26].threshold+"",v,p,h=t[26].window_minutes+"",k,w,S,b,T,z,q,L,R,P;function A(){return t[11](t[26])}function j(I,H){return I[26].enabled?ja:qa}let C=j(t),B=C(t);function M(){return t[12](t[26])}function y(){return t[13](t[26])}return{c(){e=r("li"),l=r("button"),n=r("span"),c=E(a),o=g(),u=r("span"),d=E(f),_=E(" >= "),v=E(m),p=E(" in "),k=E(h),w=E("m"),S=g(),b=r("button"),B.c(),z=g(),q=r("button"),q.innerHTML='<svg width="12" height="12" viewBox="0 0 12 12"><path fill="currentColor" d="M9.5 3L3 9.5M3 3l6.5 6.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"></path></svg>',L=g(),i(n,"class","name svelte-ib4i4r"),i(u,"class","details svelte-ib4i4r"),i(l,"class","alert-info svelte-ib4i4r"),i(b,"class","btn-toggle svelte-ib4i4r"),i(b,"title",T=t[26].enabled?"Disable":"Enable"),i(q,"class","btn-delete svelte-ib4i4r"),i(e,"class","svelte-ib4i4r"),ne(e,"disabled",!t[26].enabled)},m(I,H){N(I,e,H),s(e,l),s(l,n),s(n,c),s(l,o),s(l,u),s(u,d),s(u,_),s(u,v),s(u,p),s(u,k),s(u,w),s(e,S),s(e,b),B.m(b,null),s(e,z),s(e,q),s(e,L),R||(P=[V(l,"click",A),V(b,"click",je(M)),V(q,"click",je(y))],R=!0)},p(I,H){t=I,H&1&&a!==(a=t[26].name+"")&&Z(c,a),H&1&&f!==(f=(t[26].query||"All logs")+"")&&Z(d,f),H&1&&m!==(m=t[26].threshold+"")&&Z(v,m),H&1&&h!==(h=t[26].window_minutes+"")&&Z(k,h),C!==(C=j(t))&&(B.d(1),B=C(t),B&&(B.c(),B.m(b,null))),H&1&&T!==(T=t[26].enabled?"Disable":"Enable")&&i(b,"title",T),H&1&&ne(e,"disabled",!t[26].enabled)},d(I){I&&O(e),B.d(),R=!1,Me(P)}}}function ui(t){let e,l,n,a=t[2]?"Edit Alert":"Create Alert",c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C,B,M,y,I,H,U,G,K,F,Q,J=t[3].notify_type!=="browser"&&di(t);return{c(){e=r("div"),l=r("div"),n=r("h3"),c=E(a),o=g(),u=r("label"),f=E(`Name
        `),d=r("input"),_=g(),m=r("label"),v=E(`Query (optional)
        `),p=r("input"),h=g(),k=r("div"),w=r("label"),S=E(`Threshold
          `),b=r("input"),T=g(),z=r("label"),q=E(`Window (minutes)
          `),L=r("input"),R=g(),P=r("label"),A=E(`Notification Type
        `),j=r("select"),C=r("option"),C.textContent="Browser",B=r("option"),B.textContent="Webhook",M=r("option"),M.textContent="Slack",y=g(),J&&J.c(),I=g(),H=r("div"),U=r("button"),U.textContent="Cancel",G=g(),K=r("button"),K.textContent="Save",i(n,"class","svelte-ib4i4r"),i(d,"type","text"),i(d,"placeholder","High error rate"),i(d,"class","svelte-ib4i4r"),i(u,"class","svelte-ib4i4r"),i(p,"type","text"),i(p,"placeholder","level:ERROR"),i(p,"class","svelte-ib4i4r"),i(m,"class","svelte-ib4i4r"),i(b,"type","number"),i(b,"min","1"),i(b,"class","svelte-ib4i4r"),i(w,"class","svelte-ib4i4r"),i(L,"type","number"),i(L,"min","1"),i(L,"class","svelte-ib4i4r"),i(z,"class","svelte-ib4i4r"),i(k,"class","row svelte-ib4i4r"),C.__value="browser",se(C,C.__value),B.__value="webhook",se(B,B.__value),M.__value="slack",se(M,M.__value),i(j,"class","svelte-ib4i4r"),t[3].notify_type===void 0&&Vt(()=>t[18].call(j)),i(P,"class","svelte-ib4i4r"),i(U,"class","btn svelte-ib4i4r"),i(K,"class","btn primary svelte-ib4i4r"),i(H,"class","actions svelte-ib4i4r"),i(l,"class","modal svelte-ib4i4r"),i(l,"role","document"),i(e,"class","modal-overlay svelte-ib4i4r"),i(e,"role","dialog"),i(e,"aria-modal","true")},m(D,X){N(D,e,X),s(e,l),s(l,n),s(n,c),s(l,o),s(l,u),s(u,f),s(u,d),se(d,t[3].name),s(l,_),s(l,m),s(m,v),s(m,p),se(p,t[3].query),s(l,h),s(l,k),s(k,w),s(w,S),s(w,b),se(b,t[3].threshold),s(k,T),s(k,z),s(z,q),s(z,L),se(L,t[3].window_minutes),s(l,R),s(l,P),s(P,A),s(P,j),s(j,C),s(j,B),s(j,M),pt(j,t[3].notify_type,!0),s(l,y),J&&J.m(l,null),s(l,I),s(l,H),s(H,U),s(H,G),s(H,K),F||(Q=[V(d,"input",t[14]),V(p,"input",t[15]),V(b,"input",t[16]),V(L,"input",t[17]),V(j,"change",t[18]),V(U,"click",t[20]),V(K,"click",t[5]),V(l,"click",je(t[8])),V(l,"keydown",je(t[9])),V(e,"click",t[21]),V(e,"keydown",t[22])],F=!0)},p(D,X){X&4&&a!==(a=D[2]?"Edit Alert":"Create Alert")&&Z(c,a),X&8&&d.value!==D[3].name&&se(d,D[3].name),X&8&&p.value!==D[3].query&&se(p,D[3].query),X&8&&Nl(b.value)!==D[3].threshold&&se(b,D[3].threshold),X&8&&Nl(L.value)!==D[3].window_minutes&&se(L,D[3].window_minutes),X&8&&pt(j,D[3].notify_type),D[3].notify_type!=="browser"?J?J.p(D,X):(J=di(D),J.c(),J.m(l,I)):J&&(J.d(1),J=null)},d(D){D&&O(e),J&&J.d(),F=!1,Me(Q)}}}function di(t){let e,l=t[3].notify_type==="slack"?"Slack Webhook URL":"Webhook URL",n,a,c,o,u;return{c(){e=r("label"),n=E(l),a=g(),c=r("input"),i(c,"type","url"),i(c,"placeholder","https://..."),i(c,"class","svelte-ib4i4r"),i(e,"class","svelte-ib4i4r")},m(f,d){N(f,e,d),s(e,n),s(e,a),s(e,c),se(c,t[3].notify_target),o||(u=V(c,"input",t[19]),o=!0)},p(f,d){d&8&&l!==(l=f[3].notify_type==="slack"?"Slack Webhook URL":"Webhook URL")&&Z(n,l),d&8&&c.value!==f[3].notify_target&&se(c,f[3].notify_target)},d(f){f&&O(e),o=!1,u()}}}function Ia(t){let e,l,n,a,c,o,u,f,d,_;function m(k,w){return k[0].length===0?Na:Oa}let v=m(t),p=v(t),h=t[1]&&ui(t);return{c(){e=r("div"),l=r("div"),n=r("h3"),n.textContent="Alerts",a=g(),c=r("button"),c.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14"><path fill="currentColor" d="M7 1v12M1 7h12" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg>',o=g(),p.c(),u=g(),h&&h.c(),f=jl(),i(n,"class","svelte-ib4i4r"),i(c,"class","btn-icon svelte-ib4i4r"),i(c,"title","Create alert"),i(l,"class","header svelte-ib4i4r"),i(e,"class","alerts-panel svelte-ib4i4r")},m(k,w){N(k,e,w),s(e,l),s(l,n),s(l,a),s(l,c),s(e,o),p.m(e,null),N(k,u,w),h&&h.m(k,w),N(k,f,w),d||(_=V(c,"click",t[10]),d=!0)},p(k,[w]){v===(v=m(k))&&p?p.p(k,w):(p.d(1),p=v(k),p&&(p.c(),p.m(e,null))),k[1]?h?h.p(k,w):(h=ui(k),h.c(),h.m(f.parentNode,f)):h&&(h.d(1),h=null)},i:le,o:le,d(k){k&&(O(e),O(u),O(f)),p.d(),h&&h.d(k),d=!1,_()}}}const pl="/api";function Pa(t){"Notification"in window&&Notification.permission==="granted"&&new Notification(`Alert: ${t.name}`,{body:`${t.count} logs matched "${t.query}"`,icon:"/favicon.ico"})}function Va(){"Notification"in window&&Notification.requestPermission()}function Za(t,e,l){let n=[],a=!1,c=null,o={name:"",query:"",threshold:10,window_minutes:5,notify_type:"webhook",notify_target:""},u;Zt(()=>{f(),u=setInterval(d,6e4)}),Ii(()=>{u&&clearInterval(u)});async function f(){try{const y=await(await fetch(`${pl}/alerts`)).json();l(0,n=y.alerts||[])}catch(M){console.error("Failed to load alerts:",M)}}async function d(){try{const y=await(await fetch(`${pl}/alerts/check`,{method:"POST"})).json();if(y.triggered&&y.triggered.length>0){for(const I of y.triggered)Pa(I);await f()}}catch(M){console.error("Alert check failed:",M)}}function _(M=null){M?(l(2,c=M),l(3,o={name:M.name,query:M.query,threshold:M.threshold,window_minutes:M.window_minutes,notify_type:M.notify_type,notify_target:M.notify_target})):(l(2,c=null),l(3,o={name:"",query:"",threshold:10,window_minutes:5,notify_type:"webhook",notify_target:""})),l(1,a=!0)}async function m(){if(o.name)try{c?await fetch(`${pl}/alerts/${c.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}):await fetch(`${pl}/alerts`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)}),l(1,a=!1),await f()}catch(M){console.error("Failed to save alert:",M)}}async function v(M){try{await fetch(`${pl}/alerts/${M.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({enabled:M.enabled?0:1})}),await f()}catch(y){console.error("Failed to toggle alert:",y)}}async function p(M){if(confirm("Delete this alert?"))try{await fetch(`${pl}/alerts/${M}`,{method:"DELETE"}),await f()}catch(y){console.error("Failed to delete alert:",y)}}function h(M){ql.call(this,t,M)}function k(M){ql.call(this,t,M)}const w=()=>_(),S=M=>_(M),b=M=>v(M),T=M=>p(M.id);function z(){o.name=this.value,l(3,o)}function q(){o.query=this.value,l(3,o)}function L(){o.threshold=Nl(this.value),l(3,o)}function R(){o.window_minutes=Nl(this.value),l(3,o)}function P(){o.notify_type=Hl(this),l(3,o)}function A(){o.notify_target=this.value,l(3,o)}return[n,a,c,o,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,()=>l(1,a=!1),()=>l(1,a=!1),M=>M.key==="Escape"&&l(1,a=!1)]}class Da extends bt{constructor(e){super(),mt(this,e,Za,Ia,ut,{})}}function vi(t,e,l){const n=t.slice();return n[8]=e[l],n}function hi(t,e,l){const n=t.slice();return n[11]=e[l],n}function pi(t){let e,l;return{c(){e=r("div"),l=E(t[5]),i(e,"class","error-banner svelte-lvtv3e")},m(n,a){N(n,e,a),s(e,l)},p(n,a){a&32&&Z(l,n[5])},d(n){n&&O(e)}}}function Fa(t){var es,ts,ls,ss,ns,is,as,os,cs,rs,fs,us,ds,vs,hs,ps,_s,gs,ms,bs,ks,ws,ys,Cs,Ss;let e,l,n,a,c,o,u,f,d=Ge((es=t[0])==null?void 0:es.total_logs)+"",_,m,v,p,h,k,w,S,b,T=(((ts=t[0])==null?void 0:ts.db_size_mb)||0)+"",z,q,L,R,P,A,j,C,B,M,y=(((ss=(ls=t[1])==null?void 0:ls.server)==null?void 0:ss.uptime)||"-")+"",I,H,U,G,K,F,Q,J,D,X=(((is=(ns=t[1])==null?void 0:ns.requests)==null?void 0:is.per_minute)||0)+"",Y,x,de,me,be,Ce,we,Fe,He,ce,pe,ze,ve,fe=(((os=(as=t[1])==null?void 0:as.cache)==null?void 0:os.hit_rate)||"0%")+"",ue,ae,_e,$e,At,nt,kt=(((rs=(cs=t[1])==null?void 0:cs.cache)==null?void 0:rs.size)||0)+"",wt,Dt,Re,ye,re,it,ke,Et,bl,Ft,yt=Ge((us=(fs=t[1])==null?void 0:fs.clickhouse)==null?void 0:us.queries_total)+"",il,Wt,Ct,Ot,kl,Be,Ke=(((vs=(ds=t[1])==null?void 0:ds.clickhouse)==null?void 0:vs.avg_query_time)||"-")+"",We,al,vt,Ut,ol,Jt,Kt=Ge((ps=(hs=t[1])==null?void 0:hs.clickhouse)==null?void 0:ps.errors_total)+"",Nt,wl,Ue,Xt,cl,St,ot,Qt,Gt,xe=Ge((gs=(_s=t[1])==null?void 0:_s.ingestion)==null?void 0:gs.total)+"",Mt,yl,et,Xe,rl,Yt,ct=Pt((bs=(ms=t[1])==null?void 0:ms.clickhouse)==null?void 0:bs.bytes_inserted)+"",fl,qt,Lt,Tt,ul,$t,Oe=(((ws=(ks=t[1])==null?void 0:ks.clickhouse)==null?void 0:ws.buffer_size)||0)+"",ht,Ne,Ie,Le,Cl,rt,tt,Pe,Ae,xt=Ge((ys=t[0])==null?void 0:ys.total_rows)+"",jt,ft,Se,Ee,Sl,Ht,lt=(((Cs=t[0])==null?void 0:Cs.oldest_log)||"-")+"",qe,Ve,zt,el,Ml,W,ge=(((Ss=t[0])==null?void 0:Ss.newest_log)||"-")+"",Ze,dl,It,oe,Te=t[3].length>0&&_i(t),Qe=t[2].length>0&&mi(t);return{c(){e=r("section"),l=r("div"),n=r("div"),n.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"></path></svg>',a=g(),c=r("div"),o=r("span"),o.textContent="Total Logs",u=g(),f=r("span"),_=E(d),m=g(),v=r("div"),p=r("div"),p.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="2" y="2" width="20" height="8" rx="2"></rect><rect x="2" y="14" width="20" height="8" rx="2"></rect><line x1="6" y1="6" x2="6.01" y2="6"></line><line x1="6" y1="18" x2="6.01" y2="18"></line></svg>',h=g(),k=r("div"),w=r("span"),w.textContent="Database Size",S=g(),b=r("span"),z=E(T),q=E(" MB"),L=g(),R=r("div"),P=r("div"),P.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="10"></circle><polyline points="12,6 12,12 16,14"></polyline></svg>',A=g(),j=r("div"),C=r("span"),C.textContent="Uptime",B=g(),M=r("span"),I=E(y),H=g(),U=r("div"),G=r("div"),G.innerHTML='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 12h-4l-3 9L9 3l-3 9H2"></path></svg>',K=g(),F=r("div"),Q=r("span"),Q.textContent="Requests/min",J=g(),D=r("span"),Y=E(X),x=g(),de=r("section"),me=r("h2"),me.textContent="ClickHouse Performance",be=g(),Ce=r("div"),we=r("div"),Fe=r("h3"),Fe.textContent="Cache",He=g(),ce=r("div"),pe=r("span"),pe.textContent="Hit Rate",ze=g(),ve=r("span"),ue=E(fe),ae=g(),_e=r("div"),$e=r("span"),$e.textContent="Size",At=g(),nt=r("span"),wt=E(kt),Dt=E(" entries"),Re=g(),ye=r("div"),re=r("h3"),re.textContent="Queries",it=g(),ke=r("div"),Et=r("span"),Et.textContent="Total",bl=g(),Ft=r("span"),il=E(yt),Wt=g(),Ct=r("div"),Ot=r("span"),Ot.textContent="Avg Time",kl=g(),Be=r("span"),We=E(Ke),al=g(),vt=r("div"),Ut=r("span"),Ut.textContent="Errors",ol=g(),Jt=r("span"),Nt=E(Kt),wl=g(),Ue=r("div"),Xt=r("h3"),Xt.textContent="Ingestion",cl=g(),St=r("div"),ot=r("span"),ot.textContent="Total Inserted",Qt=g(),Gt=r("span"),Mt=E(xe),yl=g(),et=r("div"),Xe=r("span"),Xe.textContent="Bytes",rl=g(),Yt=r("span"),fl=E(ct),qt=g(),Lt=r("div"),Tt=r("span"),Tt.textContent="Buffer",ul=g(),$t=r("span"),ht=E(Oe),Ne=g(),Ie=r("div"),Le=r("h3"),Le.textContent="Storage",Cl=g(),rt=r("div"),tt=r("span"),tt.textContent="Total Rows",Pe=g(),Ae=r("span"),jt=E(xt),ft=g(),Se=r("div"),Ee=r("span"),Ee.textContent="Oldest Log",Sl=g(),Ht=r("span"),qe=E(lt),Ve=g(),zt=r("div"),el=r("span"),el.textContent="Newest Log",Ml=g(),W=r("span"),Ze=E(ge),dl=g(),Te&&Te.c(),It=g(),Qe&&Qe.c(),oe=jl(),i(n,"class","stat-icon blue svelte-lvtv3e"),i(o,"class","stat-label svelte-lvtv3e"),i(f,"class","stat-value svelte-lvtv3e"),i(c,"class","stat-content svelte-lvtv3e"),i(l,"class","stat-card svelte-lvtv3e"),i(p,"class","stat-icon green svelte-lvtv3e"),i(w,"class","stat-label svelte-lvtv3e"),i(b,"class","stat-value svelte-lvtv3e"),i(k,"class","stat-content svelte-lvtv3e"),i(v,"class","stat-card svelte-lvtv3e"),i(P,"class","stat-icon purple svelte-lvtv3e"),i(C,"class","stat-label svelte-lvtv3e"),i(M,"class","stat-value svelte-lvtv3e"),i(j,"class","stat-content svelte-lvtv3e"),i(R,"class","stat-card svelte-lvtv3e"),i(G,"class","stat-icon orange svelte-lvtv3e"),i(Q,"class","stat-label svelte-lvtv3e"),i(D,"class","stat-value svelte-lvtv3e"),i(F,"class","stat-content svelte-lvtv3e"),i(U,"class","stat-card svelte-lvtv3e"),i(e,"class","stats-grid svelte-lvtv3e"),i(me,"class","svelte-lvtv3e"),i(Fe,"class","svelte-lvtv3e"),i(pe,"class","svelte-lvtv3e"),i(ve,"class","value svelte-lvtv3e"),i(ce,"class","metric-row svelte-lvtv3e"),i($e,"class","svelte-lvtv3e"),i(nt,"class","value svelte-lvtv3e"),i(_e,"class","metric-row svelte-lvtv3e"),i(we,"class","metric-card svelte-lvtv3e"),i(re,"class","svelte-lvtv3e"),i(Et,"class","svelte-lvtv3e"),i(Ft,"class","value svelte-lvtv3e"),i(ke,"class","metric-row svelte-lvtv3e"),i(Ot,"class","svelte-lvtv3e"),i(Be,"class","value svelte-lvtv3e"),i(Ct,"class","metric-row svelte-lvtv3e"),i(Ut,"class","svelte-lvtv3e"),i(Jt,"class","value error svelte-lvtv3e"),i(vt,"class","metric-row svelte-lvtv3e"),i(ye,"class","metric-card svelte-lvtv3e"),i(Xt,"class","svelte-lvtv3e"),i(ot,"class","svelte-lvtv3e"),i(Gt,"class","value svelte-lvtv3e"),i(St,"class","metric-row svelte-lvtv3e"),i(Xe,"class","svelte-lvtv3e"),i(Yt,"class","value svelte-lvtv3e"),i(et,"class","metric-row svelte-lvtv3e"),i(Tt,"class","svelte-lvtv3e"),i($t,"class","value svelte-lvtv3e"),i(Lt,"class","metric-row svelte-lvtv3e"),i(Ue,"class","metric-card svelte-lvtv3e"),i(Le,"class","svelte-lvtv3e"),i(tt,"class","svelte-lvtv3e"),i(Ae,"class","value svelte-lvtv3e"),i(rt,"class","metric-row svelte-lvtv3e"),i(Ee,"class","svelte-lvtv3e"),i(Ht,"class","value small svelte-lvtv3e"),i(Se,"class","metric-row svelte-lvtv3e"),i(el,"class","svelte-lvtv3e"),i(W,"class","value small svelte-lvtv3e"),i(zt,"class","metric-row svelte-lvtv3e"),i(Ie,"class","metric-card svelte-lvtv3e"),i(Ce,"class","metrics-grid svelte-lvtv3e"),i(de,"class","metrics-section svelte-lvtv3e")},m(ee,he){N(ee,e,he),s(e,l),s(l,n),s(l,a),s(l,c),s(c,o),s(c,u),s(c,f),s(f,_),s(e,m),s(e,v),s(v,p),s(v,h),s(v,k),s(k,w),s(k,S),s(k,b),s(b,z),s(b,q),s(e,L),s(e,R),s(R,P),s(R,A),s(R,j),s(j,C),s(j,B),s(j,M),s(M,I),s(e,H),s(e,U),s(U,G),s(U,K),s(U,F),s(F,Q),s(F,J),s(F,D),s(D,Y),N(ee,x,he),N(ee,de,he),s(de,me),s(de,be),s(de,Ce),s(Ce,we),s(we,Fe),s(we,He),s(we,ce),s(ce,pe),s(ce,ze),s(ce,ve),s(ve,ue),s(we,ae),s(we,_e),s(_e,$e),s(_e,At),s(_e,nt),s(nt,wt),s(nt,Dt),s(Ce,Re),s(Ce,ye),s(ye,re),s(ye,it),s(ye,ke),s(ke,Et),s(ke,bl),s(ke,Ft),s(Ft,il),s(ye,Wt),s(ye,Ct),s(Ct,Ot),s(Ct,kl),s(Ct,Be),s(Be,We),s(ye,al),s(ye,vt),s(vt,Ut),s(vt,ol),s(vt,Jt),s(Jt,Nt),s(Ce,wl),s(Ce,Ue),s(Ue,Xt),s(Ue,cl),s(Ue,St),s(St,ot),s(St,Qt),s(St,Gt),s(Gt,Mt),s(Ue,yl),s(Ue,et),s(et,Xe),s(et,rl),s(et,Yt),s(Yt,fl),s(Ue,qt),s(Ue,Lt),s(Lt,Tt),s(Lt,ul),s(Lt,$t),s($t,ht),s(Ce,Ne),s(Ce,Ie),s(Ie,Le),s(Ie,Cl),s(Ie,rt),s(rt,tt),s(rt,Pe),s(rt,Ae),s(Ae,jt),s(Ie,ft),s(Ie,Se),s(Se,Ee),s(Se,Sl),s(Se,Ht),s(Ht,qe),s(Ie,Ve),s(Ie,zt),s(zt,el),s(zt,Ml),s(zt,W),s(W,Ze),N(ee,dl,he),Te&&Te.m(ee,he),N(ee,It,he),Qe&&Qe.m(ee,he),N(ee,oe,he)},p(ee,he){var Ms,Ls,Ts,Hs,zs,Rs,Bs,As,Es,Os,Ns,qs,js,Is,Ps,Vs,Zs,Ds,Fs,Ws,Us,Js,Ks,Xs,Qs;he&1&&d!==(d=Ge((Ms=ee[0])==null?void 0:Ms.total_logs)+"")&&Z(_,d),he&1&&T!==(T=(((Ls=ee[0])==null?void 0:Ls.db_size_mb)||0)+"")&&Z(z,T),he&2&&y!==(y=(((Hs=(Ts=ee[1])==null?void 0:Ts.server)==null?void 0:Hs.uptime)||"-")+"")&&Z(I,y),he&2&&X!==(X=(((Rs=(zs=ee[1])==null?void 0:zs.requests)==null?void 0:Rs.per_minute)||0)+"")&&Z(Y,X),he&2&&fe!==(fe=(((As=(Bs=ee[1])==null?void 0:Bs.cache)==null?void 0:As.hit_rate)||"0%")+"")&&Z(ue,fe),he&2&&kt!==(kt=(((Os=(Es=ee[1])==null?void 0:Es.cache)==null?void 0:Os.size)||0)+"")&&Z(wt,kt),he&2&&yt!==(yt=Ge((qs=(Ns=ee[1])==null?void 0:Ns.clickhouse)==null?void 0:qs.queries_total)+"")&&Z(il,yt),he&2&&Ke!==(Ke=(((Is=(js=ee[1])==null?void 0:js.clickhouse)==null?void 0:Is.avg_query_time)||"-")+"")&&Z(We,Ke),he&2&&Kt!==(Kt=Ge((Vs=(Ps=ee[1])==null?void 0:Ps.clickhouse)==null?void 0:Vs.errors_total)+"")&&Z(Nt,Kt),he&2&&xe!==(xe=Ge((Ds=(Zs=ee[1])==null?void 0:Zs.ingestion)==null?void 0:Ds.total)+"")&&Z(Mt,xe),he&2&&ct!==(ct=Pt((Ws=(Fs=ee[1])==null?void 0:Fs.clickhouse)==null?void 0:Ws.bytes_inserted)+"")&&Z(fl,ct),he&2&&Oe!==(Oe=(((Js=(Us=ee[1])==null?void 0:Us.clickhouse)==null?void 0:Js.buffer_size)||0)+"")&&Z(ht,Oe),he&1&&xt!==(xt=Ge((Ks=ee[0])==null?void 0:Ks.total_rows)+"")&&Z(jt,xt),he&1&&lt!==(lt=(((Xs=ee[0])==null?void 0:Xs.oldest_log)||"-")+"")&&Z(qe,lt),he&1&&ge!==(ge=(((Qs=ee[0])==null?void 0:Qs.newest_log)||"-")+"")&&Z(Ze,ge),ee[3].length>0?Te?Te.p(ee,he):(Te=_i(ee),Te.c(),Te.m(It.parentNode,It)):Te&&(Te.d(1),Te=null),ee[2].length>0?Qe?Qe.p(ee,he):(Qe=mi(ee),Qe.c(),Qe.m(oe.parentNode,oe)):Qe&&(Qe.d(1),Qe=null)},d(ee){ee&&(O(e),O(x),O(de),O(dl),O(It),O(oe)),Te&&Te.d(ee),Qe&&Qe.d(ee)}}}function Wa(t){let e;return{c(){e=r("div"),e.textContent="Loading analytics...",i(e,"class","loading svelte-lvtv3e")},m(l,n){N(l,e,n)},p:le,d(l){l&&O(e)}}}function _i(t){let e,l,n,a,c,o,u,f=ie(t[3]),d=[];for(let _=0;_<f.length;_+=1)d[_]=gi(hi(t,f,_));return{c(){e=r("section"),l=r("h2"),l.textContent="Table Statistics",n=g(),a=r("table"),c=r("thead"),c.innerHTML='<tr class="svelte-lvtv3e"><th class="svelte-lvtv3e">Table</th> <th class="svelte-lvtv3e">Rows</th> <th class="svelte-lvtv3e">Size</th> <th class="svelte-lvtv3e">Partitions</th> <th class="svelte-lvtv3e">Avg Row Size</th></tr>',o=g(),u=r("tbody");for(let _=0;_<d.length;_+=1)d[_].c();i(l,"class","svelte-lvtv3e"),i(a,"class","data-table svelte-lvtv3e"),i(e,"class","table-section svelte-lvtv3e")},m(_,m){N(_,e,m),s(e,l),s(e,n),s(e,a),s(a,c),s(a,o),s(a,u);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(u,null)},p(_,m){if(m&8){f=ie(_[3]);let v;for(v=0;v<f.length;v+=1){const p=hi(_,f,v);d[v]?d[v].p(p,m):(d[v]=gi(p),d[v].c(),d[v].m(u,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=f.length}},d(_){_&&O(e),Je(d,_)}}}function gi(t){let e,l,n=t[11].table+"",a,c,o,u=Ge(t[11].rows)+"",f,d,_,m=Pt(t[11].bytes)+"",v,p,h,k=(t[11].partitions||"-")+"",w,S,b,T=(t[11].rows>0?Pt(t[11].bytes/t[11].rows):"-")+"",z,q;return{c(){e=r("tr"),l=r("td"),a=E(n),c=g(),o=r("td"),f=E(u),d=g(),_=r("td"),v=E(m),p=g(),h=r("td"),w=E(k),S=g(),b=r("td"),z=E(T),q=g(),i(l,"class","table-name svelte-lvtv3e"),i(o,"class","svelte-lvtv3e"),i(_,"class","svelte-lvtv3e"),i(h,"class","svelte-lvtv3e"),i(b,"class","svelte-lvtv3e"),i(e,"class","svelte-lvtv3e")},m(L,R){N(L,e,R),s(e,l),s(l,a),s(e,c),s(e,o),s(o,f),s(e,d),s(e,_),s(_,v),s(e,p),s(e,h),s(h,w),s(e,S),s(e,b),s(b,z),s(e,q)},p(L,R){R&8&&n!==(n=L[11].table+"")&&Z(a,n),R&8&&u!==(u=Ge(L[11].rows)+"")&&Z(f,u),R&8&&m!==(m=Pt(L[11].bytes)+"")&&Z(v,m),R&8&&k!==(k=(L[11].partitions||"-")+"")&&Z(w,k),R&8&&T!==(T=(L[11].rows>0?Pt(L[11].bytes/L[11].rows):"-")+"")&&Z(z,T)},d(L){L&&O(e)}}}function mi(t){let e,l,n,a,c,o,u,f=ie(t[2]),d=[];for(let _=0;_<f.length;_+=1)d[_]=bi(vi(t,f,_));return{c(){e=r("section"),l=r("h2"),l.textContent="Recent Slow Queries",n=g(),a=r("table"),c=r("thead"),c.innerHTML='<tr class="svelte-lvtv3e"><th class="svelte-lvtv3e">Query</th> <th class="svelte-lvtv3e">Duration</th> <th class="svelte-lvtv3e">Read Rows</th> <th class="svelte-lvtv3e">Memory</th></tr>',o=g(),u=r("tbody");for(let _=0;_<d.length;_+=1)d[_].c();i(l,"class","svelte-lvtv3e"),i(a,"class","data-table svelte-lvtv3e"),i(e,"class","table-section svelte-lvtv3e")},m(_,m){N(_,e,m),s(e,l),s(e,n),s(e,a),s(a,c),s(a,o),s(a,u);for(let v=0;v<d.length;v+=1)d[v]&&d[v].m(u,null)},p(_,m){if(m&4){f=ie(_[2]);let v;for(v=0;v<f.length;v+=1){const p=vi(_,f,v);d[v]?d[v].p(p,m):(d[v]=bi(p),d[v].c(),d[v].m(u,null))}for(;v<d.length;v+=1)d[v].d(1);d.length=f.length}},d(_){_&&O(e),Je(d,_)}}}function bi(t){var T;let e,l,n=((T=t[8].query)==null?void 0:T.substring(0,100))+"",a,c,o,u,f=ki(t[8].duration_ms)+"",d,_,m,v=Ge(t[8].read_rows)+"",p,h,k,w=Pt(t[8].memory_usage)+"",S,b;return{c(){e=r("tr"),l=r("td"),a=E(n),c=E("..."),o=g(),u=r("td"),d=E(f),_=g(),m=r("td"),p=E(v),h=g(),k=r("td"),S=E(w),b=g(),i(l,"class","query-text svelte-lvtv3e"),i(u,"class","svelte-lvtv3e"),i(m,"class","svelte-lvtv3e"),i(k,"class","svelte-lvtv3e"),i(e,"class","svelte-lvtv3e")},m(z,q){N(z,e,q),s(e,l),s(l,a),s(l,c),s(e,o),s(e,u),s(u,d),s(e,_),s(e,m),s(m,p),s(e,h),s(e,k),s(k,S),s(e,b)},p(z,q){var L;q&4&&n!==(n=((L=z[8].query)==null?void 0:L.substring(0,100))+"")&&Z(a,n),q&4&&f!==(f=ki(z[8].duration_ms)+"")&&Z(d,f),q&4&&v!==(v=Ge(z[8].read_rows)+"")&&Z(p,v),q&4&&w!==(w=Pt(z[8].memory_usage)+"")&&Z(S,w)},d(z){z&&O(e)}}}function Ua(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h=t[5]&&pi(t);function k(b,T){return b[4]&&!b[0]?Wa:Fa}let w=k(t),S=w(t);return{c(){e=r("div"),l=r("header"),n=r("h1"),n.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 3v18h18"></path><path d="M18 9l-5-6-4 8-3-2"></path></svg>
      Analytics`,a=g(),c=r("button"),o=$("svg"),u=$("path"),f=$("path"),d=E(`
      Refresh`),_=g(),h&&h.c(),m=g(),S.c(),i(n,"class","svelte-lvtv3e"),i(u,"d","M23 4v6h-6M1 20v-6h6"),i(f,"d","M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"),i(o,"width","14"),i(o,"height","14"),i(o,"viewBox","0 0 24 24"),i(o,"fill","none"),i(o,"stroke","currentColor"),i(o,"stroke-width","2"),i(o,"class","svelte-lvtv3e"),ne(o,"spinning",t[4]),i(c,"class","refresh-btn svelte-lvtv3e"),c.disabled=t[4],i(l,"class","page-header svelte-lvtv3e"),i(e,"class","analytics-page svelte-lvtv3e")},m(b,T){N(b,e,T),s(e,l),s(l,n),s(l,a),s(l,c),s(c,o),s(o,u),s(o,f),s(c,d),s(e,_),h&&h.m(e,null),s(e,m),S.m(e,null),v||(p=V(c,"click",t[6]),v=!0)},p(b,[T]){T&16&&ne(o,"spinning",b[4]),T&16&&(c.disabled=b[4]),b[5]?h?h.p(b,T):(h=pi(b),h.c(),h.m(e,m)):h&&(h.d(1),h=null),w===(w=k(b))&&S?S.p(b,T):(S.d(1),S=w(b),S&&(S.c(),S.m(e,null)))},i:le,o:le,d(b){b&&O(e),h&&h.d(),S.d(),v=!1,p()}}}const El="/api";function Pt(t){if(!t)return"0 B";const e=1024,l=["B","KB","MB","GB","TB"],n=Math.floor(Math.log(t)/Math.log(e));return parseFloat((t/Math.pow(e,n)).toFixed(2))+" "+l[n]}function Ge(t){return t?t.toLocaleString():"0"}function ki(t){return t?t<1e3?t.toFixed(0)+"ms":(t/1e3).toFixed(2)+"s":"0ms"}function Ja(t,e,l){let n=null,a=null,c=[],o=[],u=!0,f=null,d;async function _(){try{const[m,v,p,h]=await Promise.all([fetch(`${El}/stats`),fetch(`${El}/metrics/json`),fetch(`${El}/analytics/queries`),fetch(`${El}/analytics/tables`)]);if(l(0,n=await m.json()),l(1,a=await v.json()),p.ok){const k=await p.json();l(2,c=k.queries||[])}if(h.ok){const k=await h.json();l(3,o=k.tables||[])}l(5,f=null)}catch(m){l(5,f=m.message)}finally{l(4,u=!1)}}return Zt(()=>{_(),d=setInterval(_,1e4)}),Ii(()=>{d&&clearInterval(d)}),[n,a,c,o,u,f,_]}class Ka extends bt{constructor(e){super(),mt(this,e,Ja,Ua,ut,{})}}function wi(t,e,l){const n=t.slice();return n[20]=e[l],n}function yi(t,e,l){const n=t.slice();return n[20]=e[l],n}function Ci(t){let e;return{c(){e=r("span"),e.textContent="Saved!",i(e,"class","saved-indicator svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Si(t){let e,l=t[20].label+"",n;return{c(){e=r("option"),n=E(l),e.__value=t[20].value,se(e,e.__value)},m(a,c){N(a,e,c),s(e,n)},p:le,d(a){a&&O(e)}}}function Mi(t){let e,l=t[20].label+"",n;return{c(){e=r("option"),n=E(l),e.__value=t[20].value,se(e,e.__value)},m(a,c){N(a,e,c),s(e,n)},p:le,d(a){a&&O(e)}}}function Xa(t){let e;return{c(){e=r("span"),e.textContent="Not configured",i(e,"class","badge svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Qa(t){let e;return{c(){e=r("span"),e.textContent="Configured",i(e,"class","badge configured svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Li(t){let e,l=t[1]==="telegram"?"Sending...":"Send Test",n,a,c,o;return{c(){e=r("button"),n=E(l),i(e,"class","test-btn svelte-f00ld1"),e.disabled=a=t[1]==="telegram"},m(u,f){N(u,e,f),s(e,n),c||(o=V(e,"click",t[15]),c=!0)},p(u,f){f&2&&l!==(l=u[1]==="telegram"?"Sending...":"Send Test")&&Z(n,l),f&2&&a!==(a=u[1]==="telegram")&&(e.disabled=a)},d(u){u&&O(e),c=!1,o()}}}function Ti(t){let e,l=t[2].message+"",n;return{c(){e=r("span"),n=E(l),i(e,"class","test-result svelte-f00ld1"),ne(e,"success",t[2].success)},m(a,c){N(a,e,c),s(e,n)},p(a,c){c&4&&l!==(l=a[2].message+"")&&Z(n,l),c&4&&ne(e,"success",a[2].success)},d(a){a&&O(e)}}}function Ga(t){let e;return{c(){e=r("span"),e.textContent="Not configured",i(e,"class","badge svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Ya(t){let e;return{c(){e=r("span"),e.textContent="Configured",i(e,"class","badge configured svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Hi(t){let e,l=t[1]==="slack"?"Sending...":"Send Test",n,a,c,o;return{c(){e=r("button"),n=E(l),i(e,"class","test-btn svelte-f00ld1"),e.disabled=a=t[1]==="slack"},m(u,f){N(u,e,f),s(e,n),c||(o=V(e,"click",t[16]),c=!0)},p(u,f){f&2&&l!==(l=u[1]==="slack"?"Sending...":"Send Test")&&Z(n,l),f&2&&a!==(a=u[1]==="slack")&&(e.disabled=a)},d(u){u&&O(e),c=!1,o()}}}function zi(t){let e,l=t[2].message+"",n;return{c(){e=r("span"),n=E(l),i(e,"class","test-result svelte-f00ld1"),ne(e,"success",t[2].success)},m(a,c){N(a,e,c),s(e,n)},p(a,c){c&4&&l!==(l=a[2].message+"")&&Z(n,l),c&4&&ne(e,"success",a[2].success)},d(a){a&&O(e)}}}function $a(t){let e;return{c(){e=r("span"),e.textContent="Not configured",i(e,"class","badge svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function xa(t){let e;return{c(){e=r("span"),e.textContent="Configured",i(e,"class","badge configured svelte-f00ld1")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function Ri(t){let e,l=t[1]==="webhook"?"Sending...":"Send Test",n,a,c,o;return{c(){e=r("button"),n=E(l),i(e,"class","test-btn svelte-f00ld1"),e.disabled=a=t[1]==="webhook"},m(u,f){N(u,e,f),s(e,n),c||(o=V(e,"click",t[17]),c=!0)},p(u,f){f&2&&l!==(l=u[1]==="webhook"?"Sending...":"Send Test")&&Z(n,l),f&2&&a!==(a=u[1]==="webhook")&&(e.disabled=a)},d(u){u&&O(e),c=!1,o()}}}function Bi(t){let e,l=t[2].message+"",n;return{c(){e=r("span"),n=E(l),i(e,"class","test-result svelte-f00ld1"),ne(e,"success",t[2].success)},m(a,c){N(a,e,c),s(e,n)},p(a,c){c&4&&l!==(l=a[2].message+"")&&Z(n,l),c&4&&ne(e,"success",a[2].success)},d(a){a&&O(e)}}}function eo(t){var zt,el,Ml;let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C,B,M,y,I,H,U,G,K,F,Q,J,D,X,Y,x,de,me,be,Ce,we,Fe,He,ce,pe,ze,ve,fe,ue,ae,_e,$e,At,nt,kt,wt,Dt,Re,ye,re,it,ke,Et,bl,Ft,yt,il,Wt,Ct,Ot,kl,Be,Ke,We,al,vt,Ut,ol,Jt,Kt,Nt,wl,Ue,Xt,cl,St,ot,Qt,Gt,xe,Mt,yl,et,Xe,rl,Yt,ct,fl,qt,Lt,Tt,ul,$t,Oe=t[3]&&Ci(),ht=ie(t[4]),Ne=[];for(let W=0;W<ht.length;W+=1)Ne[W]=Si(yi(t,ht,W));let Ie=ie(t[5]),Le=[];for(let W=0;W<Ie.length;W+=1)Le[W]=Mi(wi(t,Ie,W));function Cl(W,ge){return W[0].notifications.telegram.configured?Qa:Xa}let rt=Cl(t),tt=rt(t),Pe=t[0].notifications.telegram.configured&&Li(t),Ae=((zt=t[2])==null?void 0:zt.type)==="telegram"&&Ti(t);function xt(W,ge){return W[0].notifications.slack.configured?Ya:Ga}let jt=xt(t),ft=jt(t),Se=t[0].notifications.slack.configured&&Hi(t),Ee=((el=t[2])==null?void 0:el.type)==="slack"&&zi(t);function Sl(W,ge){return W[0].notifications.webhook.configured?xa:$a}let Ht=Sl(t),lt=Ht(t),qe=t[0].notifications.webhook.configured&&Ri(t),Ve=((Ml=t[2])==null?void 0:Ml.type)==="webhook"&&Bi(t);return{c(){e=r("div"),l=r("header"),n=r("h1"),n.innerHTML=`<svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path></svg>
      Settings`,a=g(),Oe&&Oe.c(),c=g(),o=r("section"),u=r("h2"),u.textContent="Display",f=g(),d=r("div"),_=r("div"),_.innerHTML='<label for="time-range" class="svelte-f00ld1">Default Time Range</label> <span class="setting-desc svelte-f00ld1">Initial time range when loading the dashboard</span>',m=g(),v=r("select");for(let W=0;W<Ne.length;W+=1)Ne[W].c();p=g(),h=r("div"),k=r("div"),k.innerHTML='<label for="auto-refresh" class="svelte-f00ld1">Auto Refresh</label> <span class="setting-desc svelte-f00ld1">Automatically refresh log data</span>',w=g(),S=r("select");for(let W=0;W<Le.length;W+=1)Le[W].c();b=g(),T=r("div"),z=r("div"),z.innerHTML='<label for="max-results" class="svelte-f00ld1">Max Results</label> <span class="setting-desc svelte-f00ld1">Maximum logs to fetch per query</span>',q=g(),L=r("select"),R=r("option"),R.textContent="100",P=r("option"),P.textContent="250",A=r("option"),A.textContent="500",j=r("option"),j.textContent="1000",C=g(),B=r("div"),M=r("div"),M.innerHTML='<span class="setting-label svelte-f00ld1">Show Host Column</span> <span class="setting-desc svelte-f00ld1">Display host column in log table by default</span>',y=g(),I=r("label"),H=r("input"),U=g(),G=r("span"),K=g(),F=r("div"),Q=r("div"),Q.innerHTML='<span class="setting-label svelte-f00ld1">Compact Mode</span> <span class="setting-desc svelte-f00ld1">Reduce padding for more logs on screen</span>',J=g(),D=r("label"),X=r("input"),Y=g(),x=r("span"),de=g(),me=r("section"),be=r("h2"),be.textContent="Alert Notifications",Ce=g(),we=r("p"),we.textContent="Configure notification channels for alerts. Set environment variables on the server to enable.",Fe=g(),He=r("div"),ce=r("div"),pe=r("div"),ze=$("svg"),ve=$("path"),fe=g(),ue=r("span"),ue.textContent="Telegram",ae=g(),tt.c(),_e=g(),$e=r("p"),$e.textContent="Receive alerts via Telegram bot",At=g(),nt=r("div"),nt.innerHTML='<code class="svelte-f00ld1">PURL_TELEGRAM_BOT_TOKEN</code> <code class="svelte-f00ld1">PURL_TELEGRAM_CHAT_ID</code>',kt=g(),Pe&&Pe.c(),wt=g(),Ae&&Ae.c(),Dt=g(),Re=r("div"),ye=r("div"),re=$("svg"),it=$("path"),ke=g(),Et=r("span"),Et.textContent="Slack",bl=g(),ft.c(),Ft=g(),yt=r("p"),yt.textContent="Post alerts to Slack channel",il=g(),Wt=r("div"),Wt.innerHTML='<code class="svelte-f00ld1">PURL_SLACK_WEBHOOK_URL</code>',Ct=g(),Se&&Se.c(),Ot=g(),Ee&&Ee.c(),kl=g(),Be=r("div"),Ke=r("div"),We=$("svg"),al=$("path"),vt=$("path"),Ut=g(),ol=r("span"),ol.textContent="Webhook",Jt=g(),lt.c(),Kt=g(),Nt=r("p"),Nt.textContent="Send alerts to custom HTTP endpoint",wl=g(),Ue=r("div"),Ue.innerHTML='<code class="svelte-f00ld1">PURL_ALERT_WEBHOOK_URL</code>',Xt=g(),qe&&qe.c(),cl=g(),Ve&&Ve.c(),St=g(),ot=r("section"),Qt=r("h2"),Qt.textContent="Data Management",Gt=g(),xe=r("div"),Mt=r("button"),Mt.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"></path></svg>
        Export Settings`,yl=g(),et=r("label"),Xe=$("svg"),rl=$("path"),Yt=E(`
        Import Settings
        `),ct=r("input"),fl=g(),qt=r("button"),qt.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 6h18M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"></path></svg>
        Clear All Data`,Lt=g(),Tt=r("section"),Tt.innerHTML='<h2 class="svelte-f00ld1">About</h2> <div class="about-info svelte-f00ld1"><p class="svelte-f00ld1"><strong>Purl</strong> - Log Aggregation Dashboard</p> <p class="svelte-f00ld1">Built with Perl + ClickHouse + Svelte</p> <p class="version svelte-f00ld1">Version 1.0.0</p></div>',i(n,"class","svelte-f00ld1"),i(l,"class","page-header svelte-f00ld1"),i(u,"class","svelte-f00ld1"),i(_,"class","setting-info svelte-f00ld1"),i(v,"id","time-range"),i(v,"class","svelte-f00ld1"),t[0].defaultTimeRange===void 0&&Vt(()=>t[10].call(v)),i(d,"class","setting-row svelte-f00ld1"),i(k,"class","setting-info svelte-f00ld1"),i(S,"id","auto-refresh"),i(S,"class","svelte-f00ld1"),t[0].refreshInterval===void 0&&Vt(()=>t[11].call(S)),i(h,"class","setting-row svelte-f00ld1"),i(z,"class","setting-info svelte-f00ld1"),R.__value=100,se(R,R.__value),P.__value=250,se(P,P.__value),A.__value=500,se(A,A.__value),j.__value=1e3,se(j,j.__value),i(L,"id","max-results"),i(L,"class","svelte-f00ld1"),t[0].maxResults===void 0&&Vt(()=>t[12].call(L)),i(T,"class","setting-row svelte-f00ld1"),i(M,"class","setting-info svelte-f00ld1"),i(H,"type","checkbox"),i(H,"class","svelte-f00ld1"),i(G,"class","toggle-slider svelte-f00ld1"),i(I,"class","toggle svelte-f00ld1"),i(B,"class","setting-row svelte-f00ld1"),i(Q,"class","setting-info svelte-f00ld1"),i(X,"type","checkbox"),i(X,"class","svelte-f00ld1"),i(x,"class","toggle-slider svelte-f00ld1"),i(D,"class","toggle svelte-f00ld1"),i(F,"class","setting-row svelte-f00ld1"),i(o,"class","settings-section svelte-f00ld1"),i(be,"class","svelte-f00ld1"),i(we,"class","section-desc svelte-f00ld1"),i(ve,"d","M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"),i(ze,"width","20"),i(ze,"height","20"),i(ze,"viewBox","0 0 24 24"),i(ze,"fill","currentColor"),i(ze,"class","svelte-f00ld1"),i(pe,"class","notification-header svelte-f00ld1"),i($e,"class","notification-desc svelte-f00ld1"),i(nt,"class","notification-env svelte-f00ld1"),i(ce,"class","notification-card svelte-f00ld1"),i(it,"d","M5.042 15.165a2.528 2.528 0 0 1-2.52 2.523A2.528 2.528 0 0 1 0 15.165a2.527 2.527 0 0 1 2.522-2.52h2.52v2.52zM6.313 15.165a2.527 2.527 0 0 1 2.521-2.52 2.527 2.527 0 0 1 2.521 2.52v6.313A2.528 2.528 0 0 1 8.834 24a2.528 2.528 0 0 1-2.521-2.522v-6.313zM8.834 5.042a2.528 2.528 0 0 1-2.521-2.52A2.528 2.528 0 0 1 8.834 0a2.528 2.528 0 0 1 2.521 2.522v2.52H8.834zM8.834 6.313a2.528 2.528 0 0 1 2.521 2.521 2.528 2.528 0 0 1-2.521 2.521H2.522A2.528 2.528 0 0 1 0 8.834a2.528 2.528 0 0 1 2.522-2.521h6.312zM18.956 8.834a2.528 2.528 0 0 1 2.522-2.521A2.528 2.528 0 0 1 24 8.834a2.528 2.528 0 0 1-2.522 2.521h-2.522V8.834zM17.688 8.834a2.528 2.528 0 0 1-2.523 2.521 2.527 2.527 0 0 1-2.52-2.521V2.522A2.527 2.527 0 0 1 15.165 0a2.528 2.528 0 0 1 2.523 2.522v6.312zM15.165 18.956a2.528 2.528 0 0 1 2.523 2.522A2.528 2.528 0 0 1 15.165 24a2.527 2.527 0 0 1-2.52-2.522v-2.522h2.52zM15.165 17.688a2.527 2.527 0 0 1-2.52-2.523 2.526 2.526 0 0 1 2.52-2.52h6.313A2.527 2.527 0 0 1 24 15.165a2.528 2.528 0 0 1-2.522 2.523h-6.313z"),i(re,"width","20"),i(re,"height","20"),i(re,"viewBox","0 0 24 24"),i(re,"fill","currentColor"),i(re,"class","svelte-f00ld1"),i(ye,"class","notification-header svelte-f00ld1"),i(yt,"class","notification-desc svelte-f00ld1"),i(Wt,"class","notification-env svelte-f00ld1"),i(Re,"class","notification-card svelte-f00ld1"),i(al,"d","M10 13a5 5 0 007.54.54l3-3a5 5 0 00-7.07-7.07l-1.72 1.71"),i(vt,"d","M14 11a5 5 0 00-7.54-.54l-3 3a5 5 0 007.07 7.07l1.71-1.71"),i(We,"width","20"),i(We,"height","20"),i(We,"viewBox","0 0 24 24"),i(We,"fill","none"),i(We,"stroke","currentColor"),i(We,"stroke-width","2"),i(We,"class","svelte-f00ld1"),i(Ke,"class","notification-header svelte-f00ld1"),i(Nt,"class","notification-desc svelte-f00ld1"),i(Ue,"class","notification-env svelte-f00ld1"),i(Be,"class","notification-card svelte-f00ld1"),i(He,"class","notification-cards svelte-f00ld1"),i(me,"class","settings-section svelte-f00ld1"),i(Qt,"class","svelte-f00ld1"),i(Mt,"class","action-btn svelte-f00ld1"),i(rl,"d","M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M17 8l-5-5-5 5M12 3v12"),i(Xe,"width","16"),i(Xe,"height","16"),i(Xe,"viewBox","0 0 24 24"),i(Xe,"fill","none"),i(Xe,"stroke","currentColor"),i(Xe,"stroke-width","2"),i(ct,"type","file"),i(ct,"accept",".json"),ct.hidden=!0,i(et,"class","action-btn svelte-f00ld1"),i(qt,"class","action-btn danger svelte-f00ld1"),i(xe,"class","action-buttons svelte-f00ld1"),i(ot,"class","settings-section svelte-f00ld1"),i(Tt,"class","settings-section about svelte-f00ld1"),i(e,"class","settings-page svelte-f00ld1")},m(W,ge){N(W,e,ge),s(e,l),s(l,n),s(l,a),Oe&&Oe.m(l,null),s(e,c),s(e,o),s(o,u),s(o,f),s(o,d),s(d,_),s(d,m),s(d,v);for(let Ze=0;Ze<Ne.length;Ze+=1)Ne[Ze]&&Ne[Ze].m(v,null);pt(v,t[0].defaultTimeRange,!0),s(o,p),s(o,h),s(h,k),s(h,w),s(h,S);for(let Ze=0;Ze<Le.length;Ze+=1)Le[Ze]&&Le[Ze].m(S,null);pt(S,t[0].refreshInterval,!0),s(o,b),s(o,T),s(T,z),s(T,q),s(T,L),s(L,R),s(L,P),s(L,A),s(L,j),pt(L,t[0].maxResults,!0),s(o,C),s(o,B),s(B,M),s(B,y),s(B,I),s(I,H),H.checked=t[0].showHost,s(I,U),s(I,G),s(o,K),s(o,F),s(F,Q),s(F,J),s(F,D),s(D,X),X.checked=t[0].compactMode,s(D,Y),s(D,x),s(e,de),s(e,me),s(me,be),s(me,Ce),s(me,we),s(me,Fe),s(me,He),s(He,ce),s(ce,pe),s(pe,ze),s(ze,ve),s(pe,fe),s(pe,ue),s(pe,ae),tt.m(pe,null),s(ce,_e),s(ce,$e),s(ce,At),s(ce,nt),s(ce,kt),Pe&&Pe.m(ce,null),s(ce,wt),Ae&&Ae.m(ce,null),s(He,Dt),s(He,Re),s(Re,ye),s(ye,re),s(re,it),s(ye,ke),s(ye,Et),s(ye,bl),ft.m(ye,null),s(Re,Ft),s(Re,yt),s(Re,il),s(Re,Wt),s(Re,Ct),Se&&Se.m(Re,null),s(Re,Ot),Ee&&Ee.m(Re,null),s(He,kl),s(He,Be),s(Be,Ke),s(Ke,We),s(We,al),s(We,vt),s(Ke,Ut),s(Ke,ol),s(Ke,Jt),lt.m(Ke,null),s(Be,Kt),s(Be,Nt),s(Be,wl),s(Be,Ue),s(Be,Xt),qe&&qe.m(Be,null),s(Be,cl),Ve&&Ve.m(Be,null),s(e,St),s(e,ot),s(ot,Qt),s(ot,Gt),s(ot,xe),s(xe,Mt),s(xe,yl),s(xe,et),s(et,Xe),s(Xe,rl),s(et,Yt),s(et,ct),s(xe,fl),s(xe,qt),s(e,Lt),s(e,Tt),ul||($t=[V(v,"change",t[10]),V(v,"change",t[6]),V(S,"change",t[11]),V(S,"change",t[6]),V(L,"change",t[12]),V(L,"change",t[6]),V(H,"change",t[13]),V(H,"change",t[6]),V(X,"change",t[14]),V(X,"change",t[6]),V(Mt,"click",t[8]),V(ct,"change",t[9]),V(qt,"click",to)],ul=!0)},p(W,[ge]){var Ze,dl,It;if(W[3]?Oe||(Oe=Ci(),Oe.c(),Oe.m(l,null)):Oe&&(Oe.d(1),Oe=null),ge&16){ht=ie(W[4]);let oe;for(oe=0;oe<ht.length;oe+=1){const Te=yi(W,ht,oe);Ne[oe]?Ne[oe].p(Te,ge):(Ne[oe]=Si(Te),Ne[oe].c(),Ne[oe].m(v,null))}for(;oe<Ne.length;oe+=1)Ne[oe].d(1);Ne.length=ht.length}if(ge&17&&pt(v,W[0].defaultTimeRange),ge&32){Ie=ie(W[5]);let oe;for(oe=0;oe<Ie.length;oe+=1){const Te=wi(W,Ie,oe);Le[oe]?Le[oe].p(Te,ge):(Le[oe]=Mi(Te),Le[oe].c(),Le[oe].m(S,null))}for(;oe<Le.length;oe+=1)Le[oe].d(1);Le.length=Ie.length}ge&17&&pt(S,W[0].refreshInterval),ge&17&&pt(L,W[0].maxResults),ge&17&&(H.checked=W[0].showHost),ge&17&&(X.checked=W[0].compactMode),rt!==(rt=Cl(W))&&(tt.d(1),tt=rt(W),tt&&(tt.c(),tt.m(pe,null))),W[0].notifications.telegram.configured?Pe?Pe.p(W,ge):(Pe=Li(W),Pe.c(),Pe.m(ce,wt)):Pe&&(Pe.d(1),Pe=null),((Ze=W[2])==null?void 0:Ze.type)==="telegram"?Ae?Ae.p(W,ge):(Ae=Ti(W),Ae.c(),Ae.m(ce,null)):Ae&&(Ae.d(1),Ae=null),jt!==(jt=xt(W))&&(ft.d(1),ft=jt(W),ft&&(ft.c(),ft.m(ye,null))),W[0].notifications.slack.configured?Se?Se.p(W,ge):(Se=Hi(W),Se.c(),Se.m(Re,Ot)):Se&&(Se.d(1),Se=null),((dl=W[2])==null?void 0:dl.type)==="slack"?Ee?Ee.p(W,ge):(Ee=zi(W),Ee.c(),Ee.m(Re,null)):Ee&&(Ee.d(1),Ee=null),Ht!==(Ht=Sl(W))&&(lt.d(1),lt=Ht(W),lt&&(lt.c(),lt.m(Ke,null))),W[0].notifications.webhook.configured?qe?qe.p(W,ge):(qe=Ri(W),qe.c(),qe.m(Be,cl)):qe&&(qe.d(1),qe=null),((It=W[2])==null?void 0:It.type)==="webhook"?Ve?Ve.p(W,ge):(Ve=Bi(W),Ve.c(),Ve.m(Be,null)):Ve&&(Ve.d(1),Ve=null)},i:le,o:le,d(W){W&&O(e),Oe&&Oe.d(),Je(Ne,W),Je(Le,W),tt.d(),Pe&&Pe.d(),Ae&&Ae.d(),ft.d(),Se&&Se.d(),Ee&&Ee.d(),lt.d(),qe&&qe.d(),Ve&&Ve.d(),ul=!1,Me($t)}}}const Ai="/api";async function to(){confirm("Are you sure you want to clear all local data? This includes saved searches, column settings, and preferences.")&&(localStorage.removeItem("purl_settings"),localStorage.removeItem("purl_column_config"),localStorage.removeItem("purl_search_history"),localStorage.removeItem("purl_saved_searches"),window.location.reload())}function lo(t,e,l){let n={theme:"dark",refreshInterval:30,defaultTimeRange:"15m",maxResults:500,showHost:!1,compactMode:!1,notifications:{telegram:{enabled:!1,configured:!1},slack:{enabled:!1,configured:!1},webhook:{enabled:!1,configured:!1}}},a=null,c=null,o=!1;const u=[{value:"5m",label:"5 minutes"},{value:"15m",label:"15 minutes"},{value:"30m",label:"30 minutes"},{value:"1h",label:"1 hour"},{value:"4h",label:"4 hours"},{value:"12h",label:"12 hours"},{value:"24h",label:"24 hours"},{value:"7d",label:"7 days"}],f=[{value:0,label:"Off"},{value:10,label:"10 seconds"},{value:30,label:"30 seconds"},{value:60,label:"1 minute"},{value:300,label:"5 minutes"}];Zt(()=>{d(),m()});function d(){const R=localStorage.getItem("purl_settings");if(R)try{const P=JSON.parse(R);l(0,n={...n,...P})}catch{}}function _(){localStorage.setItem("purl_settings",JSON.stringify(n)),l(3,o=!0),setTimeout(()=>l(3,o=!1),2e3),window.dispatchEvent(new CustomEvent("settings-changed",{detail:n}))}async function m(){var R,P,A;try{const j=await fetch(`${Ai}/metrics/json`);if(j.ok){const C=await j.json();l(0,n.notifications.telegram.configured=!!((R=C.notifiers)!=null&&R.telegram),n),l(0,n.notifications.slack.configured=!!((P=C.notifiers)!=null&&P.slack),n),l(0,n.notifications.webhook.configured=!!((A=C.notifiers)!=null&&A.webhook),n)}}catch{}}async function v(R){l(1,a=R),l(2,c=null);try{const A=await(await fetch(`${Ai}/alerts/test-notification?type=${R}`,{method:"POST"})).json();A.success?l(2,c={type:R,success:!0,message:"Test message sent!"}):l(2,c={type:R,success:!1,message:A.error||"Failed to send"})}catch(P){l(2,c={type:R,success:!1,message:P.message})}finally{l(1,a=null)}}function p(){const R={settings:n,columnConfig:localStorage.getItem("purl_column_config"),savedSearches:localStorage.getItem("purl_saved_searches"),exportDate:new Date().toISOString()},P=new Blob([JSON.stringify(R,null,2)],{type:"application/json"}),A=URL.createObjectURL(P),j=document.createElement("a");j.href=A,j.download=`purl-settings-${new Date().toISOString().split("T")[0]}.json`,j.click(),URL.revokeObjectURL(A)}function h(R){var j;const P=(j=R.target.files)==null?void 0:j[0];if(!P)return;const A=new FileReader;A.onload=C=>{var B;try{const M=JSON.parse((B=C.target)==null?void 0:B.result);M.settings&&(l(0,n={...n,...M.settings}),_()),M.columnConfig&&localStorage.setItem("purl_column_config",M.columnConfig),M.savedSearches&&localStorage.setItem("purl_saved_searches",M.savedSearches),alert("Settings imported successfully!")}catch{alert("Failed to import settings: Invalid file format")}},A.readAsText(P)}function k(){n.defaultTimeRange=Hl(this),l(0,n),l(4,u)}function w(){n.refreshInterval=Hl(this),l(0,n),l(4,u)}function S(){n.maxResults=Hl(this),l(0,n),l(4,u)}function b(){n.showHost=this.checked,l(0,n),l(4,u)}function T(){n.compactMode=this.checked,l(0,n),l(4,u)}return[n,a,c,o,u,f,_,v,p,h,k,w,S,b,T,()=>v("telegram"),()=>v("slack"),()=>v("webhook")]}class so extends bt{constructor(e){super(),mt(this,e,lo,eo,ut,{})}}function Ei(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C;function B(F){t[21](F)}let M={};t[5]!==void 0&&(M.value=t[5]),e=new va({props:M}),nl.push(()=>ea(e,"value",B)),e.$on("search",t[10]),c=new _a({props:{value:t[4]}}),c.$on("change",t[11]);function y(F,Q){return F[0]?io:no}let I=y(t),H=I(t);function U(F,Q){return F[6]?oo:ao}let G=U(t),K=G(t);return{c(){Rt(e.$$.fragment),n=g(),a=r("div"),Rt(c.$$.fragment),o=g(),u=r("button"),H.c(),d=g(),_=r("button"),_.innerHTML='<svg width="14" height="14" viewBox="0 0 14 14" class="svelte-ni03f9"><path fill="currentColor" d="M11 1H3a2 2 0 0 0-2 2v8a2 2 0 0 0 2 2h8a2 2 0 0 0 2-2V3a2 2 0 0 0-2-2ZM7 10a2 2 0 1 1 0-4 2 2 0 0 1 0 4Zm3-6H4V2h6v2Z"></path></svg>',m=g(),v=r("div"),p=r("button"),h=$("svg"),k=$("path"),w=E(`
            Export`),b=g(),T=r("div"),z=r("button"),z.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-ni03f9"><path fill="currentColor" d="M2 1h8a1 1 0 0 1 1 1v8a1 1 0 0 1-1 1H2a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1Zm1 3h6v1H3V4Zm0 2h6v1H3V6Zm0 2h4v1H3V8Z"></path></svg>
              Export as CSV`,q=g(),L=r("button"),L.innerHTML=`<svg width="12" height="12" viewBox="0 0 12 12" class="svelte-ni03f9"><path fill="currentColor" d="M3 2a1 1 0 0 0-1 1v2a1 1 0 0 1-1 1 1 1 0 0 1 1 1v2a1 1 0 0 0 1 1M9 2a1 1 0 0 1 1 1v2a1 1 0 0 0 1 1 1 1 0 0 0-1 1v2a1 1 0 0 1-1 1"></path></svg>
              Export as JSON`,R=g(),P=r("button"),K.c(),i(u,"class","btn svelte-ni03f9"),i(u,"title",f=t[0]?"Stop live tail":"Start live tail"),ne(u,"active",t[0]),i(_,"class","btn svelte-ni03f9"),i(_,"title","Save current search"),i(k,"d","M7 1v8M3 5l4 4 4-4M2 11v1a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1v-1"),i(k,"stroke","currentColor"),i(k,"stroke-width","1.5"),i(k,"fill","none"),i(k,"stroke-linecap","round"),i(k,"stroke-linejoin","round"),i(h,"width","14"),i(h,"height","14"),i(h,"viewBox","0 0 14 14"),i(h,"class","svelte-ni03f9"),i(p,"class","btn svelte-ni03f9"),i(p,"title","Export logs"),p.disabled=S=t[3].length===0,i(z,"class","svelte-ni03f9"),i(L,"class","svelte-ni03f9"),i(T,"class","export-menu svelte-ni03f9"),i(v,"class","export-dropdown svelte-ni03f9"),i(P,"class","btn svelte-ni03f9"),P.disabled=t[6],i(a,"class","header-actions svelte-ni03f9")},m(F,Q){_t(e,F,Q),N(F,n,Q),N(F,a,Q),_t(c,a,null),s(a,o),s(a,u),H.m(u,null),s(a,d),s(a,_),s(a,m),s(a,v),s(v,p),s(p,h),s(h,k),s(p,w),s(v,b),s(v,T),s(T,z),s(T,q),s(T,L),s(a,R),s(a,P),K.m(P,null),A=!0,j||(C=[V(u,"click",t[9]),V(_,"click",t[14]),V(z,"click",t[15]),V(L,"click",t[16]),V(P,"click",t[10])],j=!0)},p(F,Q){const J={};!l&&Q&32&&(l=!0,J.value=F[5],Qi(()=>l=!1)),e.$set(J);const D={};Q&16&&(D.value=F[4]),c.$set(D),I!==(I=y(F))&&(H.d(1),H=I(F),H&&(H.c(),H.m(u,null))),(!A||Q&1&&f!==(f=F[0]?"Stop live tail":"Start live tail"))&&i(u,"title",f),(!A||Q&1)&&ne(u,"active",F[0]),(!A||Q&8&&S!==(S=F[3].length===0))&&(p.disabled=S),G!==(G=U(F))&&(K.d(1),K=G(F),K&&(K.c(),K.m(P,null))),(!A||Q&64)&&(P.disabled=F[6])},i(F){A||(De(e.$$.fragment,F),De(c.$$.fragment,F),A=!0)},o(F){st(e.$$.fragment,F),st(c.$$.fragment,F),A=!1},d(F){F&&(O(n),O(a)),gt(e,F),gt(c),H.d(),K.d(),j=!1,Me(C)}}}function no(t){let e;return{c(){e=E("Live Tail")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function io(t){let e,l;return{c(){e=r("span"),l=E(" Live"),i(e,"class","live-dot svelte-ni03f9")},m(n,a){N(n,e,a),N(n,l,a)},d(n){n&&(O(e),O(l))}}}function ao(t){let e;return{c(){e=E("Refresh")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function oo(t){let e;return{c(){e=r("span"),i(e,"class","spinner svelte-ni03f9")},m(l,n){N(l,e,n)},d(l){l&&O(e)}}}function co(t){let e,l;return e=new so({}),{c(){Rt(e.$$.fragment)},m(n,a){_t(e,n,a),l=!0},p:le,i(n){l||(De(e.$$.fragment,n),l=!0)},o(n){st(e.$$.fragment,n),l=!1},d(n){gt(e,n)}}}function ro(t){let e,l;return e=new Ka({}),{c(){Rt(e.$$.fragment)},m(n,a){_t(e,n,a),l=!0},p:le,i(n){l||(De(e.$$.fragment,n),l=!0)},o(n){st(e.$$.fragment,n),l=!1},d(n){gt(e,n)}}}function fo(t){let e,l,n=t[7].toLocaleString()+"",a,c,o,u,f,d,_,m,v,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C=t[5]&&Oi(t);w=new ba({}),w.$on("filter",t[12]);let B={};return b=new Ea({props:B}),t[22](b),b.$on("apply",t[13]),z=new Da({}),R=new Ha({}),A=new Sa({props:{logs:t[3]}}),{c(){e=r("div"),l=r("span"),a=E(n),c=E(" logs"),o=g(),u=r("span"),u.textContent="|",f=g(),d=r("span"),_=E("Time range: "),m=E(t[4]),v=g(),C&&C.c(),p=g(),h=r("div"),k=r("aside"),Rt(w.$$.fragment),S=g(),Rt(b.$$.fragment),T=g(),Rt(z.$$.fragment),q=g(),L=r("div"),Rt(R.$$.fragment),P=g(),Rt(A.$$.fragment),i(u,"class","separator svelte-ni03f9"),i(e,"class","stats-bar svelte-ni03f9"),i(k,"class","sidebar svelte-ni03f9"),i(L,"class","main-content svelte-ni03f9"),i(h,"class","container svelte-ni03f9")},m(M,y){N(M,e,y),s(e,l),s(l,a),s(l,c),s(e,o),s(e,u),s(e,f),s(e,d),s(d,_),s(d,m),s(e,v),C&&C.m(e,null),N(M,p,y),N(M,h,y),s(h,k),_t(w,k,null),s(k,S),_t(b,k,null),s(k,T),_t(z,k,null),s(h,q),s(h,L),_t(R,L,null),s(L,P),_t(A,L,null),j=!0},p(M,y){(!j||y&128)&&n!==(n=M[7].toLocaleString()+"")&&Z(a,n),(!j||y&16)&&Z(m,M[4]),M[5]?C?C.p(M,y):(C=Oi(M),C.c(),C.m(e,null)):C&&(C.d(1),C=null);const I={};b.$set(I);const H={};y&8&&(H.logs=M[3]),A.$set(H)},i(M){j||(De(w.$$.fragment,M),De(b.$$.fragment,M),De(z.$$.fragment,M),De(R.$$.fragment,M),De(A.$$.fragment,M),j=!0)},o(M){st(w.$$.fragment,M),st(b.$$.fragment,M),st(z.$$.fragment,M),st(R.$$.fragment,M),st(A.$$.fragment,M),j=!1},d(M){M&&(O(e),O(p),O(h)),C&&C.d(),gt(w),t[22](null),gt(b),gt(z),gt(R),gt(A)}}}function Oi(t){let e,l,n,a,c,o;return{c(){e=r("span"),e.textContent="|",l=g(),n=r("span"),a=E("Query: "),c=r("code"),o=E(t[5]),i(e,"class","separator svelte-ni03f9"),i(c,"class","svelte-ni03f9")},m(u,f){N(u,e,f),N(u,l,f),N(u,n,f),s(n,a),s(n,c),s(c,o)},p(u,f){f&32&&Z(o,u[5])},d(u){u&&(O(e),O(l),O(n))}}}function uo(t){let e,l,n,a,c,o,u,f,d,_,m,v,p,h,k,w,S,b=t[2]==="logs"&&Ei(t);const T=[fo,ro,co],z=[];function q(L,R){return L[2]==="logs"?0:L[2]==="analytics"?1:L[2]==="settings"?2:-1}return~(p=q(t))&&(h=z[p]=T[p](t)),{c(){e=r("main"),l=r("header"),n=r("button"),n.innerHTML='<svg width="32" height="32" viewBox="0 0 32 32" class="svelte-ni03f9"><circle cx="16" cy="16" r="14" fill="none" stroke="currentColor" stroke-width="2"></circle><path d="M10 12 L22 12 M10 16 L22 16 M10 20 L18 20" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path></svg> <span>Purl</span>',a=g(),c=r("nav"),o=r("button"),o.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ni03f9"><path d="M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8z"></path><path d="M14 2v6h6M16 13H8M16 17H8M10 9H8"></path></svg>
        Logs`,u=g(),f=r("button"),f.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ni03f9"><path d="M3 3v18h18"></path><path d="M18 9l-5-6-4 8-3-2"></path></svg>
        Analytics`,d=g(),_=r("button"),_.innerHTML=`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="svelte-ni03f9"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"></path></svg>
        Settings`,m=g(),b&&b.c(),v=g(),h&&h.c(),i(n,"class","logo svelte-ni03f9"),i(o,"class","svelte-ni03f9"),ne(o,"active",t[2]==="logs"),i(f,"class","svelte-ni03f9"),ne(f,"active",t[2]==="analytics"),i(_,"class","svelte-ni03f9"),ne(_,"active",t[2]==="settings"),i(c,"class","nav-tabs svelte-ni03f9"),i(l,"class","svelte-ni03f9"),i(e,"class","svelte-ni03f9")},m(L,R){N(L,e,R),s(e,l),s(l,n),s(l,a),s(l,c),s(c,o),s(c,u),s(c,f),s(c,d),s(c,_),s(l,m),b&&b.m(l,null),s(e,v),~p&&z[p].m(e,null),k=!0,w||(S=[V(n,"click",t[17]),V(o,"click",t[18]),V(f,"click",t[19]),V(_,"click",t[20])],w=!0)},p(L,[R]){(!k||R&4)&&ne(o,"active",L[2]==="logs"),(!k||R&4)&&ne(f,"active",L[2]==="analytics"),(!k||R&4)&&ne(_,"active",L[2]==="settings"),L[2]==="logs"?b?(b.p(L,R),R&4&&De(b,1)):(b=Ei(L),b.c(),De(b,1),b.m(l,null)):b&&(Ys(),st(b,1,1,()=>{b=null}),$s());let P=p;p=q(L),p===P?~p&&z[p].p(L,R):(h&&(Ys(),st(z[P],1,1,()=>{z[P]=null}),$s()),~p?(h=z[p],h?h.p(L,R):(h=z[p]=T[p](L),h.c()),De(h,1),h.m(e,null)):h=null)},i(L){k||(De(b),De(h),k=!0)},o(L){st(b),st(h),k=!1},d(L){L&&O(e),b&&b.d(),~p&&z[p].d(),w=!1,Me(S)}}}function Ni(t,e){const l=URL.createObjectURL(t),n=document.createElement("a");n.href=l,n.download=e,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(l)}function vo(t,e,l){let n,a,c,o,u;Ye(t,Ql,B=>l(3,n=B)),Ye(t,sl,B=>l(4,a=B)),Ye(t,Tl,B=>l(5,c=B)),Ye(t,Jl,B=>l(6,o=B)),Ye(t,Gl,B=>l(7,u=B));let f,d=!1,_,m="logs";Zt(async()=>(v(),window.addEventListener("hashchange",v),m==="logs"&&await Ll(),()=>window.removeEventListener("hashchange",v)));function v(){const B=window.location.hash.slice(1)||"logs";["logs","analytics","settings"].includes(B)&&l(2,m=B)}function p(B){l(2,m=B),window.location.hash=B}function h(){l(0,d=!d),d?f=aa():f&&(f.close(),f=null)}function k(){Ll()}function w(B){Al(sl,a=B.detail,a),Ll()}function S(B){const{value:M}=B.detail;Al(Tl,c=M,c),Ll()}function b(B){const{query:M,timeRange:y}=B.detail;Al(Tl,c=M,c),Al(sl,a=y,a),Ll()}function T(){_==null||_.openSaveModal(c,a)}function z(){if(n.length===0)return;const B=["timestamp","level","service","host","message"],M=[B.join(",")];for(const I of n){const H=B.map(U=>{const G=I[U]||"",K=String(G).replace(/"/g,'""');return/[,\n"]/.test(K)?`"${K}"`:K});M.push(H.join(","))}const y=new Blob([M.join(`
`)],{type:"text/csv;charset=utf-8;"});Ni(y,`purl-logs-${Date.now()}.csv`)}function q(){if(n.length===0)return;const B=n.map(y=>({timestamp:y.timestamp,level:y.level,service:y.service,host:y.host,message:y.message,meta:y.meta||{}})),M=new Blob([JSON.stringify(B,null,2)],{type:"application/json"});Ni(M,`purl-logs-${Date.now()}.json`)}const L=()=>p("logs"),R=()=>p("logs"),P=()=>p("analytics"),A=()=>p("settings");function j(B){c=B,Tl.set(c)}function C(B){nl[B?"unshift":"push"](()=>{_=B,l(1,_)})}return[d,_,m,n,a,c,o,u,p,h,k,w,S,b,T,z,q,L,R,P,A,j,C]}class ho extends bt{constructor(e){super(),mt(this,e,vo,uo,ut,{})}}new ho({target:document.getElementById("app")});
